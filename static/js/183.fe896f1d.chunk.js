"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[183,477],{8477:(e,r,t)=>{t.r(r),t.d(r,{default:()=>l});var n=t(5043);Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function c(e){const{width:r}=function(){const e=()=>({width:window.innerWidth,height:window.innerHeight}),[r,t]=n.useState(e);return n.useLayoutEffect((()=>{const r=()=>t(e);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)}),[]),r}(),t=(0,n.useRef)({animationFrameId:0,containerHeight:0,containerWidth:0,impactCount:0,isPosXIncrement:!0,isPosYIncrement:!0,positionX:Math.random()*r,positionY:Math.random()*r}),c=(0,n.useRef)(null),o=(0,n.useRef)(null),[a,s]=(0,n.useState)(0),[u,i]=(0,n.useState)(!1);function l(e,r,n,c,o){const a=e-n;let u=c+(t.current[o]?r:-r);return(u<=0||u>=a)&&(t.current[o]=!t.current[o],t.current.impactCount+=1,s(t.current.impactCount),u=u<=0?0:a),u}function d(){if(c.current&&c.current.parentElement){const r=c.current.parentElement.clientHeight,n=c.current.parentElement.clientWidth,o=c.current.clientHeight,a=c.current.clientWidth,s=(null==e?void 0:e.speed)||2,u=l(n,s,a,t.current.positionX,"isPosXIncrement"),i=l(r,s,o,t.current.positionY,"isPosYIncrement");c.current.style.transform="translate3d(".concat(u,"px, ").concat(i,"px, 0)"),t.current.positionX=u,t.current.positionY=i}t.current.animationFrameId=requestAnimationFrame(d)}return(0,n.useEffect)((()=>{(null==e?void 0:e.freezeOnHover)&&(u&&(cancelAnimationFrame(t.current.animationFrameId),t.current.animationFrameId=0),u||t.current.animationFrameId||(t.current.animationFrameId=requestAnimationFrame(d))),(null==e?void 0:e.hoverCallback)&&e.hoverCallback()}),[u,e]),(0,n.useLayoutEffect)((()=>{const e=c.current,r=()=>i(!0),n=()=>i(!1);return e&&(e.style.willChange="transform",e.addEventListener("mouseover",r),e.addEventListener("mouseout",n),t.current.animationFrameId=requestAnimationFrame(d)),()=>{e&&(e.removeEventListener("mouseover",r),e.removeEventListener("mouseout",n)),cancelAnimationFrame(t.current.animationFrameId)}}),[]),{containerRef:o,elementRef:c,hovered:u,impactCount:a}}var o=t(890);class a{constructor(e,r,t){this.red=e,this.green=r,this.blue=t,this.rgb="rgb(".concat(e,", ").concat(r,", ").concat(t,")")}}function s(e){const r=255-e.red,t=255-e.green,n=255-e.blue;return new a(r,t,n)}const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;const t=Array.from({length:r-e+1},((r,t)=>t+e)),n=(0,o.J)(t),c=(0,o.J)(t),s=(0,o.J)(t);return new a(n,c,s)};var i=t(579);function l(){const[e,r]=(0,n.useState)(u()),{containerRef:t,elementRef:o,impactCount:a}=c({speed:window.innerWidth/2e3*3}),l=(0,n.useRef)(0);return(0,n.useEffect)((()=>{const e=Date.now();e-l.current>=300&&(r(u()),l.current=e)}),[a]),(0,i.jsx)("div",{ref:t,id:"bounce-room",style:{color:e.rgb,backgroundColor:s(e).rgb},children:(0,i.jsx)("div",{ref:o,id:"bouncing-text",children:"desktop only"})})}},5509:(e,r,t)=>{t.r(r),t.d(r,{default:()=>O});var n=t(5043),c=t(2432);const o=t.p+"static/media/eye.dec3834250fe27c81ae7b742bbba007f.svg";const a=t.p+"static/media/eye-crossed.abb67d156b26b0605d33d1bb10209b99.svg";var s=t(579);const u=()=>{const{isColorBlindMode:e,toggleColorBlindMode:r}=(0,c.Z)();return(0,s.jsx)("button",{className:"colorblind-toggle ".concat(e?"colorblind-mode":"regular-mode"),onClick:r,"aria-label":e?"Switch to color mode":"Switch to colorblind-friendly mode",title:e?"Color mode":"Colorblind-friendly mode",children:(0,s.jsx)("img",{src:e?a:o,alt:e?"Eye crossed icon":"Eye icon",className:"colorblind-toggle-icon"})})};var i=t(7375),l=t(8477);const d=t.p+"static/media/game_over.21c74c34f50a8ecedde0.mp3",h=t.p+"static/media/groovy_click.5cb6eae90670166005af.mp3",f=t.p+"static/media/the_gathering.2d97c4755109d9278151.mp3",m=35,b=20,w=6,g=125,p=5,v=22,y=1,k=m*v,C=b*v,R=(e,r)=>e*m+r,x=(e,r)=>e<0||r<0||e>=b||r>=m,E=e=>(e+2)%4,A=function(e,r,t,n){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return((e,r,t,n)=>Math.max(Math.abs(e-t),Math.abs(r-n)))(e,r,t,n)>=c+1},j=(e,r,t)=>[[e-1,r],[e,r+1],[e+1,r],[e,r-1]][t],M={w:"ArrowUp",W:"ArrowUp",s:"ArrowDown",S:"ArrowDown",a:"ArrowLeft",A:"ArrowLeft",d:"ArrowRight",D:"ArrowRight"},S={ArrowUp:0,ArrowDown:2,ArrowLeft:3,ArrowRight:y},F=function(e,r,t,n){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:v;e.fillStyle=n,e.fillRect(t*c,r*c,c,c)},L=function(e,r,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v;return e.clearRect(t*n,r*n,n,n)};function O(){const{isColorBlindMode:e}=(0,c.Z)(),[r,t]=(0,n.useState)(0),[o,a]=(0,n.useState)(!1),[O,I]=(0,n.useState)(0),[P,D]=(0,n.useState)(0),[N,T]=(0,n.useState)(0),z=(0,n.useRef)(null),W=(0,n.useRef)(g),K=(0,n.useRef)(!1),q=(0,n.useRef)(y),H=(0,n.useRef)(y),U=(0,n.useRef)([]),X=(0,n.useRef)(new Set),Y=(0,n.useRef)({row:-1,col:-1}),B=(0,n.useRef)(!1),J=(0,n.useRef)(!1),_=(0,n.useRef)([]),G=(0,n.useRef)(new Set),V=(0,n.useRef)(new Uint8Array(b*m)),Z=(0,n.useRef)([]),Q=(0,n.useMemo)((()=>new i.D(h)),[]),$=(0,n.useMemo)((()=>new i.D(d)),[]),ee=(0,n.useMemo)((()=>new i.D(f,!0)),[]),re=P<=768,te=(0,n.useCallback)(((e,r,t)=>{for(let n=e-1;n<=e+1;n++)for(let e=r-1;e<=r+1;e++){if(n<0||e<0||n>=b||e>=m)continue;const r=R(n,e),c=V.current[r]+t;V.current[r]=c<0?0:c}}),[]),ne=(0,n.useRef)(null),ce=(0,n.useRef)(null),oe=(0,n.useRef)(null),ae=(0,n.useRef)(null),se=(0,n.useRef)(null),ue=(0,n.useMemo)((()=>e?{grid:"rgba(255,255,255,0.3)",obstacle:"rgba(255,255,255,0.3)",food:"#3cff00",body:"#ffffff",head:"#ffffff",headKO:"#ff4d4f"}:{grid:"rgba(233,233,242,0.55)",obstacle:"rgba(28, 28, 28, 0.9)",food:"#3cff00",body:"#ffffff",head:"#ffffff",headKO:"#ff4d4f"}),[e]),ie=(0,n.useCallback)((function(e,r,t){let{alpha:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{alpha:!0};const c=Math.max(1,window.devicePixelRatio||1);(e.width!==r*c||e.height!==t*c)&&(e.width=r*c,e.height=t*c,e.style.width="".concat(r,"px"),e.style.height="".concat(t,"px"));const o=e.getContext("2d",{alpha:n});return o.setTransform(c,0,0,c,0,0),o}),[]),le=(0,n.useCallback)((e=>{e.save(),e.strokeStyle=ue.grid,e.setLineDash([2,3]),e.lineWidth=1,e.beginPath();for(let r=0;r<=b;r++){const t=r*v+.5;e.moveTo(0,t),e.lineTo(k,t)}for(let r=0;r<=m;r++){const t=r*v+.5;e.moveTo(t,0),e.lineTo(t,C)}e.stroke(),e.restore()}),[ue.grid]),de=(0,n.useCallback)(((e,r)=>{ae.current&&F(ae.current,e,r,ue.obstacle)}),[ue.obstacle]),he=(0,n.useCallback)((()=>{const e=Y.current;se.current&&e.row>=0&&F(se.current,e.row,e.col,ue.food)}),[ue.food]),fe=(0,n.useCallback)((()=>{const e=Y.current;if(!se.current||e.row<0)return;const r=U.current[U.current.length-1];r&&r.row===e.row&&r.col===e.col||L(se.current,e.row,e.col)}),[]),me=(0,n.useCallback)((()=>{if(!se.current||!U.current.length)return;const e=U.current;for(let n=0;n<e.length-1;n++)F(se.current,e[n].row,e[n].col,ue.body);const r=e[e.length-1],t=J.current?ue.headKO:ue.head;F(se.current,r.row,r.col,t)}),[ue.body,ue.head,ue.headKO]),be=me,we=(0,n.useCallback)((e=>{const r=M[e]||e,t=S[r];return null==t||t===E(q.current)?null:t}),[]),ge=(0,n.useCallback)(((e,r)=>!X.current.has(R(e,r))),[]),pe=(0,n.useCallback)(((e,r)=>!G.current.has(R(e,r))),[]),ve=(0,n.useCallback)(((e,r)=>0===V.current[R(e,r)]),[]),ye=(0,n.useCallback)(((e,r)=>{const t=Y.current;return t.row<0||A(e,r,t.row,t.col,1)}),[]),ke=(0,n.useCallback)(((e,r)=>{if(!U.current.length)return!0;const t=U.current[U.current.length-1];return A(e,r,t.row,t.col,5)}),[]),Ce=(0,n.useCallback)(((e,r)=>ge(e,r)&&ke(e,r)&&pe(e,r)&&ve(e,r)),[ge,ke,pe,ve]),Re=(0,n.useCallback)(((e,r)=>ge(e,r)&&pe(e,r)&&ve(e,r)&&ye(e,r)),[ge,pe,ve,ye]),xe=(0,n.useCallback)((()=>{let e,r,t=0;do{if(e=Math.random()*b|0,r=Math.random()*m|0,++t>300)return}while(!Re(e,r));_.current.push({row:e,col:r}),G.current.add(R(e,r)),de(e,r),te(e,r,1)}),[Re,de,te]),Ee=(0,n.useCallback)((()=>{let e,r,t=0;do{if(e=Math.random()*b|0,r=Math.random()*m|0,++t>200)break}while(!Ce(e,r));fe(),Y.current={row:e,col:r},he()}),[Ce,fe,he]),Ae=(0,n.useCallback)((()=>{t((r=>{const t=r+1;return e||t%p!==0||T((e=>0===e?Math.floor(Math.random()*(360-(e+43.5))):e+43.5)),t>=p&&t%p===0&&(xe(),xe()),t})),Ee()}),[e,xe,Ee]),je=(0,n.useCallback)((()=>{U.current=[],X.current=new Set,_.current=[],G.current=new Set,V.current=new Uint8Array(b*m),ce.current&&oe.current&&(ae.current=ie(ce.current,k,C,{alpha:!0}),se.current=ie(oe.current,k,C,{alpha:!0}),ae.current.clearRect(0,0,k,C),le(ae.current),se.current.clearRect(0,0,k,C));for(let e=0;e<w;e++)U.current.push({row:0,col:e}),X.current.add(R(0,e));$.volume=1,Q.volume=1,ee.volume=1,a(!1),t(0),q.current=y,H.current=y,Z.current=[],B.current=!1,J.current=!1,be(),Ee()}),[Q,ee,$,Ee,le,be]),Me=()=>{if(K.current)return;K.current=!0;let e=performance.now(),r=0;const t=n=>{if(!K.current)return;r+=n-e,e=n;const c=W.current;for(;r>=c;)Oe(),r-=c;z.current=requestAnimationFrame(t)};z.current=requestAnimationFrame(t)},Se=()=>{z.current&&cancelAnimationFrame(z.current),z.current=null,K.current=!1},Fe=(0,n.useCallback)((()=>{if(!se.current||!U.current.length)return;const e=U.current[U.current.length-1];F(se.current,e.row,e.col,ue.headKO)}),[ue.headKO]),Le=(0,n.useCallback)(((e,r)=>x(e,r)||G.current.has(R(e,r))?"wall":!!X.current.has(R(e,r))&&"self"),[]),Oe=(0,n.useCallback)((()=>{if(!B.current||J.current)return;Z.current.length&&(H.current=Z.current.shift()),q.current=H.current;const e=U.current[U.current.length-1],[r,t]=j(e.row,e.col,q.current),n=r===Y.current.row&&t===Y.current.col;if(Le(r,t))return a(!0),T(0),$.play(),ee.reset(),I(0),B.current=!1,J.current=!0,Z.current=[],Fe(),void Se();if(n&&fe(),F(se.current,e.row,e.col,ue.body),U.current.push({row:r,col:t}),X.current.add(R(r,t)),F(se.current,r,t,ue.head),n)Ae();else{const e=U.current.shift();X.current.delete(R(e.row,e.col)),L(se.current,e.row,e.col)}}),[Le,fe,ue.body,ue.head,Ae]),Ie=(0,n.useCallback)((()=>{if(ae.current&&se.current){ae.current.clearRect(0,0,k,C),le(ae.current);for(const e of _.current)de(e.row,e.col);se.current.clearRect(0,0,k,C),me(),he()}}),[le,de,me,he]);return(0,n.useLayoutEffect)((()=>{let e=0;const r=()=>{cancelAnimationFrame(e),e=requestAnimationFrame((()=>{D(window.innerWidth),ce.current&&oe.current&&(ae.current=ie(ce.current,k,C,{alpha:!0}),se.current=ie(oe.current,k,C,{alpha:!0}),Ie())}))};return window.addEventListener("resize",r),r(),()=>{cancelAnimationFrame(e),window.removeEventListener("resize",r)}}),[Ie]),(0,n.useEffect)((()=>{const e=e=>{(e=>{var r;if(null==e)return;const t=Z.current,n=t.length?t[t.length-1]:null!==(r=H.current)&&void 0!==r?r:q.current;e===E(n)||t.length&&t[t.length-1]===e||t.length>=3||t.push(e)})(we(e.key))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[we]),(0,n.useEffect)((()=>{const r=document.getElementById("app-base");r&&(r.style.filter=e?"none":"hue-rotate(".concat(N,"deg)"))}),[N,e]),(0,n.useEffect)((()=>{Ie()}),[e,Ie]),(0,n.useEffect)((()=>{const e=()=>document.hidden?Se():B.current&&Me();return document.addEventListener("visibilitychange",e,{passive:!0}),()=>document.removeEventListener("visibilitychange",e)}),[]),(0,n.useEffect)((()=>()=>{$.volume=0,Q.volume=0,ee.volume=0,ee.currentTime=0,Se()}),[$,Q,ee]),(0,n.useEffect)((()=>{je()}),[je]),re?(0,s.jsx)(l.default,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{}),(0,s.jsx)("div",{id:"app-base",className:"snek-colors ".concat(e?"colorblind-mode":""),children:(0,s.jsxs)("div",{className:"game-container",style:{cursor:O?"none":"inherit"},children:[(0,s.jsx)("h1",{className:"snek-title",style:{display:O||o?"none":"block"},children:"SNEK"}),!O&&(0,s.jsx)("button",{onMouseDown:()=>Q.play(),onClick:()=>{K.current||(Se(),je(),I(1),B.current=!0,J.current=!1,ee.play(),Me())},disabled:K.current,children:o?"try again":"start game"}),(0,s.jsxs)("div",{id:"board-wrap",className:"board",ref:ne,style:{display:O||o?"block":"none",position:"absolute",width:k,height:C},children:[(0,s.jsx)("canvas",{ref:ce,width:k,height:C,style:{position:"absolute",left:0,top:0,zIndex:1}}),(0,s.jsx)("canvas",{ref:oe,width:k,height:C,style:{position:"absolute",left:0,top:0,background:"transparent",zIndex:2,imageRendering:"pixelated"}}),o&&(0,s.jsxs)("div",{className:"game-over",style:{zIndex:3},children:[(0,s.jsx)("p",{className:"game-over-text",children:(0,s.jsx)("span",{children:"GAME OVER "})}),(0,s.jsx)("p",{className:"game-over-text second",children:(0,s.jsx)("span",{children:"GAME OVER "})})]})]}),(0,s.jsx)("p",{className:"score",style:{display:O||o?"block":"none"},children:r})]})})]})}},7375:(e,r,t)=>{t.d(r,{D:()=>n});class n extends Audio{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(e),this.isPlayingSrc=e=>{var r;return(null===(r=this.src)||void 0===r?void 0:r.includes(e))&&this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2},this.isPlaying=()=>this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2,this.timeLeft=()=>this.duration-this.currentTime,this.reset=()=>{this.pause(),this.currentTime=0},this.loop=r}}},890:(e,r,t)=>{t.d(r,{J:()=>n,k:()=>c});const n=e=>e[Math.floor(Math.random()*e.length)],c=e=>{let[...r]=e,t=r.length;for(;t;){const e=Math.floor(Math.random()*t--);[r[t],r[e]]=[r[e],r[t]]}return r}}}]);
//# sourceMappingURL=183.fe896f1d.chunk.js.map