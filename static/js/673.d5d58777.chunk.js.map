{"version":3,"file":"static/js/673.d5d58777.chunk.js","mappings":"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","sources":["assets/snek/eye.svg","assets/snek/eye-crossed.svg","components/ColorBlindToggle.js","snek/JoystickControls.js","snek/Snek.js","util/Audio.js"],"sourcesContent":["var _path, _circle;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgEye(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    id: \"Isolation_Mode\",\n    \"data-name\": \"Isolation Mode\",\n    viewBox: \"0 0 24 24\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.8,11.478c-.13-.349-3.3-8.538-11.8-8.538S.326,11.129.2,11.478L0,12l.2.522c.13.349,3.3,8.538,11.8,8.538s11.674-8.189,11.8-8.538L24,12ZM12,18.085c-5.418,0-8.041-4.514-8.79-6.085C3.961,10.425,6.585,5.915,12,5.915S20.038,10.424,20.79,12C20.038,13.576,17.415,18.085,12,18.085Z\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 4\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgEye);\nexport default __webpack_public_path__ + \"static/media/eye.dec3834250fe27c81ae7b742bbba007f.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgEyeCrossed(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 509.319 509.319\",\n    style: {\n      enableBackground: \"new 0 0 509.319 509.319\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M488.942,188.222L488.942,188.222c-16.507-24.031-36.159-45.743-58.432-64.555l60.096-60.075   c12.135-12.848,11.558-33.101-1.29-45.236c-12.346-11.661-31.65-11.647-43.979,0.031l-69.248,69.269   c-37.697-18.837-79.311-28.5-121.451-28.203C159.882,60.36,71.893,108.716,20.334,188.222c-27.112,39.874-27.112,92.264,0,132.139   c16.507,24.031,36.159,45.743,58.432,64.555L18.67,445.054c-12.501,12.501-12.501,32.769,0,45.269   c12.501,12.501,32.769,12.501,45.269,0l69.248-69.269c37.697,18.837,79.311,28.5,121.451,28.203   c94.756-0.905,182.745-49.262,234.304-128.768C516.112,280.586,516.112,228.125,488.942,188.222z M73.113,284.222   c-12.285-18.016-12.285-41.717,0-59.733C112.451,162.079,180.866,124,254.638,123.454c24.861-0.121,49.543,4.215,72.875,12.8   l-39.552,39.531c-43.381-18.416-93.478,1.823-111.893,45.204c-9.046,21.309-9.046,45.38,0,66.689l-51.989,52.011   C104.466,323.794,87.295,305.106,73.113,284.222z M436.163,284.222c-39.339,62.41-107.754,100.489-181.525,101.035   c-24.861,0.121-49.543-4.215-72.875-12.8l39.552-39.552c43.381,18.416,93.478-1.823,111.893-45.204   c9.046-21.309,9.046-45.38,0-66.689l51.989-51.989c19.612,15.895,36.783,34.583,50.965,55.467   C448.448,242.505,448.448,266.206,436.163,284.222L436.163,284.222z\"\n  }))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgEyeCrossed);\nexport default __webpack_public_path__ + \"static/media/eye-crossed.abb67d156b26b0605d33d1bb10209b99.svg\";\nexport { ForwardRef as ReactComponent };","import { useColorBlindMode } from '../context/ColorBlindModeContext';\nimport eyeIcon from '../assets/snek/eye.svg';\nimport eyeCrossedIcon from '../assets/snek/eye-crossed.svg';\n\nimport './ColorBlindToggle.css';\n\nconst ColorBlindToggle = () => {\n  const { isColorBlindMode, toggleColorBlindMode } = useColorBlindMode();\n\n  return (\n    <button\n      className={`colorblind-toggle ${isColorBlindMode ? 'colorblind-mode' : 'regular-mode'}`}\n      onClick={toggleColorBlindMode}\n      aria-label={isColorBlindMode ? 'Switch to color mode' : 'Switch to colorblind-friendly mode'}\n      title={isColorBlindMode ? 'Color mode' : 'Colorblind-friendly mode'}\n    >\n      <img\n        src={isColorBlindMode ? eyeCrossedIcon : eyeIcon}\n        alt={isColorBlindMode ? 'Eye crossed icon' : 'Eye icon'}\n        className=\"colorblind-toggle-icon\"\n      />\n    </button>\n  );\n};\n\nexport default ColorBlindToggle;\n","import { useState, useEffect } from 'react';\nimport Joystick, { Direction } from 'rc-joystick';\n\nexport const JoystickControls = ({setDirection}) => {\n  const [currentDirection, setCurrentDirection] = useState();\n\n  const onMove = (stick) => {\n    if (currentDirection === stick.direction) return;\n    if (stick.direction === Direction.Center) return;\n\n    setCurrentDirection(stick.direction);\n    setDirection(stick.direction);\n  };\n\n  useEffect(() => {\n    document.addEventListener('touchmove', (e) => { e.preventDefault(); }, { passive:false });\n  }, []);\n\n  return <Joystick className='joystick' onChange={onMove}/>;\n};\n","import { Direction } from \"rc-joystick\";\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport ColorBlindToggle from \"../components/ColorBlindToggle\";\nimport { useColorBlindMode } from \"../context/ColorBlindModeContext\";\nimport { PersonalAudio } from \"../util/Audio\";\nimport { JoystickControls } from \"./JoystickControls\";\n\nimport gameOverNoise from \"../assets/snek/game_over.mp3\";\nimport clickNoise from \"../assets/snek/groovy_click.mp3\";\nimport gameMusicNoise from \"../assets/snek/the_gathering.mp3\";\n\nimport \"../styles/snek.css\";\n\nconst COLs = 35;\nconst ROWs = 20;\nconst DEFAULT_SNEK_LENGTH = 6;\nconst TICK_SPEED_MS = 125;\nconst POINTS_PER_LEVEL = 5;\nconst CELL = 22; // px per cell\n\nconst UP = 0;\nconst RIGHT = 1;\nconst DOWN = 2;\nconst LEFT = 3;\n\nconst BOARD_W = COLs * CELL;\nconst BOARD_H = ROWs * CELL;\n\n// Helper functions (pure, no dependencies)\nconst idxOf = (r, c) => r * COLs + c;\nconst outOfBounds = (r, c) => r < 0 || c < 0 || r >= ROWs || c >= COLs;\nconst opposite = (d) => (d + 2) % 4;\nconst chebyshevDist = (r1, c1, r2, c2) =>\n  Math.max(Math.abs(r1 - r2), Math.abs(c1 - c2));\nconst atLeastNAway = (r1, c1, r2, c2, n = 1) =>\n  chebyshevDist(r1, c1, r2, c2) >= n + 1;\n\nconst move = (r, c, d) => {\n  const moves = [\n    [r - 1, c], // UP\n    [r, c + 1], // RIGHT\n    [r + 1, c], // DOWN\n    [r, c - 1], // LEFT\n  ];\n  return moves[d];\n};\n\nconst keyToArrow = {\n  w: \"ArrowUp\",\n  W: \"ArrowUp\",\n  [Direction.Top]: \"ArrowUp\",\n  s: \"ArrowDown\",\n  S: \"ArrowDown\",\n  [Direction.Bottom]: \"ArrowDown\",\n  a: \"ArrowLeft\",\n  A: \"ArrowLeft\",\n  [Direction.Left]: \"ArrowLeft\",\n  d: \"ArrowRight\",\n  D: \"ArrowRight\",\n  [Direction.Right]: \"ArrowRight\",\n};\n\nconst arrowToDir = {\n  ArrowUp: UP,\n  ArrowDown: DOWN,\n  ArrowLeft: LEFT,\n  ArrowRight: RIGHT,\n};\n\nconst drawCell = (ctx, r, c, fill, cellSize = CELL) => {\n  ctx.fillStyle = fill;\n  ctx.fillRect(c * cellSize, r * cellSize, cellSize, cellSize);\n};\n\nconst clearCell = (ctx, r, c, cellSize = CELL) =>\n  ctx.clearRect(c * cellSize, r * cellSize, cellSize, cellSize);\n\nexport default function Snek() {\n  const { isColorBlindMode } = useColorBlindMode();\n  const [points, setPoints] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [isPlaying, setPlaying] = useState(0);\n  const [dirKey, setDirKey] = useState(\"ArrowRight\");\n  const [windowWidth, setWindowWidth] = useState(0);\n  const [hueRotateDeg, setHueRotateDeg] = useState(0);\n\n  // Timing\n  const rafId = useRef(null);\n  const stepMs = useRef(TICK_SPEED_MS);\n  const loopRunning = useRef(false);\n\n  // Game state\n  const direction = useRef(RIGHT);\n  const nextDirection = useRef(RIGHT);\n  const snek = useRef([]); // [{row,col}]\n  const snekSet = useRef(new Set()); // indices\n  const foodCoords = useRef({ row: -1, col: -1 });\n  const playingRef = useRef(false);\n  const gameOverRef = useRef(false);\n\n  // Obstacles\n  const obstacles = useRef([]); // [{row,col}]\n  const obstacleSet = useRef(new Set()); // indices\n  const blockedMask = useRef(new Uint8Array(ROWs * COLs)); // adjacency counts\n\n  // Input queue\n  const inputQueue = useRef([]);\n  const MAX_QUEUE = 3;\n\n  const joystick = useRef();\n\n  const clickSFX = useMemo(() => new PersonalAudio(clickNoise), []);\n  const gameOverSFX = useMemo(() => new PersonalAudio(gameOverNoise), []);\n  const gameMusic = useMemo(() => new PersonalAudio(gameMusicNoise, true), []);\n\n  const isMobile = windowWidth <= 768;\n\n  const markAdjAround = useCallback((r, c, delta) => {\n    for (let rr = r - 1; rr <= r + 1; rr++) {\n      for (let cc = c - 1; cc <= c + 1; cc++) {\n        if (rr < 0 || cc < 0 || rr >= ROWs || cc >= COLs) continue;\n        const i = idxOf(rr, cc);\n        const next = blockedMask.current[i] + delta;\n        blockedMask.current[i] = next < 0 ? 0 : next;\n      }\n    }\n  }, []);\n\n  // ===== Canvas setup =====\n  const boardRef = useRef(null);\n  const bgRef = useRef(null); // transparent: grid + obstacles\n  const dynRef = useRef(null); // transparent: snake + food\n  const bgCtx = useRef(null);\n  const dynCtx = useRef(null);\n\n  const colors = useMemo(\n    () =>\n      isColorBlindMode\n        ? {\n            grid: \"rgba(255,255,255,0.3)\",\n            obstacle: \"rgba(255,255,255,0.3)\",\n            food: \"#3cff00\",\n            body: \"#ffffff\",\n            head: \"#ffffff\",\n            headKO: \"#ff4d4f\",\n          }\n        : {\n            grid: \"rgba(233,233,242,0.55)\",\n            obstacle: \"rgba(28, 28, 28, 0.9)\",\n            food: \"#3cff00\",\n            body: \"#ffffff\",\n            head: \"#ffffff\",\n            headKO: \"#ff4d4f\",\n          },\n    [isColorBlindMode]\n  );\n\n  const setCanvasSize = useCallback(\n    (canvas, wCSS, hCSS, { alpha } = { alpha: true }) => {\n      const dpr = Math.max(1, window.devicePixelRatio || 1);\n      const needResize =\n        canvas.width !== wCSS * dpr || canvas.height !== hCSS * dpr;\n      if (needResize) {\n        canvas.width = wCSS * dpr;\n        canvas.height = hCSS * dpr;\n        canvas.style.width = `${wCSS}px`;\n        canvas.style.height = `${hCSS}px`;\n      }\n      const ctx = canvas.getContext(\"2d\", { alpha });\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n      return ctx;\n    },\n    []\n  );\n\n  const drawGrid = useCallback(\n    (ctx) => {\n      // dotted grid\n      ctx.save();\n      ctx.strokeStyle = colors.grid;\n      ctx.setLineDash([2, 3]);\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      for (let r = 0; r <= ROWs; r++) {\n        const y = r * CELL + 0.5;\n        ctx.moveTo(0, y);\n        ctx.lineTo(BOARD_W, y);\n      }\n      for (let c = 0; c <= COLs; c++) {\n        const x = c * CELL + 0.5;\n        ctx.moveTo(x, 0);\n        ctx.lineTo(x, BOARD_H);\n      }\n      ctx.stroke();\n      ctx.restore();\n    },\n    [colors.grid]\n  );\n\n  const drawObstacle = useCallback(\n    (r, c) => {\n      if (bgCtx.current) drawCell(bgCtx.current, r, c, colors.obstacle);\n    },\n    [colors.obstacle]\n  );\n\n  const drawFood = useCallback(() => {\n    const f = foodCoords.current;\n    if (dynCtx.current && f.row >= 0)\n      drawCell(dynCtx.current, f.row, f.col, colors.food);\n  }, [colors.food]);\n\n  const eraseFood = useCallback(() => {\n    const f = foodCoords.current;\n    if (!dynCtx.current || f.row < 0) return;\n    // if head is here, don't clear (avoids flicker even if called late)\n    const head = snek.current[snek.current.length - 1];\n    if (head && head.row === f.row && head.col === f.col) return;\n    clearCell(dynCtx.current, f.row, f.col);\n  }, []);\n\n  const drawSnake = useCallback(() => {\n    if (!dynCtx.current || !snek.current.length) return;\n    const snake = snek.current;\n    for (let i = 0; i < snake.length - 1; i++) {\n      drawCell(dynCtx.current, snake[i].row, snake[i].col, colors.body);\n    }\n    const head = snake[snake.length - 1];\n    const headColor = gameOverRef.current ? colors.headKO : colors.head;\n    drawCell(dynCtx.current, head.row, head.col, headColor);\n  }, [colors.body, colors.head, colors.headKO]);\n\n  const drawSnakeInitial = drawSnake;\n\n  // ===== Input helpers =====\n\n  const getNextDirection = useCallback((key) => {\n    const arrow = keyToArrow[key] || key;\n    const want = arrowToDir[arrow];\n    if (want == null || want === opposite(direction.current)) return null;\n    return want;\n  }, []);\n\n  const enqueueDir = (next) => {\n    if (next == null) return;\n    const queue = inputQueue.current;\n    const lastEffective = queue.length\n      ? queue[queue.length - 1]\n      : nextDirection.current ?? direction.current;\n    if (\n      next === opposite(lastEffective) ||\n      (queue.length && queue[queue.length - 1] === next) ||\n      queue.length >= MAX_QUEUE\n    )\n      return;\n    queue.push(next);\n  };\n\n  // ===== Spawn rules =====\n  const isCellFreeOfSnake = useCallback(\n    (r, c) => !snekSet.current.has(idxOf(r, c)),\n    []\n  );\n  const isCellFreeOfObstacles = useCallback(\n    (r, c) => !obstacleSet.current.has(idxOf(r, c)),\n    []\n  );\n  const isCellFarFromAllObstacles = useCallback(\n    (r, c) => blockedMask.current[idxOf(r, c)] === 0,\n    []\n  );\n  const isCellFarFromFood = useCallback((r, c) => {\n    const f = foodCoords.current;\n    if (f.row < 0) return true;\n    return atLeastNAway(r, c, f.row, f.col, 1);\n  }, []);\n  const isCellFarFromSnekHead = useCallback((r, c) => {\n    if (!snek.current.length) return true;\n    const head = snek.current[snek.current.length - 1];\n    return atLeastNAway(r, c, head.row, head.col, 5);\n  }, []);\n\n  const validFoodCell = useCallback(\n    (r, c) =>\n      isCellFreeOfSnake(r, c) &&\n      isCellFarFromSnekHead(r, c) &&\n      isCellFreeOfObstacles(r, c) &&\n      isCellFarFromAllObstacles(r, c),\n    [\n      isCellFreeOfSnake,\n      isCellFarFromSnekHead,\n      isCellFreeOfObstacles,\n      isCellFarFromAllObstacles,\n    ]\n  );\n\n  const validObstacleCell = useCallback(\n    (r, c) =>\n      isCellFreeOfSnake(r, c) &&\n      isCellFreeOfObstacles(r, c) &&\n      isCellFarFromAllObstacles(r, c) &&\n      isCellFarFromFood(r, c),\n    [\n      isCellFreeOfSnake,\n      isCellFreeOfObstacles,\n      isCellFarFromAllObstacles,\n      isCellFarFromFood,\n    ]\n  );\n\n  const spawnObstacle = useCallback(() => {\n    let r,\n      c,\n      tries = 0;\n    do {\n      r = (Math.random() * ROWs) | 0;\n      c = (Math.random() * COLs) | 0;\n      if (++tries > 300) return;\n    } while (!validObstacleCell(r, c));\n\n    obstacles.current.push({ row: r, col: c });\n    obstacleSet.current.add(idxOf(r, c));\n    drawObstacle(r, c);\n    markAdjAround(r, c, +1);\n  }, [validObstacleCell, drawObstacle, markAdjAround]);\n\n  const populateFoodBall = useCallback(() => {\n    let r,\n      c,\n      tries = 0;\n    do {\n      r = (Math.random() * ROWs) | 0;\n      c = (Math.random() * COLs) | 0;\n      if (++tries > 200) break;\n    } while (!validFoodCell(r, c));\n    eraseFood();\n    foodCoords.current = { row: r, col: c };\n    drawFood();\n  }, [validFoodCell, eraseFood, drawFood]);\n\n  const eatFood = useCallback(() => {\n    setPoints((p) => {\n      const next = p + 1;\n      if (!isColorBlindMode && next % POINTS_PER_LEVEL === 0)\n        setHueRotateDeg((d) => d + 43.5); // keep the original bump\n      if (next >= POINTS_PER_LEVEL && next % POINTS_PER_LEVEL === 0) {\n        spawnObstacle();\n        spawnObstacle();\n      }\n      return next;\n    });\n    populateFoodBall();\n  }, [isColorBlindMode, spawnObstacle, populateFoodBall]);\n\n  // ===== Init / Reset =====\n  const initGame = useCallback(() => {\n    // Reset game state\n    snek.current = [];\n    snekSet.current = new Set();\n    obstacles.current = [];\n    obstacleSet.current = new Set();\n    blockedMask.current = new Uint8Array(ROWs * COLs);\n\n    // Canvases (bg = grid + obstacles, dyn = snake + food, both transparent)\n    if (bgRef.current && dynRef.current) {\n      bgCtx.current = setCanvasSize(bgRef.current, BOARD_W, BOARD_H, {\n        alpha: true,\n      });\n      dynCtx.current = setCanvasSize(dynRef.current, BOARD_W, BOARD_H, {\n        alpha: true,\n      });\n      bgCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n      drawGrid(bgCtx.current);\n      dynCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n    }\n\n    // Seed snake left-to-right on top row\n    for (let i = 0; i < DEFAULT_SNEK_LENGTH; i++) {\n      snek.current.push({ row: 0, col: i });\n      snekSet.current.add(idxOf(0, i));\n    }\n\n    // Audio\n    gameOverSFX.volume = 1;\n    clickSFX.volume = 1;\n    gameMusic.volume = 1;\n\n    setGameOver(false);\n    setPoints(0);\n    direction.current = RIGHT;\n    nextDirection.current = RIGHT;\n    inputQueue.current = [];\n    playingRef.current = false;\n    gameOverRef.current = false;\n\n    drawSnakeInitial();\n    populateFoodBall();\n  }, [\n    clickSFX,\n    gameMusic,\n    gameOverSFX,\n    populateFoodBall,\n    drawGrid,\n    drawSnakeInitial,\n  ]);\n\n  // ===== Loop control =====\n  const startLoop = () => {\n    if (loopRunning.current) return;\n    loopRunning.current = true;\n\n    let last = performance.now();\n    let acc = 0;\n\n    const loop = (now) => {\n      if (!loopRunning.current) return;\n      acc += now - last;\n      last = now;\n\n      const step = stepMs.current;\n      while (acc >= step) {\n        tickSnek();\n        acc -= step;\n      }\n      rafId.current = requestAnimationFrame(loop);\n    };\n\n    rafId.current = requestAnimationFrame(loop);\n  };\n\n  const stopLoop = () => {\n    if (rafId.current) cancelAnimationFrame(rafId.current);\n    rafId.current = null;\n    loopRunning.current = false;\n  };\n\n  const startGame = () => {\n    stopLoop();\n    initGame();\n    joystick.current = JoystickControls;\n    setPlaying(1);\n    playingRef.current = true;\n    gameOverRef.current = false;\n    gameMusic.play();\n    startLoop();\n  };\n\n  const paintHeadKO = useCallback(() => {\n    if (!dynCtx.current || !snek.current.length) return;\n    const head = snek.current[snek.current.length - 1];\n    drawCell(dynCtx.current, head.row, head.col, colors.headKO);\n  }, [colors.headKO]);\n\n  const stopGame = () => {\n    setGameOver(true);\n    setHueRotateDeg(0);\n    gameOverSFX.play();\n    gameMusic.reset();\n    setPlaying(0);\n    playingRef.current = false;\n    gameOverRef.current = true;\n    inputQueue.current = [];\n    paintHeadKO();\n    stopLoop();\n  };\n\n  // ===== Collision & Tick =====\n  const collisionDetected = useCallback((r, c) => {\n    if (outOfBounds(r, c)) return \"wall\";\n    if (obstacleSet.current.has(idxOf(r, c))) return \"wall\";\n    if (snekSet.current.has(idxOf(r, c))) return \"self\";\n    return false;\n  }, []);\n\n  const tickSnek = useCallback(() => {\n    if (!playingRef.current || gameOverRef.current) return;\n\n    if (inputQueue.current.length) {\n      nextDirection.current = inputQueue.current.shift();\n    }\n    direction.current = nextDirection.current;\n\n    const head = snek.current[snek.current.length - 1];\n    const [nr, nc] = move(head.row, head.col, direction.current);\n\n    const ate = nr === foodCoords.current.row && nc === foodCoords.current.col;\n\n    // detect collision before drawing\n    const colType = collisionDetected(nr, nc);\n    if (colType) {\n      stopGame();\n      return;\n    }\n\n    // if we're going to eat, clear the food pixel BEFORE drawing the new head\n    if (ate) eraseFood();\n\n    // repaint old head as body\n    drawCell(dynCtx.current, head.row, head.col, colors.body);\n\n    // push/draw new head\n    snek.current.push({ row: nr, col: nc });\n    snekSet.current.add(idxOf(nr, nc));\n    drawCell(dynCtx.current, nr, nc, colors.head);\n\n    if (ate) {\n      eatFood();\n    } else {\n      // pop tail\n      const tail = snek.current.shift();\n      snekSet.current.delete(idxOf(tail.row, tail.col));\n      clearCell(dynCtx.current, tail.row, tail.col); // transparent hole shows bg grid\n    }\n  }, [collisionDetected, eraseFood, colors.body, colors.head, eatFood]);\n\n  const redrawBoard = useCallback(() => {\n    if (!bgCtx.current || !dynCtx.current) return;\n    bgCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n    drawGrid(bgCtx.current);\n    for (const o of obstacles.current) {\n      drawObstacle(o.row, o.col);\n    }\n    dynCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n    drawSnake();\n    drawFood();\n  }, [drawGrid, drawObstacle, drawSnake, drawFood]);\n\n  // ===== Effects =====\n  // throttle resize + keep canvases crisp\n  useLayoutEffect(() => {\n    let raf = 0;\n    const updateSize = () => {\n      cancelAnimationFrame(raf);\n      raf = requestAnimationFrame(() => {\n        setWindowWidth(window.innerWidth);\n        if (bgRef.current && dynRef.current) {\n          bgCtx.current = setCanvasSize(bgRef.current, BOARD_W, BOARD_H, {\n            alpha: true,\n          });\n          dynCtx.current = setCanvasSize(dynRef.current, BOARD_W, BOARD_H, {\n            alpha: true,\n          });\n          redrawBoard();\n        }\n      });\n    };\n    window.addEventListener(\"resize\", updateSize);\n    updateSize();\n    return () => {\n      cancelAnimationFrame(raf);\n      window.removeEventListener(\"resize\", updateSize);\n    };\n    // eslint-disable-next-line\n  }, [redrawBoard]);\n\n  // keyboard input\n  useEffect(() => {\n    const onKeydown = (e) => {\n      const d = getNextDirection(e.key);\n      enqueueDir(d);\n    };\n    window.addEventListener(\"keydown\", onKeydown);\n    return () => window.removeEventListener(\"keydown\", onKeydown);\n    // eslint-disable-next-line\n  }, [getNextDirection]);\n\n  // mobile joystick input\n  useEffect(() => {\n    if (!isMobile) return;\n    const d = getNextDirection(dirKey);\n    enqueueDir(d);\n    // eslint-disable-next-line\n  }, [dirKey, getNextDirection, isMobile]);\n\n  useEffect(() => {\n    const app = document.getElementById(\"app-base\");\n    if (app) {\n      app.style.filter = isColorBlindMode\n        ? \"none\"\n        : `hue-rotate(${hueRotateDeg}deg)`;\n    }\n  }, [hueRotateDeg, isColorBlindMode]);\n\n  useEffect(() => {\n    redrawBoard();\n    // eslint-disable-next-line\n  }, [isColorBlindMode, redrawBoard]);\n\n  // pause when hidden\n  useEffect(() => {\n    const onVis = () =>\n      document.hidden ? stopLoop() : playingRef.current && startLoop();\n    document.addEventListener(\"visibilitychange\", onVis, { passive: true });\n    return () => document.removeEventListener(\"visibilitychange\", onVis);\n    // eslint-disable-next-line\n  }, []);\n\n  // cleanup on unmount\n  useEffect(() => {\n    return () => {\n      gameOverSFX.volume = 0;\n      clickSFX.volume = 0;\n      gameMusic.volume = 0;\n      gameMusic.currentTime = 0;\n      stopLoop();\n    };\n  }, [gameOverSFX, clickSFX, gameMusic]);\n\n  // seed game (donâ€™t start loop)\n  useEffect(() => {\n    initGame();\n  }, [initGame]);\n\n  return (\n    <>\n      <ColorBlindToggle />\n      <div id=\"app-base\" className={`snek-colors ${isColorBlindMode ? 'colorblind-mode' : ''}`}>\n        <div\n          className=\"game-container\"\n          style={{ cursor: isPlaying ? \"none\" : \"inherit\" }}\n        >\n          <h1\n            className=\"snek-title\"\n            style={{ display: isPlaying || gameOver ? \"none\" : \"block\" }}\n          >\n            SNEK\n          </h1>\n\n          {!isPlaying && (\n            <button\n              onMouseDown={() => clickSFX.play()}\n              onClick={() => {\n                if (!loopRunning.current) startGame();\n              }}\n              disabled={loopRunning.current}\n            >\n              {gameOver ? \"try again\" : \"start game\"}\n            </button>\n          )}\n\n          <div\n            id=\"board-wrap\"\n            className=\"board\"\n            ref={boardRef}\n            style={{\n              display: isPlaying || gameOver ? \"block\" : \"none\",\n              position: \"absolute\",\n              width: BOARD_W,\n              height: BOARD_H,\n            }}\n          >\n            {/* Transparent bg canvas: dotted grid + obstacles */}\n            <canvas\n              ref={bgRef}\n              width={BOARD_W}\n              height={BOARD_H}\n              style={{ position: \"absolute\", left: 0, top: 0, zIndex: 1 }}\n            />\n            {/* Transparent dynamic canvas: snake + food */}\n            <canvas\n              ref={dynRef}\n              width={BOARD_W}\n              height={BOARD_H}\n              style={{\n                position: \"absolute\",\n                left: 0,\n                top: 0,\n                background: \"transparent\",\n                zIndex: 2,\n                imageRendering: \"pixelated\",\n              }}\n            />\n\n            {gameOver && (\n              <div className=\"game-over\" style={{ zIndex: 3 }}>\n                <p className=\"game-over-text\">\n                  <span>GAME OVER </span>\n                </p>\n                <p className=\"game-over-text second\">\n                  <span>GAME OVER </span>\n                </p>\n              </div>\n            )}\n          </div>\n\n          <p\n            className=\"score\"\n            style={{ display: isPlaying || gameOver ? \"block\" : \"none\" }}\n          >\n            {points}\n          </p>\n\n          {isMobile && isPlaying && joystick.current && (\n            <joystick.current setDirection={setDirKey} />\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["ColorBlindToggle","isColorBlindMode","toggleColorBlindMode","useColorBlindMode","_jsx","className","concat","onClick","title","children","src","eyeCrossedIcon","eyeIcon","alt","JoystickControls","_ref","setDirection","currentDirection","setCurrentDirection","useState","useEffect","document","addEventListener","e","preventDefault","passive","Joystick","onChange","stick","direction","Direction","Center","COLs","ROWs","DEFAULT_SNEK_LENGTH","TICK_SPEED_MS","POINTS_PER_LEVEL","CELL","RIGHT","BOARD_W","BOARD_H","idxOf","r","c","outOfBounds","opposite","d","atLeastNAway","r1","c1","r2","c2","n","arguments","length","undefined","chebyshevDist","Math","max","abs","move","keyToArrow","w","W","Top","s","S","Bottom","a","A","Left","D","Right","arrowToDir","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","drawCell","ctx","fill","cellSize","fillStyle","fillRect","clearCell","clearRect","Snek","points","setPoints","gameOver","setGameOver","isPlaying","setPlaying","dirKey","setDirKey","windowWidth","setWindowWidth","hueRotateDeg","setHueRotateDeg","rafId","useRef","stepMs","loopRunning","nextDirection","snek","snekSet","Set","foodCoords","row","col","playingRef","gameOverRef","obstacles","obstacleSet","blockedMask","Uint8Array","inputQueue","joystick","clickSFX","useMemo","PersonalAudio","clickNoise","gameOverSFX","gameOverNoise","gameMusic","gameMusicNoise","isMobile","markAdjAround","useCallback","delta","rr","cc","i","next","current","boardRef","bgRef","dynRef","bgCtx","dynCtx","colors","grid","obstacle","food","body","head","headKO","setCanvasSize","canvas","wCSS","hCSS","alpha","dpr","window","devicePixelRatio","width","height","style","getContext","setTransform","drawGrid","save","strokeStyle","setLineDash","lineWidth","beginPath","y","moveTo","lineTo","x","stroke","restore","drawObstacle","drawFood","f","eraseFood","drawSnake","snake","headColor","drawSnakeInitial","getNextDirection","key","arrow","want","enqueueDir","_nextDirection$curren","queue","lastEffective","push","isCellFreeOfSnake","has","isCellFreeOfObstacles","isCellFarFromAllObstacles","isCellFarFromFood","isCellFarFromSnekHead","validFoodCell","validObstacleCell","spawnObstacle","tries","random","add","populateFoodBall","eatFood","p","initGame","volume","startLoop","last","performance","now","acc","loop","step","tickSnek","requestAnimationFrame","stopLoop","cancelAnimationFrame","paintHeadKO","collisionDetected","shift","nr","nc","ate","play","reset","tail","delete","redrawBoard","o","useLayoutEffect","raf","updateSize","innerWidth","removeEventListener","onKeydown","app","getElementById","filter","onVis","hidden","currentTime","_jsxs","_Fragment","id","cursor","display","onMouseDown","disabled","ref","position","left","top","zIndex","background","imageRendering","Audio","constructor","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","readyState","timeLeft","duration","pause"],"sourceRoot":""}