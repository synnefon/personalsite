{"version":3,"file":"static/js/663.fe33eecc.chunk.js","mappings":"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","sources":["shufflenator/shuffleWorker.js"],"sourcesContent":["// Self-contained web worker for shuffle computation.\n// All logic is inlined to avoid import issues in worker context.\n\n// --- Scorers ---\n\nfunction calcAdjacentTermDifferences(cards) {\n    const deckLen = cards.length;\n    const diffs = [];\n    for (let idx = 0; idx < deckLen; idx++) {\n        let diff = cards[(idx + 1) % deckLen] - cards[idx];\n        if (diff < 0) diff += deckLen;\n        diffs.push(diff);\n    }\n    return diffs;\n}\n\nfunction calcAverageNeighborDist(cards) {\n    return calcAdjacentTermDifferences(cards).reduce((a, b) => a + b, 0) / cards.length;\n}\n\nfunction calcLocationDelta(cards) {\n    let total = 0;\n    for (let idx = 0; idx < cards.length; idx++) {\n        total += Math.abs(idx - cards[idx]);\n    }\n    return total / cards.length;\n}\n\nfunction calcShannonEntropy(cards) {\n    const diffs = calcAdjacentTermDifferences(cards);\n    const counts = {};\n    for (const d of diffs) counts[d] = (counts[d] || 0) + 1;\n    const pCounts = Object.values(counts).map(c => c / cards.length);\n    return pCounts.map(p => Math.abs(Math.log(p) * p)).filter(p => p > 0).reduce((a, b) => a + b, 0);\n}\n\nconst SCORE_FUNCTION_MAP = {\n    \"SHANNON_ENTROPY\": calcShannonEntropy,\n    \"NEIGHBOR_DIST\": calcAverageNeighborDist,\n    \"LOCATION_DELTA\": calcLocationDelta,\n};\n\n// --- Shuffler ---\n\nfunction makeShuffledDeck(cardList, permutation, scoreType) {\n    return {\n        cardList,\n        permutation,\n        score: SCORE_FUNCTION_MAP[scoreType](cardList),\n    };\n}\n\nfunction shuffle(pileSelector, deck, numPiles, scoreType) {\n    const piles = Array.from({ length: numPiles }, () => []);\n    for (let idx = 0; idx < deck.cardList.length; idx++) {\n        piles[pileSelector(idx)].unshift(deck.cardList[idx]);\n    }\n    return makeShuffledDeck(piles.flat(), [...deck.permutation, numPiles], scoreType);\n}\n\nfunction pileShuffle(deck, numPiles, scoreType) {\n    return shuffle((idx) => idx % numPiles, deck, numPiles, scoreType);\n}\n\nfunction randomPileShuffle(deck, numPiles, scoreType) {\n    return shuffle(() => Math.floor(Math.random() * numPiles), deck, numPiles, scoreType);\n}\n\nconst SHUFFLE_FUNCTION_MAP = {\n    \"PILE\": pileShuffle,\n    \"RANDOM_PILE\": randomPileShuffle,\n};\n\n// --- Simulator ---\n\nfunction runPerm(shuffledDecks, pileDivisions, shuffleFunction, scoreType) {\n    const newDecks = [];\n    for (const deck of shuffledDecks) {\n        for (const numPiles of pileDivisions) {\n            newDecks.push(shuffleFunction(deck, numPiles, scoreType));\n        }\n    }\n    return newDecks;\n}\n\nfunction shuffleDecks({ shuffleStrat, scoreType, maxShuffles, deckSize, minNumPiles, maxNumPiles }) {\n    const pileDivisions = Array.from({ length: maxNumPiles - minNumPiles + 1 }, (_, i) => i + minNumPiles);\n    const baseCardList = Array.from({ length: deckSize }, (_, i) => i);\n    const shuffleFunction = SHUFFLE_FUNCTION_MAP[shuffleStrat];\n\n    let shuffledDecks = [makeShuffledDeck(baseCardList, [], scoreType)];\n    let best = null;\n\n    for (let i = 0; i < maxShuffles; i++) {\n        const newDecks = runPerm(shuffledDecks, pileDivisions, shuffleFunction, scoreType);\n        shuffledDecks = [...new Set([...shuffledDecks, ...newDecks])];\n        shuffledDecks.sort((a, b) => b.score - a.score);\n        best = shuffledDecks[0];\n    }\n\n    return best;\n}\n\n// --- Worker message handler ---\n// eslint-disable-next-line no-restricted-globals\nconst workerScope = self;\n\nworkerScope.onmessage = (e) => {\n    const result = shuffleDecks(e.data);\n    workerScope.postMessage(result);\n};\n"],"names":["calcAdjacentTermDifferences","cards","deckLen","length","diffs","idx","diff","push","SCORE_FUNCTION_MAP","counts","d","Object","values","map","c","p","Math","abs","log","filter","reduce","a","b","total","makeShuffledDeck","cardList","permutation","scoreType","score","shuffle","pileSelector","deck","numPiles","piles","Array","from","unshift","flat","SHUFFLE_FUNCTION_MAP","floor","random","runPerm","shuffledDecks","pileDivisions","shuffleFunction","newDecks","workerScope","self","onmessage","e","result","_ref","shuffleStrat","maxShuffles","deckSize","minNumPiles","maxNumPiles","_","i","baseCardList","best","Set","sort","shuffleDecks","data","postMessage"],"sourceRoot":""}