"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[371],{5371:(e,r,t)=>{t.r(r),t.d(r,{default:()=>d});var n=t(5043),o=t(890),l=t(579);const s=4,c={0:"grey",2:"#D6B300",4:"#AC8F10",8:"#826B20",16:"#58482F",32:"#2E243F",64:"#04004F",128:"#020024",256:"#000000",512:"#062B1A",1024:"#062B1A",2048:"#0D5635",4096:"#13804F"},a="ArrowLeft",f="ArrowRight",u="ArrowUp",h="ArrowDown",i=()=>{const e=Array.from({length:s},((e,r)=>r));let r=(0,o.J)(e),t=(0,o.J)(e),n={x:(0,o.J)(e),y:(0,o.J)(e)};for(;r===n.x&&t===n.y;)n={x:(0,o.J)(e),y:(0,o.J)(e)};const l=Array.from({length:s},(()=>new Array(s).fill(0)));return l[t][r]=2,l[n.y][n.x]=2,l},y=e=>{let{value:r}=e;const t={backgroundColor:c[r]||"black"};return(0,l.jsx)("div",{className:"cell-4096",style:t,children:0===r?"":r})};function d(){const e=(0,n.useRef)(i()),r=(0,n.useRef)(!1),[t,c]=(0,n.useState)(0),d=()=>{const r=[];for(let n=0;n<s;n++)for(let t=0;t<s;t++)0===e.current[n][t]&&r.push({x:t,y:n});if(0===r.length)return;const t=(0,o.k)(r)[0];e.current[t.y][t.x]=2},p=e=>{e.reverse();let r=0;for(let t=0;t<e.length-1;t++)e[t+r]&&e[t]===e[t+1]?(r+=1,e[t]+=e[t]):r>0&&(e[t]=e[t+r]||0);return r&&(e.pop(),e=[...Array.from({length:r},(()=>0)),...e]),e};return(0,n.useEffect)((()=>{const t=t=>{if(!r.current){switch(r.current=!0,t.key){case a:case f:(r=>{let t=r===f?-1:1,n=r===f?s-1:0,o=r===f?-1:s;const l=Array.from({length:s},(()=>new Array(s).fill(0)));for(let c=0;c<s;c++){let r=[];for(let l=n;l!==o;l+=t){const t=e.current[c][l];0!==t&&r.push(t)}r=p(r);for(let e=n;e!==o;e+=t)l[c][e]=r.pop()||0}e.current=l,d(),c((e=>e+1))})(t.key);break;case u:case h:(r=>{let t=r===h?-1:1,n=r===h?s-1:0,o=r===h?-1:s;const l=Array.from({length:s},(()=>new Array(s).fill(0)));for(let c=0;c<s;c++){let r=[];for(let l=n;l!==o;l+=t){const t=e.current[l][c];0!==t&&r.push(t)}r=p(r);for(let e=n;e!==o;e+=t)l[e][c]=r.pop()||0}e.current=l,d(),c((e=>e+1))})(t.key)}r.current=!1}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})),(0,l.jsxs)("div",{id:"game-4096",children:[t,(0,l.jsx)("div",{className:"board-4096",children:e.current.flatMap(((e,r)=>e.map(((e,t)=>(0,l.jsx)(y,{value:e},"".concat(r,"-").concat(t))))))})]})}},890:(e,r,t)=>{t.d(r,{J:()=>n,k:()=>o});const n=e=>e[Math.floor(Math.random()*e.length)],o=e=>{let[...r]=e,t=r.length;for(;t;){const e=Math.floor(Math.random()*t--);[r[t],r[e]]=[r[e],r[t]]}return r}}}]);
//# sourceMappingURL=371.a817ba24.chunk.js.map