{"version":3,"file":"static/js/685.dfb54b0d.chunk.js","mappings":"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","sources":["Database.js","match_game/MatchGame.js"],"sourcesContent":["import { getAuth, signInWithPopup, GoogleAuthProvider } from \"firebase/auth\";\nimport { getDatabase, ref, set, get, child } from \"firebase/database\";\nimport { initializeApp } from 'firebase/app';\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDRjIzCoEJpa7CW_BBFrvaGjYexHxg_w6s\",\n  authDomain: \"personalsite-sudoku.firebaseapp.com\",\n  databaseURL: \"https://personalsite-sudoku-default-rtdb.firebaseio.com\",\n  projectId: \"personalsite-sudoku\",\n  storageBucket: \"personalsite-sudoku.firebasestorage.app\",\n  messagingSenderId: \"751374588681\",\n  appId: \"1:751374588681:web:523786a9b65adaad79d1d8\",\n  measurementId: \"G-ZE7W1PL9ED\"\n};\nconst app = initializeApp(firebaseConfig);\n\nconst awaitTimeout = (delay, reason) =>\n  new Promise((resolve, reject) =>\n    setTimeout(\n      () => (reason === undefined ? resolve() : reject(reason)),\n      delay\n    )\n  );\n\nconst wrapPromise = (promise, delay, reason) => Promise.race([promise, awaitTimeout(delay, reason)]);\nconst interactWithDb = promise => {\n  return wrapPromise(promise, 3_000, \"FirebaseError: database timeout\")\n};\n\nconst getUserId = () => getAuth()?.currentUser?.uid;\n\nexport const signInUser = async () => {\n  const auth = getAuth();\n  const user = auth.currentUser;\n\n  if (user && user !== undefined && user?.uid) return user.uid;\n\n  const provider = new GoogleAuthProvider();\n  return interactWithDb(signInWithPopup(auth, provider));\n}\n\nexport const writeBoard = async (boardStr) => {\n  const uid = getUserId();\n  if (!uid) return \"Error: failed to authenticate user\";\n  const dbRef = ref(getDatabase(app), `boards/${uid}`);\n  return interactWithDb(set(dbRef, String(boardStr)));\n}\n\nexport const getBoard = async () => {\n  const uid = getUserId();\n  if (!uid) return \"Error: failed to authenticate user\";\n  const dbRef = ref(getDatabase(app));\n  return interactWithDb(get(child(dbRef, `boards/${uid}`)));\n}\n\nexport const getFish = async (bugIndex) => {\n  const dbRef = ref(getDatabase(app));\n  return get(child(dbRef, `fish/${bugIndex}`));\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { getFish } from '../Database';\n\nimport '../styles/matchgame.css'\n\nimport victoryDance from '../assets/match_game/victory.gif';\n\n\nfunction shuffle(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n  return array;\n}\n\nconst NUM_FISH = 108;\n\nexport default function MatchGame() {\n  const [flipped1, setFlipped1] = useState(-1);\n  const [flipped2, setFlipped2] = useState(-1);\n  const [completeds, setCompleteds] = useState(Array.from({ length: 12 }).map(() => false));\n  const [misses, setMisses] = useState(0);\n  const [gameWon, setGameWon] = useState(false);\n  const [images, setImages] = useState(Array.from({ length: 12 }).map(() => \"\"));\n  const [imagesFound, setImagesFound] = useState(0);\n  const foundFish = useRef([]);\n\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchImages = async () => {\n      const possibleVals = shuffle(Array.from({ length: NUM_FISH }).map((_, i) => i));\n      for (let i in possibleVals.slice(0, 13)) {\n        await getFish(possibleVals[i]).then(img => {\n          setImages(imgs => {\n            imgs[i] = img.val();\n            return imgs;\n          });\n          setImagesFound(f => f+1);\n        });\n      }\n    }\n    fetchImages().then(() => setLoading(false));\n  }, []);\n\n  const checkCompleted = (idx, f1, f2) => {\n    if (f1 % 12 === f2 % 12) {\n      const newCompleteds = completeds.map((e, i) => i + 1 === idx ? true : e);\n      foundFish.current.push(idx);\n      setCompleteds(newCompleteds);\n      if (newCompleteds.every(c => c)) setGameWon(true);\n    } else {\n      setMisses(t => t + 1);\n    }\n    setFlipped1(-1);\n    setFlipped2(-1);\n  }\n\n  const WinScreen = () => {\n    return <div className='win-screen'>\n      <img alt=\"victory fish dance\" src={victoryDance}/>\n      <p className='win-details'>misses: {misses}</p>\n      <div className=\"play-again\" onClick={() => window.location.reload()}>play again?</div>\n      <div className='fish-image-row'>\n        {foundFish.current.map(i => {\n          const img = images[i];\n          return <img\n            className=\"fish-image short\"\n            alt={`fish ${i}`}\n            src={`data:image/png;base64,${img}`}\n          />;\n        })}\n      </div>\n    </div>\n  }\n\n  const FishImage = ({ id }) => {\n    const idx = (id % 12) + 1;\n\n    const flipUp = () => {\n      if (flipped1 === id || flipped2 === id || flipped2 >= 0) return;\n      if (flipped1 >= 0) {\n        setFlipped2(id);\n        setTimeout(() => checkCompleted(idx, flipped1, id), 1_200);\n      } else {\n        setFlipped1(id);\n      }\n    };\n\n    const img = images[idx];\n\n    return completeds[idx - 1]\n      ? <div className=\"fish-image completed\" />\n    //   : <img\n    //   className=\"fish-image\"\n    //   alt={`fish ${idx}`}\n    //   src={`data:image/png;base64,${img}`}\n    // />\n      : flipped1 === id || flipped2 === id\n        ? <img\n          className=\"fish-image\"\n          alt={`fish ${idx}`}\n          src={`data:image/png;base64,${img}`}\n        />\n        : <div onClick={flipUp} className=\"fish-image back\">\n            <div className='card-back-text'>?</div>\n          </div>;\n  }\n\n  const LoadingBar = () => {\n    const bars = Array.from({ length: imagesFound }).map(() => \"█\").join(\"\");\n    const antiBars = Array.from({ length: 24-imagesFound }).map(() => \"░\").join(\"\");\n    return (\n      <div className='loading-bar'>\n        {`loading critters: ${bars}${antiBars}`}\n      </div>\n    );\n  }\n\n  const shuffledIndexes = useRef(shuffle(Array.from({ length: 24 }).map((_, i) => i)));\n  const fishImages = shuffledIndexes.current.map(i => <FishImage key={`fish_${i + 1}`} id={i} />);\n\n  return (\n    <div id='fish-match'>\n      {loading \n        ? <LoadingBar/> \n        : gameWon\n            ? <WinScreen />\n            : <div className='match-game'>\n                <h1 className='match-title'>SEA MATCH</h1>\n                <h4 className='miss-count'>misses: {misses}</h4>\n                <div className='match-board'>\n                  {fishImages}\n                </div>\n              </div>\n      }\n    </div>\n  );\n}"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","awaitTimeout","delay","reason","Promise","resolve","reject","setTimeout","undefined","interactWithDb","promise","wrapPromise","race","getUserId","_getAuth","_getAuth$currentUser","getAuth","currentUser","uid","signInUser","async","auth","user","provider","GoogleAuthProvider","signInWithPopup","writeBoard","dbRef","ref","getDatabase","concat","set","String","boardStr","getBoard","get","child","getFish","bugIndex","shuffle","array","i","length","j","Math","floor","random","NUM_FISH","MatchGame","flipped1","setFlipped1","useState","flipped2","setFlipped2","completeds","setCompleteds","Array","from","map","misses","setMisses","gameWon","setGameWon","images","setImages","imagesFound","setImagesFound","foundFish","useRef","loading","setLoading","useEffect","possibleVals","_","slice","then","img","imgs","val","f","fetchImages","WinScreen","_jsxs","className","children","_jsx","alt","src","victoryDance","onClick","window","location","reload","current","FishImage","_ref","id","idx","flipUp","checkCompleted","f1","f2","newCompleteds","e","push","every","c","t","LoadingBar","bars","join","antiBars","fishImages"],"sourceRoot":""}