"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[183,477],{8477:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(5043);Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function o(e){const{width:t}=function(){const e=()=>({width:window.innerWidth,height:window.innerHeight}),[t,r]=n.useState(e);return n.useLayoutEffect((()=>{const t=()=>r(e);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t}(),r=(0,n.useRef)({animationFrameId:0,containerHeight:0,containerWidth:0,impactCount:0,isPosXIncrement:!0,isPosYIncrement:!0,positionX:Math.random()*t,positionY:Math.random()*t}),o=(0,n.useRef)(null),c=(0,n.useRef)(null),[s,a]=(0,n.useState)(0),[i,l]=(0,n.useState)(!1);function u(e,t,n,o,c){const s=e-n;let i=o+(r.current[c]?t:-t);return(i<=0||i>=s)&&(r.current[c]=!r.current[c],r.current.impactCount+=1,a(r.current.impactCount),i=i<=0?0:s),i}function d(){if(o.current&&o.current.parentElement){const t=o.current.parentElement.clientHeight,n=o.current.parentElement.clientWidth,c=o.current.clientHeight,s=o.current.clientWidth,a=(null==e?void 0:e.speed)||2,i=u(n,a,s,r.current.positionX,"isPosXIncrement"),l=u(t,a,c,r.current.positionY,"isPosYIncrement");o.current.style.transform="translate3d(".concat(i,"px, ").concat(l,"px, 0)"),r.current.positionX=i,r.current.positionY=l}r.current.animationFrameId=requestAnimationFrame(d)}return(0,n.useEffect)((()=>{(null==e?void 0:e.freezeOnHover)&&(i&&(cancelAnimationFrame(r.current.animationFrameId),r.current.animationFrameId=0),i||r.current.animationFrameId||(r.current.animationFrameId=requestAnimationFrame(d))),(null==e?void 0:e.hoverCallback)&&e.hoverCallback()}),[i,e]),(0,n.useLayoutEffect)((()=>{const e=o.current,t=()=>l(!0),n=()=>l(!1);return e&&(e.style.willChange="transform",e.addEventListener("mouseover",t),e.addEventListener("mouseout",n),r.current.animationFrameId=requestAnimationFrame(d)),()=>{e&&(e.removeEventListener("mouseover",t),e.removeEventListener("mouseout",n)),cancelAnimationFrame(r.current.animationFrameId)}}),[]),{containerRef:c,elementRef:o,hovered:i,impactCount:s}}var c=r(890);class s{constructor(e,t,r){this.red=e,this.green=t,this.blue=r,this.rgb="rgb(".concat(e,", ").concat(t,", ").concat(r,")")}}function a(e){const t=255-e.red,r=255-e.green,n=255-e.blue;return new s(t,r,n)}const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;const r=Array.from({length:t-e+1},((t,r)=>r+e)),n=(0,c.J)(r),o=(0,c.J)(r),a=(0,c.J)(r);return new s(n,o,a)};var l=r(579);function u(){const[e,t]=(0,n.useState)(i()),{containerRef:r,elementRef:c,impactCount:s}=o({speed:window.innerWidth/2e3*3}),u=(0,n.useRef)(0);return(0,n.useEffect)((()=>{const e=Date.now();e-u.current>=300&&(t(i()),u.current=e)}),[s]),(0,l.jsx)("div",{ref:r,id:"bounce-room",style:{color:e.rgb,backgroundColor:a(e).rgb},children:(0,l.jsx)("div",{ref:c,id:"bouncing-text",children:"desktop only"})})}},5509:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var n=r(5043),o=r(2432);const c=r.p+"static/media/eye.dec3834250fe27c81ae7b742bbba007f.svg";const s=r.p+"static/media/eye-crossed.abb67d156b26b0605d33d1bb10209b99.svg";var a=r(579);const i=()=>{const{isColorBlindMode:e,toggleColorBlindMode:t}=(0,o.Z)();return(0,a.jsx)("button",{className:"colorblind-toggle ".concat(e?"colorblind-mode":"regular-mode"),onClick:t,"aria-label":e?"Switch to color mode":"Switch to colorblind-friendly mode",title:e?"Color mode":"Colorblind-friendly mode",children:(0,a.jsx)("img",{src:e?s:c,alt:e?"Eye crossed icon":"Eye icon",className:"colorblind-toggle-icon"})})};var l=r(7375),u=r(8477);const d=r.p+"static/media/game_over.21c74c34f50a8ecedde0.mp3",h=r.p+"static/media/groovy_click.5cb6eae90670166005af.mp3",f=r.p+"static/media/the_gathering.2d97c4755109d9278151.mp3",m=35,p=20,w=6,g=125,y=5,b=22,v=1,R=m*b,E=p*b,k=(e,t)=>e*m+t,S=(e,t)=>e<0||t<0||e>=p||t>=m,A=e=>(e+2)%4,C=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return((e,t,r,n)=>Math.max(Math.abs(e-r),Math.abs(t-n)))(e,t,r,n)>=o+1},x=(e,t,r)=>[[e-1,t],[e,t+1],[e+1,t],[e,t-1]][r],M={w:"ArrowUp",W:"ArrowUp",s:"ArrowDown",S:"ArrowDown",a:"ArrowLeft",A:"ArrowLeft",d:"ArrowRight",D:"ArrowRight"},_={ArrowUp:0,ArrowDown:2,ArrowLeft:3,ArrowRight:v},j=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b;e.fillStyle=n,e.fillRect(r*o,t*o,o,o)},O=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;return e.clearRect(r*n,t*n,n,n)};function L(){const{isColorBlindMode:e}=(0,o.Z)(),[t,r]=(0,n.useState)(0),[c,s]=(0,n.useState)(!1),[L,P]=(0,n.useState)(0),[F,I]=(0,n.useState)(0),[D,T]=(0,n.useState)(0),N=(0,n.useRef)(null),W=(0,n.useRef)(g),q=(0,n.useRef)(!1),H=(0,n.useRef)(v),z=(0,n.useRef)(v),K=(0,n.useRef)([]),U=(0,n.useRef)(new Set),X=(0,n.useRef)({row:-1,col:-1}),Y=(0,n.useRef)(!1),B=(0,n.useRef)(!1),J=(0,n.useRef)([]),G=(0,n.useRef)(new Set),V=(0,n.useRef)(new Uint8Array(p*m)),Z=(0,n.useRef)([]),$=(0,n.useMemo)((()=>new l.D(h)),[]),Q=(0,n.useMemo)((()=>new l.D(d)),[]),ee=(0,n.useMemo)((()=>new l.D(f,!0)),[]),te=F<=768,re=(0,n.useCallback)(((e,t,r)=>{for(let n=e-1;n<=e+1;n++)for(let e=t-1;e<=t+1;e++){if(n<0||e<0||n>=p||e>=m)continue;const t=k(n,e),o=V.current[t]+r;V.current[t]=o<0?0:o}}),[]),ne=(0,n.useRef)(null),oe=(0,n.useRef)(null),ce=(0,n.useRef)(null),se=(0,n.useRef)(null),ae=(0,n.useRef)(null),ie=(0,n.useMemo)((()=>e?{grid:"rgba(255,255,255,0.3)",obstacle:"rgba(255,255,255,0.3)",food:"#3cff00",body:"#ffffff",head:"#ffffff",headKO:"#ff4d4f"}:{grid:"rgba(233,233,242,0.55)",obstacle:"rgba(28, 28, 28, 0.9)",food:"#3cff00",body:"#ffffff",head:"#ffffff",headKO:"#ff4d4f"}),[e]),le=(0,n.useCallback)((function(e,t,r){let{alpha:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{alpha:!0};const o=Math.max(1,window.devicePixelRatio||1);(e.width!==t*o||e.height!==r*o)&&(e.width=t*o,e.height=r*o,e.style.width="".concat(t,"px"),e.style.height="".concat(r,"px"));const c=e.getContext("2d",{alpha:n});return c.setTransform(o,0,0,o,0,0),c}),[]),ue=(0,n.useCallback)((e=>{e.save(),e.strokeStyle=ie.grid,e.setLineDash([2,3]),e.lineWidth=1,e.beginPath();for(let t=0;t<=p;t++){const r=t*b+.5;e.moveTo(0,r),e.lineTo(R,r)}for(let t=0;t<=m;t++){const r=t*b+.5;e.moveTo(r,0),e.lineTo(r,E)}e.stroke(),e.restore()}),[ie.grid]),de=(0,n.useCallback)(((e,t)=>{se.current&&j(se.current,e,t,ie.obstacle)}),[ie.obstacle]),he=(0,n.useCallback)((()=>{const e=X.current;ae.current&&e.row>=0&&j(ae.current,e.row,e.col,ie.food)}),[ie.food]),fe=(0,n.useCallback)((()=>{const e=X.current;if(!ae.current||e.row<0)return;const t=K.current[K.current.length-1];t&&t.row===e.row&&t.col===e.col||O(ae.current,e.row,e.col)}),[]),me=(0,n.useCallback)((()=>{if(!ae.current||!K.current.length)return;const e=K.current;for(let n=0;n<e.length-1;n++)j(ae.current,e[n].row,e[n].col,ie.body);const t=e[e.length-1],r=B.current?ie.headKO:ie.head;j(ae.current,t.row,t.col,r)}),[ie.body,ie.head,ie.headKO]),pe=me,we=(0,n.useCallback)((e=>{const t=M[e]||e,r=_[t];return null==r||r===A(H.current)?null:r}),[]),ge=(0,n.useCallback)(((e,t)=>!U.current.has(k(e,t))),[]),ye=(0,n.useCallback)(((e,t)=>!G.current.has(k(e,t))),[]),be=(0,n.useCallback)(((e,t)=>0===V.current[k(e,t)]),[]),ve=(0,n.useCallback)(((e,t)=>{const r=X.current;return r.row<0||C(e,t,r.row,r.col,1)}),[]),Re=(0,n.useCallback)(((e,t)=>{if(!K.current.length)return!0;const r=K.current[K.current.length-1];return C(e,t,r.row,r.col,5)}),[]),Ee=(0,n.useCallback)(((e,t)=>ge(e,t)&&Re(e,t)&&ye(e,t)&&be(e,t)),[ge,Re,ye,be]),ke=(0,n.useCallback)(((e,t)=>ge(e,t)&&ye(e,t)&&be(e,t)&&ve(e,t)),[ge,ye,be,ve]),Se=(0,n.useCallback)((()=>{let e,t,r=0;do{if(e=Math.random()*p|0,t=Math.random()*m|0,++r>300)return}while(!ke(e,t));J.current.push({row:e,col:t}),G.current.add(k(e,t)),de(e,t),re(e,t,1)}),[ke,de,re]),Ae=(0,n.useCallback)((()=>{let e,t,r=0;do{if(e=Math.random()*p|0,t=Math.random()*m|0,++r>200)break}while(!Ee(e,t));fe(),X.current={row:e,col:t},he()}),[Ee,fe,he]),Ce=(0,n.useCallback)((()=>{r((t=>{const r=t+1;return e||r%y!==0||T((e=>0===e?Math.floor(Math.random()*(360-(e+43.5))):e+43.5)),r>=y&&r%y===0&&(Se(),Se()),r})),Ae()}),[e,Se,Ae]),xe=(0,n.useCallback)((()=>{K.current=[],U.current=new Set,J.current=[],G.current=new Set,V.current=new Uint8Array(p*m),oe.current&&ce.current&&(se.current=le(oe.current,R,E,{alpha:!0}),ae.current=le(ce.current,R,E,{alpha:!0}),se.current.clearRect(0,0,R,E),ue(se.current),ae.current.clearRect(0,0,R,E));for(let e=0;e<w;e++)K.current.push({row:0,col:e}),U.current.add(k(0,e));Q.volume=1,$.volume=1,ee.volume=1,s(!1),r(0),H.current=v,z.current=v,Z.current=[],Y.current=!1,B.current=!1,pe(),Ae()}),[$,ee,Q,Ae,ue,pe]),Me=()=>{if(q.current)return;q.current=!0;let e=performance.now(),t=0;const r=n=>{if(!q.current)return;t+=n-e,e=n;const o=W.current;for(;t>=o;)Le(),t-=o;N.current=requestAnimationFrame(r)};N.current=requestAnimationFrame(r)},_e=()=>{N.current&&cancelAnimationFrame(N.current),N.current=null,q.current=!1},je=(0,n.useCallback)((()=>{if(!ae.current||!K.current.length)return;const e=K.current[K.current.length-1];j(ae.current,e.row,e.col,ie.headKO)}),[ie.headKO]),Oe=(0,n.useCallback)(((e,t)=>S(e,t)||G.current.has(k(e,t))?"wall":!!U.current.has(k(e,t))&&"self"),[]),Le=(0,n.useCallback)((()=>{if(!Y.current||B.current)return;Z.current.length&&(z.current=Z.current.shift()),H.current=z.current;const e=K.current[K.current.length-1],[t,r]=x(e.row,e.col,H.current),n=t===X.current.row&&r===X.current.col;if(Oe(t,r))return s(!0),T(0),Q.play(),ee.reset(),P(0),Y.current=!1,B.current=!0,Z.current=[],je(),void _e();if(n&&fe(),j(ae.current,e.row,e.col,ie.body),K.current.push({row:t,col:r}),U.current.add(k(t,r)),j(ae.current,t,r,ie.head),n)Ce();else{const e=K.current.shift();U.current.delete(k(e.row,e.col)),O(ae.current,e.row,e.col)}}),[Oe,fe,ie.body,ie.head,Ce]),Pe=(0,n.useCallback)((()=>{if(se.current&&ae.current){se.current.clearRect(0,0,R,E),ue(se.current);for(const e of J.current)de(e.row,e.col);ae.current.clearRect(0,0,R,E),me(),he()}}),[ue,de,me,he]);return(0,n.useLayoutEffect)((()=>{let e=0;const t=()=>{cancelAnimationFrame(e),e=requestAnimationFrame((()=>{I(window.innerWidth),oe.current&&ce.current&&(se.current=le(oe.current,R,E,{alpha:!0}),ae.current=le(ce.current,R,E,{alpha:!0}),Pe())}))};return window.addEventListener("resize",t),t(),()=>{cancelAnimationFrame(e),window.removeEventListener("resize",t)}}),[Pe]),(0,n.useEffect)((()=>{const e=e=>{(e=>{var t;if(null==e)return;const r=Z.current,n=r.length?r[r.length-1]:null!==(t=z.current)&&void 0!==t?t:H.current;e===A(n)||r.length&&r[r.length-1]===e||r.length>=3||r.push(e)})(we(e.key))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[we]),(0,n.useEffect)((()=>{const t=document.getElementById("app-base");t&&(t.style.filter=e?"none":"hue-rotate(".concat(D,"deg)"))}),[D,e]),(0,n.useEffect)((()=>{Pe()}),[e,Pe]),(0,n.useEffect)((()=>{const e=()=>document.hidden?_e():Y.current&&Me();return document.addEventListener("visibilitychange",e,{passive:!0}),()=>document.removeEventListener("visibilitychange",e)}),[]),(0,n.useEffect)((()=>()=>{Q.volume=0,$.volume=0,ee.volume=0,ee.currentTime=0,_e()}),[Q,$,ee]),(0,n.useEffect)((()=>{xe()}),[xe]),te?(0,a.jsx)(u.default,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{}),(0,a.jsx)("div",{id:"app-base",className:"snek-colors ".concat(e?"colorblind-mode":""),children:(0,a.jsxs)("div",{className:"game-container",style:{cursor:L?"none":"inherit"},children:[(0,a.jsx)("h1",{className:"snek-title",style:{display:L||c?"none":"block"},children:"SNEK"}),!L&&(0,a.jsx)("button",{onMouseDown:()=>$.play(),onClick:()=>{q.current||(_e(),xe(),P(1),Y.current=!0,B.current=!1,ee.play(),Me())},disabled:q.current,children:c?"try again":"start game"}),(0,a.jsxs)("div",{id:"board-wrap",className:"board",ref:ne,style:{display:L||c?"block":"none",position:"absolute",width:R,height:E},children:[(0,a.jsx)("canvas",{ref:oe,width:R,height:E,style:{position:"absolute",left:0,top:0,zIndex:1}}),(0,a.jsx)("canvas",{ref:ce,width:R,height:E,style:{position:"absolute",left:0,top:0,background:"transparent",zIndex:2,imageRendering:"pixelated"}}),c&&(0,a.jsxs)("div",{className:"game-over",style:{zIndex:3},children:[(0,a.jsx)("p",{className:"game-over-text",children:(0,a.jsx)("span",{children:"GAME OVER "})}),(0,a.jsx)("p",{className:"game-over-text second",children:(0,a.jsx)("span",{children:"GAME OVER "})})]})]}),(0,a.jsx)("p",{className:"score",style:{display:L||c?"block":"none"},children:t})]})})]})}},7375:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(9788);class o extends Audio{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.isPlayingSrc=e=>{var t;return(null!==(t=this.logicalSrc)&&void 0!==t?t:"").includes(e)&&this.isPlaying()},this.isPlaying=()=>this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2,this.timeLeft=()=>this.duration-this.currentTime,this.reset=()=>{this.pause();try{this.currentTime=0}catch(e){}},this.destroy=()=>{this.reset(),this._detachHls(),this.removeAttribute("src"),this.load()},this.crossOrigin="anonymous",this.loop=t,this._hls=null,this._logicalSrc=null,this._setSourceSeq=0,e&&this.setSource(e,{autoplay:!1,loop:t})}get logicalSrc(){var e;return null!==(e=this._logicalSrc)&&void 0!==e?e:this.src}async setSource(e){let{autoplay:t=!1,loop:r=this.loop}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=++this._setSourceSeq;this.loop=r,this.crossOrigin="anonymous";const c=t||!this.paused;this.pause(),this._detachHls(),this._logicalSrc=e;const s=/\.m3u8(\?.*)?$/i.test(e),a=s&&""!==this.canPlayType("application/vnd.apple.mpegurl");if(!s||a)return this.src=e,this.load(),void(c&&(await this._safePlayWhenReady(),this._setSourceSeq));if(!n.Ay.isSupported())throw new Error("HLS not supported in this browser (no MSE).");const i=new n.Ay;this._hls=i,i.attachMedia(this),i.loadSource(e),i.on(n.Ay.Events.ERROR,((e,t)=>{console.error("hls.js error",t),t.fatal&&(t.type===n.Ay.ErrorTypes.NETWORK_ERROR&&i.startLoad(),t.type===n.Ay.ErrorTypes.MEDIA_ERROR&&i.recoverMediaError())})),c&&(await new Promise(((e,t)=>{const r=()=>{i.off(n.Ay.Events.MANIFEST_PARSED,r),e()},o=(e,r)=>{r.fatal&&(i.off(n.Ay.Events.ERROR,o),t(new Error("Fatal HLS error: ".concat(r.type," / ").concat(r.details))))};i.on(n.Ay.Events.MANIFEST_PARSED,r),i.on(n.Ay.Events.ERROR,o)})),o===this._setSourceSeq&&await this._safePlay())}_detachHls(){if(this._hls)try{this._hls.destroy()}finally{this._hls=null}}async _safePlayWhenReady(){await this._safePlay(),this.paused&&(await new Promise((e=>{this.addEventListener("canplay",(()=>e()),{once:!0}),this.addEventListener("error",(()=>e()),{once:!0})})),await this._safePlay())}async _safePlay(){try{await this.play()}catch(e){console.log("play() failed:",e)}}}},890:(e,t,r)=>{r.d(t,{J:()=>n,k:()=>o});const n=e=>e[Math.floor(Math.random()*e.length)],o=e=>{let[...t]=e,r=t.length;for(;r;){const e=Math.floor(Math.random()*r--);[t[r],t[e]]=[t[e],t[r]]}return t}}}]);
//# sourceMappingURL=183.dcfe1e43.chunk.js.map