{"version":3,"file":"static/js/864.d1b778e1.chunk.js","mappings":"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","sources":["shufflenator/Shufflenator.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport MultiRangeSlider from \"multi-range-slider-react\";\nimport Select from 'react-select'\n\nimport { SHUFFLE_STRAT } from './Shuffler';\nimport { SCORE_TYPE } from './ShuffleScorers';\n\nimport '../styles/shufflenator.css'\n\nconst selectStyles = {\n  control: (baseStyles, { isFocused }) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n    borderColor: isFocused ? 'var(--text-color)' : 'var(--tertiary)',\n    cursor: \"var(--pointer)\",\n  }),\n  singleValue: (baseStyles) => ({\n    ...baseStyles,\n    color:'var(--alt-text-color)',\n  }),\n  option: (baseStyles, { isFocused, isSelected }) => ({\n    ...baseStyles,\n    cursor: \"var(--pointer)\",\n    color: isSelected ? 'var(--bg-color)' : 'var(--alt-text-color)',\n    backgroundColor: isSelected ? 'var(--tertiary)' : (isFocused ? \"var(--text-color)\" : \"var(--alt-bg-color)\"),\n    fontWeight: isSelected ? 'bold' : 'normal',\n  }),\n  menu: (baseStyles) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n  }),\n  indicatorSeparator: (baseStyles) => ({...baseStyles, backgroundColor: 'var(--alt-text-color)'})\n};\n\nexport default function Shufflenator() {\n  const cardsInDeck = useRef();\n  const workerRef = useRef(null);\n\n  useEffect(() => {\n    return () => { workerRef.current?.terminate(); };\n  }, []);\n\n  const [pileMin, setPileMin] = useState(5);\n  const [pileMax, setPileMax] = useState(10);\n  const [maxShuffles, setMaxShuffles] = useState({value: 3, label: 3});\n  const [shuffleStrat] = useState({value: \"PILE\", label: \"PILE\"});\n  const [scoreType, setScoreType] = useState({value: \"SHANNON_ENTROPY\", label: \"SHANNON_ENTROPY\"});\n  const [results, setResults] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [showExplainer, setShowExplainer] = useState(false);\n\n  const CardsInDeck = () => {\n    return (\n      <div className='shufflenator-selector-row'>\n        <div className='shufflenator-selector-row-title'>cards in deck:</div>\n        <input\n          className='shufflenator-selector-row-number'\n          type=\"number\"\n          ref={cardsInDeck}\n          defaultValue={52}\n          step={10}\n          min={10}\n          max={1_000}\n        />\n      </div>\n    );\n  };\n  const cardsInDeckInput = useRef(<CardsInDeck/>);\n\n  const onPileRangeChange = e => {\n    setPileMin(e.minValue);\n    setPileMax(e.maxValue);\n  };\n\n  const Dropdown = ({title, options, value, defaultValue, onChange}) => {\n    options = options.map(o => {\n      return {value: o, label: o};\n    });\n    return (\n      <div className='shufflenator-selector-row'>\n        <div className='shufflenator-selector-row-title'>{title}:</div>\n        <Select\n          value={value}\n          defaultValue={defaultValue}\n          options={options}\n          onChange={onChange}\n          isSearchable={false}\n          styles={selectStyles}\n        />\n      </div>\n    );\n  };\n\n  const MaxShuffles = () => {\n    return (\n      <Dropdown\n        title=\"max shuffles\"\n        options={[1, 2, 3, 4, 5]}\n        value={maxShuffles}\n        defaultValue={3}\n        onChange={setMaxShuffles}\n      />\n    );\n  };\n\n  // const ShuffleStrategy = () => {\n  //   return (\n  //     <Dropdown\n  //       title=\"shuffle strategy\"\n  //       options={SHUFFLE_STRAT}\n  //       value={shuffleStrat}\n  //       defaultValue={\"PILE\"}\n  //       onChange={setShuffleStrat}\n  //     />\n  //   );\n  // }\n\n  const ScoreType = () => {\n    return (\n      <Dropdown\n        title=\"score strategy\"\n        options={SCORE_TYPE}\n        value={scoreType}\n        defaultValue={\"SHANNON_ENTROPY\"}\n        onChange={setScoreType}\n      />\n    );\n  };\n  \n  const shuffle = () => {\n    workerRef.current?.terminate();\n    setResults(null);\n    setLoading(true);\n    const worker = new Worker(new URL('./shuffleWorker.js', import.meta.url));\n    workerRef.current = worker;\n    worker.postMessage({\n      shuffleStrat: shuffleStrat.value,\n      scoreType: scoreType.value,\n      maxShuffles: maxShuffles.value,\n      deckSize: cardsInDeck.current.value,\n      minNumPiles: pileMin,\n      maxNumPiles: pileMax\n    });\n    worker.onmessage = (e) => {\n      setResults(e.data);\n      setLoading(false);\n      workerRef.current = null;\n    };\n  };\n\n  const SubmitButton = () => {\n    if (loading) return <div className=\"shufflenator-spinner\" />;\n    return <div onClick={shuffle} className=\"shufflenator-submit-button\">\n      <div className=\"shufflenator-submit-button-text\">submit</div>\n    </div>;\n  };\n\n  const Results = () => {\n    return (\n      <div className=\"shufflenator-results\">\n        <span className=\"shufflenator-results-number\">optimal sequence:</span>\n        {results.permutation.map((n, i) => (\n          <div key={i}>\n            &nbsp;&nbsp;{i + 1}. cyclically deal into <span className=\"shufflenator-results-number\">{n}</span> piles.\n          </div>\n        ))}\n        <br/>\n        <div className=\"shufflenator-results-note\">* after each step, reassemble piles in order.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"shufflenator\">\n      <div className=\"shufflenator-header\">\n        <h1 className=\"shufflenator-title\">shufflenator</h1>\n        <button className=\"shufflenator-help-button\" onClick={() => setShowExplainer(true)}>\n          ?\n        </button>\n      </div>\n\n      {showExplainer && (\n        <div className=\"shufflenator-modal-overlay\" onClick={() => setShowExplainer(false)}>\n          <div className=\"shufflenator-modal\" onClick={(e) => e.stopPropagation()}>\n            <button className=\"shufflenator-modal-close\" onClick={() => setShowExplainer(false)}>\n              ×\n            </button>\n            <div className=\"shufflenator-explainer\">\n              <h2>how it works</h2>\n              <p>\n                this tool calculates the best pile shuffle pattern for thoroughly randomizing a deck of cards.\n                pile shuffling alone doesn't randomize—it performs a deterministic permutation.\n                but the right sequence of pile shuffles can spread cards maximally before you do your riffle shuffles.\n              </p>\n              <p>\n                configure your deck size, pile size range, and how many shuffles you want to perform.\n                the calculator will find the permutation that maximizes shannon entropy (randomness) given your constraints.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className='shufflenator-selector'>\n        {cardsInDeckInput.current}\n        <div className='shufflenator-selector-row'>\n          <div className='shufflenator-selector-row-title'>pile size range:</div>\n          <MultiRangeSlider\n            className='shufflenator-selector-row-slider'\n            min={2}\n            max={20}\n            step={1}\n            minValue={pileMin}\n            maxValue={pileMax}\n            onChange={onPileRangeChange}\n            preventWheel={true}\n            stepOnly={false}\n            ruler={false}\n            label={false}\n          />\n        </div>\n        <MaxShuffles/>\n        {/* <ShuffleStrategy/> */}\n        {/* <ScoreType/> */}\n      </div>\n      <SubmitButton/>\n      {results && <Results/>}\n    </div>\n  );\n};\n"],"names":["selectStyles","control","baseStyles","_ref","isFocused","_objectSpread","backgroundColor","borderColor","cursor","singleValue","color","option","_ref2","isSelected","fontWeight","menu","indicatorSeparator","Shufflenator","cardsInDeck","useRef","workerRef","useEffect","_workerRef$current","current","terminate","pileMin","setPileMin","useState","pileMax","setPileMax","maxShuffles","setMaxShuffles","value","label","shuffleStrat","scoreType","setScoreType","results","setResults","loading","setLoading","showExplainer","setShowExplainer","CardsInDeck","_jsxs","className","children","_jsx","type","ref","defaultValue","step","min","max","cardsInDeckInput","Dropdown","_ref3","title","options","onChange","map","o","Select","isSearchable","styles","MaxShuffles","shuffle","_workerRef$current2","worker","Worker","URL","postMessage","deckSize","minNumPiles","maxNumPiles","onmessage","e","data","SubmitButton","onClick","Results","permutation","n","i","stopPropagation","MultiRangeSlider","minValue","maxValue","preventWheel","stepOnly","ruler"],"sourceRoot":""}