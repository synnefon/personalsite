{"version":3,"file":"static/js/200.9ab25c9b.chunk.js","mappings":"4TA0BA,MAAMA,EAAM,CACVC,QAAS,IACTC,SAAU,IACVC,SAAU,IAEVC,UAAW,KACXC,UAAW,MACXC,gBAAiB,KAEjBC,qBAAsB,GAEtBC,gBAAiB,GACjBC,kBAAmB,MAEnBC,kBAAmB,KAGfC,EAAS,CACbC,gBAAiB,GACjBC,WAAY,EACZC,UAAW,IAGPC,EAAS,CACbC,MAAO,GACPC,OAAQ,GACRC,cAAe,IAIXC,EAAW,CACfC,MAAO,KACPC,OAAQ,KACRC,UAAW,MAIPC,EAAQ,CACZC,IAAK,EACLC,IAAK,EACLC,QAAS,EACTC,MAAO,IAcT,MAAMC,EAAiB,4BAgCvB,SAASC,EAAaC,GACpB,GAAIA,GAAO,EAAG,OAAO,EAErB,MAAMC,EAAQR,EAAMI,MACpB,GAAII,GAAS,EAAG,OAAOR,EAAMG,QAE7B,MAAMM,GAAKF,EAAM,IAAMC,EAAQ,GAEzBE,EAASC,KAAKC,IADA,KAEdC,EAASF,KAAKC,IAAIZ,EAAME,KAC9B,OAAOS,KAAKG,IApBd,SAAcC,EAAWC,EAAWP,GAClC,OAAOM,GAAKC,EAAID,GAAKN,CACvB,CAkBkBQ,CAAKP,EAAQG,EAAQJ,GACvC,CAsBA,SAASS,EAAQC,GACf,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACjC,CAEA,SAASC,EAAOC,EAAYC,GAC1B,OAAOX,KAAKY,MAAMF,EAAIC,EACxB,CAEA,SAASE,EAAaC,GACpB,MAAMC,EAAQf,KAAKgB,SAAWhB,KAAKiB,GAAK,EAClCC,EAAIlB,KAAKgB,SAAWF,EAC1B,MAAO,CAAEK,EAAGnB,KAAKoB,IAAIL,GAASG,EAAGG,EAAGrB,KAAKsB,IAAIP,GAASG,EACxD,CAOA,SAASK,EAAeC,EAAaC,EAAeC,GAC9CF,EAAEL,EAAI,GACRK,EAAEL,EAAI,EACNK,EAAEG,KAAO,IACAH,EAAEL,EAAIM,IACfD,EAAEL,EAAIM,EACND,EAAEG,KAAO,IAGPH,EAAEH,EAAI,GACRG,EAAEH,EAAI,EACNG,EAAEI,KAAO,IACAJ,EAAEH,EAAIK,IACfF,EAAEH,EAAIK,EACNF,EAAEI,KAAO,GAEb,CA+CO,SAASC,EACdC,EACAL,EACAC,EACAK,EACAC,EACAC,EACAC,GAGA,MAAMC,EAAKnC,KAAKoC,IAAI,EAAGpC,KAAKqC,IAAI,EAAKH,IAGrC,IAAK,IAAII,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IAAK,CACzC,MAAMd,EAAIM,EAAUQ,GAEpBE,EAAwBhB,EAAGW,GAC3BM,EAAcjB,EAAGW,GACjBO,EAAUlB,EAAGW,GAETJ,GAAaY,EAAiBnB,EAAGQ,EAAYG,GAEjDF,EAAeK,GAAK,EACpBf,EAAeC,EAAGC,EAAOC,EAC3B,CAGA,GAAIS,EAAK,EAAG,CACV,IAAK,IAAIG,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IAAK,CACzC,MAAMM,EAAKd,EAAUQ,GACrB,IAAK,IAAIO,EAAIP,EAAI,EAAGO,EAAIf,EAAUS,OAAQM,IAAK,CAC7C,MAAMC,EAAKhB,EAAUe,GAEfnC,EAAKoC,EAAG3B,EAAIyB,EAAGzB,EACfR,EAAKmC,EAAGzB,EAAIuB,EAAGvB,EACf0B,EAAItC,EAAOC,EAAIC,GAEjBoC,EAAI,GAAKA,EAAIjF,EAAIQ,kBACnB2D,EAAeK,KACfL,EAAeY,KAEfG,EAAqBJ,EAAIE,EAAIpC,EAAIC,EAAIoC,EAAGZ,GACxCc,EAAoBL,EAAIE,EAAIX,GAEhC,CACF,CAGA,IAAK,IAAIG,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IAAK,CACzC,MAAMd,EAAIM,EAAUQ,GACpBY,EAA4B1B,EAAGE,EAAQO,EAAeK,GAAIH,GAC1DX,EAAE2B,KAAO5C,EAAQiB,EAAE2B,KACrB,CACF,MAEE,IAAK,IAAIb,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IACpCR,EAAUQ,GAAGa,KAAO5C,EAAQuB,EAAUQ,GAAGa,OArG/C,SAA0BrB,EAAuBL,EAAeC,GAC9D,IAAK,IAAIY,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IACpCf,EAAeO,EAAUQ,GAAIb,EAAOC,EAExC,CAqGE0B,CAAiBtB,EAAWL,EAAOC,EACrC,CAEA,SAASc,EAAwBhB,EAAaW,GAC5C,GAAW,IAAPA,EAAU,OACd,MAAMkB,EAAW7B,EAAE2B,KAAO3B,EAAE2B,KAAOrF,EAAIE,SACvCwD,EAAEI,KAAO9D,EAAIC,QAAUsF,GAAYlB,CACrC,CAEA,SAASM,EAAcjB,EAAaW,GAClC,GAAW,IAAPA,EAAU,OACd,MAAMmB,EAAItD,KAAKuD,IAAIzF,EAAIG,SAAUkE,GACjCX,EAAEG,IAAM2B,EACR9B,EAAEI,IAAM0B,CACV,CAEA,SAASZ,EAAUlB,EAAaW,GACnB,IAAPA,IACJX,EAAEL,GAAKK,EAAEG,GAAKQ,EACdX,EAAEH,GAAKG,EAAEI,GAAKO,EAChB,CAEA,SAASQ,EAAiBnB,EAAaQ,EAAkBG,GACvD,MAEMY,EAAItC,EAFCe,EAAEL,EAAIa,EAAWb,EACjBK,EAAEH,EAAIW,EAAWX,GAG5B,GAAI0B,EAAIjF,EAAIU,kBAAmB,CAC7B,MAAMgF,EAAY,EAAIT,GAAK,EAAIjF,EAAIU,mBACnCgD,EAAE2B,MAAwB,EAAhBrF,EAAII,UAAgBsF,GAAoB,IAAPrB,EAAW,EAAIA,EAC5D,CACF,CAEA,SAASa,EACPJ,EACAE,EACApC,EACAC,EACAoC,EACAZ,GAEA,MAAMsB,EACJ3F,EAAIS,mBAAqB,EAAIwE,GAAK,EAAIjF,EAAIQ,kBAEtCoF,EAAO,EAAIX,EACXY,EAAKjD,EAAKgD,EAAOD,EAAQtB,EACzByB,EAAKjD,EAAK+C,EAAOD,EAAQtB,EAE/BS,EAAGjB,IAAMgC,EACTf,EAAGhB,IAAMgC,EACTd,EAAGnB,IAAMgC,EACTb,EAAGlB,IAAMgC,CACX,CAEA,SAASX,EAAoBL,EAAcE,EAAcX,GACvD,MACM0B,GADWjB,EAAGO,KAAOL,EAAGK,MACArF,EAAIM,gBAAkB+D,EACpDS,EAAGO,MAAQU,EACXf,EAAGK,MAAQU,CACb,CAEA,SAASX,EACP1B,EACAE,EACAoC,EACA3B,GAEA,MAAM4B,EAAqBrC,EAASF,EAAEH,EAEtC,GAAI0C,EAAqBjG,EAAIO,qBAAsB,CACjD,MAAMmF,EACJ,EAAIO,GAAsB,EAAIjG,EAAIO,sBAEpC,YADAmD,EAAE2B,MAAQrF,EAAII,UAAYsF,EAAYrB,EAExC,CAEA,MAEM6B,EAAc,GADFF,EADG,EAC4BA,EAD5B,KAIrBtC,EAAE2B,MAAQrF,EAAIK,WAAa,GAAoB,GAAd6F,GAAqB7B,CACxD,CAgBA,SAAS8B,EAAUd,GACjB,MAAMrD,EAAIS,EAAQ4C,GAClB,MAAO,CAAEjC,EAAG,IAAKgD,EAAGlE,KAAKmE,MAAM,GAAK,IAAMrE,GAAIO,EAAG,EACnD,CAEA,SAAS+D,EACPC,EACAC,EACAC,EACApD,EACAE,EACAmD,EACAtD,EACAgD,EACA7D,GAEA,IAAK,IAAIoE,EAAK,EAAGA,EAAKD,EAAMC,IAAM,CAChC,MAAMC,EAAKrD,EAAIoD,EACf,GAAIC,GAAMH,EAAc,SAExB,MAAMI,EAAUD,EAAKJ,EAAc,EACnC,IAAK,IAAIM,EAAK,EAAGA,EAAKJ,EAAMI,IAAM,CAChC,MAAMC,EAAK1D,EAAIyD,EACf,GAAIC,GAAMP,EAAa,SAEvB,MAAM1E,EAAM+E,EAAe,EAALE,EACtBR,EAAKzE,EAAM,GAAKsB,EAChBmD,EAAKzE,EAAM,GAAKsE,EAChBG,EAAKzE,EAAM,GAAKS,EAChBgE,EAAKzE,EAAM,GAAK,GAClB,CACF,CACF,CAEA,SAASkF,EAAiBtD,EAAaL,EAAWE,EAAW0D,GAC3D,MAAMrE,EAAKS,EAAIK,EAAEL,EACXR,EAAKU,EAAIG,EAAEH,EAEjB,OAAO0D,GADQrE,EAAKA,EAAKC,EAAKA,EACR,EACxB,CAqCA,SAASqE,EACPC,EACAnD,EACAoD,GAEA,MAAMC,EAAMF,EAAOG,WAAW,MAC9B,IAAKD,EAAK,OAEVA,EAAIE,UAAY,OAChBF,EAAIG,SAAS,EAAG,EAAGL,EAAOxD,MAAOwD,EAAOvD,QAExC,MAAM6D,EApGR,SACEJ,EACAD,EACAzD,EACAC,GAEA,MAAM8D,EAAMN,EAASO,QAIrB,OAHKD,GAAOA,EAAI/D,QAAUA,GAAS+D,EAAI9D,SAAWA,IAChDwD,EAASO,QAAUN,EAAIO,gBAAgBjE,EAAOC,IAEzCwD,EAASO,OAClB,CAyFoBE,CAAgBR,EAAKD,EAAUD,EAAOxD,MAAOwD,EAAOvD,SA9CxE,SACE6D,EACAzD,EACAwC,EACAC,GAEA,MAAMF,EAAOkB,EAAUlB,KACvBA,EAAKuB,KAAK,GAEV,MAAMC,EAAYpH,EAAOE,WACnBmH,EAAYrH,EAAOG,UACnBmG,EAAKtG,EAAOC,gBAAkBD,EAAOC,gBAE3C,IAAK,IAAI2C,EAAI,EAAGA,EAAIkD,EAAclD,GAAKwE,EACrC,IAAK,IAAI1E,EAAI,EAAGA,EAAImD,EAAanD,GAAK0E,EAAW,CAC/C,IAAIE,EAAe,EACfC,EAAkB,EAEtB,IAAK,IAAI1D,EAAI,EAAGA,EAAIR,EAAUS,OAAQD,IAAK,CACzC,MAAMd,EAAIM,EAAUQ,GACd2D,EAAYnB,EAAiBtD,EAAGL,EAAGE,EAAG0D,GAC5CgB,GAAgBE,EAChBD,GAAmBC,EAAYzE,EAAE2B,IACnC,CAEA,GAAI4C,GAAgBD,EAAW,SAE/B,MAAM3C,EAAO6C,EAAkBD,GACzB,EAAE7E,EAAC,EAAEgD,EAAC,EAAE7D,GAAM4D,EAAUd,GAE9BiB,EAAcC,EAAMC,EAAaC,EAAcpD,EAAGE,EAAGwE,EAAW3E,EAAGgD,EAAG7D,EACxE,CAEJ,CAcE6F,CAAcX,EAAWzD,EAAWmD,EAAOxD,MAAOwD,EAAOvD,QACzDyD,EAAIgB,aAAaZ,EAAW,EAAG,EACjC,CAGe,SAASa,IACtB,MAAMC,GAAYC,EAAAA,EAAAA,QAA0B,MACtCC,GAASD,EAAAA,EAAAA,QAAsB,MAE/BE,GAAeF,EAAAA,EAAAA,QAAmB,IAClCpB,GAAWoB,EAAAA,EAAAA,QAAyB,MACpCG,GAAoBH,EAAAA,EAAAA,QAAoB,IAAII,YAAY,IACxDC,GAAmBL,EAAAA,EAAAA,QAAsB,MAEzCM,GAAYC,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcC,GAAiB,IAAO,IACpEC,GAAaH,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcG,GAAiB,IAAQ,KAErEC,EAAYC,IAAiBC,EAAAA,EAAAA,WAAS,GAEvCC,GAAiBf,EAAAA,EAAAA,SAAO,GACxBgB,GAAgBhB,EAAAA,EAAAA,QAAa,CAAEnF,EAAG,EAAGE,EAAG,IAGxCkG,GAAkBV,EAAAA,EAAAA,UACtB,IAnXJ,SAA6BW,GAC3B,GAAIA,GAAS,EAAG,OAAO,EAEvB,MAAM3H,EAAQR,EAAMI,MACpB,IAAIgI,EAAO,EACPC,EAAUC,IACd,MAAMC,EAAS5H,KAAKC,IAAIuH,GAExB,IAAK,IAAIlF,EAAI,EAAGA,EAAIzC,EAAOyC,IAAK,CAC9B,MAAMuF,EAAIlI,EAAa2C,GACjBwF,EAAM9H,KAAK+H,IAAI/H,KAAKC,IAAI4H,GAAKD,GAC/BE,EAAMJ,IACRA,EAAUI,EACVL,EAAOnF,EAEX,CACA,OAAOmF,CACT,CAkWUO,CAAoB3I,EAAMG,UAChC,KAEKyI,EAAUC,IAAed,EAAAA,EAAAA,UAAiBG,GAC3CY,GAAW7B,EAAAA,EAAAA,QAAejH,EAAMG,UAEtC4I,EAAAA,EAAAA,YAAU,KACRD,EAAS1C,QAAU9F,EAAasI,EAAS,GACxC,CAACA,IAEJ,MAAOI,EAAUC,IAAelB,EAAAA,EAAAA,WAAS,GAGnCmB,GAAaC,EAAAA,EAAAA,cAAY,KAC7BF,GAAa9H,IAAOA,GAAE,GACrB,KAEIiI,EAAQC,IAAatB,EAAAA,EAAAA,UAAS,IAErCgB,EAAAA,EAAAA,YAAU,KACRxB,EAAU6B,OAASA,CAAM,GACxB,CAACA,EAAQ7B,IAEZ,MAAM+B,GAA0BH,EAAAA,EAAAA,cAAY,KAC1C,MAAMI,EAAIC,OAAOC,WACXC,EAAIF,OAAOG,YAEgB,OAA7BrC,EAAiBlB,UACnBkB,EAAiBlB,QAvcvB,SAA8BhE,EAAeC,GAC3C,MAAMuH,EAAehK,EAASC,MAAQD,EAASE,OACzC+J,EAAczH,EAAQC,EAEtByH,EAAUlK,EAASG,UAAY6J,EAC/BG,EAASpJ,KAAKmE,MAAM+E,EAAcC,GAExC,OAAOnJ,KAAKoC,IAAI,IAAKpC,KAAKqC,IAAI,IAAM+G,GACtC,CA+biCC,CAAqBT,EAAGG,IAGrD,MAAMO,EAAQ3C,EAAiBlB,QAC/Be,EAAaf,QAnVjB,SAAyBhE,EAAeC,EAAgB4H,GACtD,MAAMxH,EAAwB,GACxByH,EAAoBvJ,KAAKwJ,MAAMF,EAAQzK,EAAOC,OAEpD,IAAK,IAAIwD,EAAI,EAAGA,EAAIzD,EAAOC,MAAOwD,IAAK,CACrC,MAAMmH,EAAUzJ,KAAKgB,SAAWS,EAC1BiI,EACJ1J,KAAKgB,SAAWnC,EAAOG,cACnBgB,KAAKgB,SAAWU,EAAS,GAChB,GAATA,EAAe1B,KAAKgB,SAAWU,EAAS,GAExCiI,EAAY3J,KAAKgB,SACvB,IAAK,IAAI6B,EAAI,EAAGA,EAAI0G,EAAmB1G,IAAK,CAC1C,MAAM+G,EAAS/I,EAAahC,EAAOE,QACnC+C,EAAU+H,KAAK,CACb1I,EAAGsI,EAAUG,EAAOzI,EACpBE,EAAGqI,EAAUE,EAAOvI,EACpBM,GAAI,EACJC,GAAI,EACJuB,KAAMwG,GAEV,CACF,CAEA,KAAO7H,EAAUS,OAAS+G,GACxBxH,EAAU+H,KAAK,CACb1I,EAAGnB,KAAKgB,SAAWS,EACnBJ,EAAGrB,KAAKgB,SAAWU,EACnBC,GAAI,EACJC,GAAI,EACJuB,KAAM,IAIV,OAAOrB,CACT,CAgT2BgI,CAAgBlB,EAAGG,EAAGO,GAC7C7C,EAAkBhB,QAAU,IAAIiB,YAAY4C,EAAM,GACjD,IAEGS,GAAoBvB,EAAAA,EAAAA,cAAY,KAAO,IAADwB,GAvb9C,SAAoCC,GAClC,IACE,IAAKC,OAAOC,SAASF,IAAYA,EAAU,EAAG,OAC9CG,aAAaC,QAAQ3K,EAAgB4K,OAAOL,GAC9C,CAAE,MAAAM,GACA,CAEJ,CAibIC,CAAgD,QAAtBR,EAACpD,EAAU6D,mBAAW,IAAAT,EAAAA,EAAI,EAAE,GACrD,CAACpD,KAEJwB,EAAAA,EAAAA,YAAU,KACR,IAAKlB,EAAY,OAEjB,MACMwD,EAAK7B,OAAO8B,aADLC,IAAMb,KACiB,KAE9Bc,EAAaA,IAAMd,IACnBe,EAAqBA,KACQ,WAA7BC,SAASC,iBAA8BjB,GAAmB,EAMhE,OAHAlB,OAAOoC,iBAAiB,WAAYJ,GACpCE,SAASE,iBAAiB,mBAAoBH,GAEvC,KACLjC,OAAOqC,cAAcR,GACrB7B,OAAOsC,oBAAoB,WAAYN,GACvCE,SAASI,oBAAoB,mBAAoBL,EAAmB,CACrE,GACA,CAAC5D,EAAY6C,KAEhB3B,EAAAA,EAAAA,YAAU,IACD,KACL2B,IAEAnD,EAAUwE,QACVxE,EAAU6B,OAAS,EACnB7B,EAAUyE,QAEVrE,EAAWoE,QACXpE,EAAWyB,OAAS,EACpBzB,EAAWqE,OAAO,GAEnB,CAACzE,EAAWI,EAAY+C,IAE3B,MAAMuB,GAAS9C,EAAAA,EAAAA,cAAY,KACzB3G,EACE2E,EAAaf,QACboD,OAAOC,WACPD,OAAOG,YACP3B,EAAe5B,QACf6B,EAAc7B,QACdgB,EAAkBhB,QAClB0C,EAAS1C,QACV,GACA,IAEG8F,GAAO/C,EAAAA,EAAAA,cAAY,KACvB,MAAMvD,EAASoB,EAAUZ,QACpBR,GACLD,EAAYC,EAAQuB,EAAaf,QAASP,EAAS,GAClD,IAEGsG,GAAUhD,EAAAA,EAAAA,cAAY,KAE1B8C,IACAC,IACAhF,EAAOd,QAAUgG,sBAAsBD,EAAQ,GAC9C,CAACF,EAAQC,KAEZnD,EAAAA,EAAAA,YAAU,KACR,MAAMsD,EAAeA,KACnB,MAAMzG,EAASoB,EAAUZ,QACpBR,KAxbX,SAA2BA,GACzBA,EAAOxD,MAAQoH,OAAOC,WACtB7D,EAAOvD,OAASmH,OAAOG,WACzB,CAsbM2C,CAAkB1G,GAClBC,EAASO,QAAU,KAEfyB,GAAYqE,IAAM,EAKxB,OAFAG,IACA7C,OAAOoC,iBAAiB,SAAUS,GAC3B,IAAM7C,OAAOsC,oBAAoB,SAAUO,EAAa,GAC9D,CAACH,EAAMrE,KAGVkB,EAAAA,EAAAA,YAAU,KACR,MAAMnD,EAASoB,EAAUZ,QACzB,IAAKR,EAAQ,OAEb,MAAM2G,EAAWC,IACf,MAAMC,EAAO7G,EAAO8G,wBACpB,MAAO,CAAE5K,EAAG0K,EAAEG,QAAUF,EAAKG,KAAM5K,EAAGwK,EAAEK,QAAUJ,EAAKK,IAAK,EAGxDC,EAAUP,IACdxE,EAAe5B,SAAU,EACzB6B,EAAc7B,QAAUmG,EAAQC,EAAE,EAE9BQ,EAAUR,IACdvE,EAAc7B,QAAUmG,EAAQC,EAAE,EAE9BS,EAAOA,KACXjF,EAAe5B,SAAU,CAAK,EAQhC,OALAR,EAAOgG,iBAAiB,cAAemB,GACvCvD,OAAOoC,iBAAiB,cAAeoB,GACvCxD,OAAOoC,iBAAiB,YAAaqB,GACrCzD,OAAOoC,iBAAiB,gBAAiBqB,GAElC,KACLrH,EAAOkG,oBAAoB,cAAeiB,GAC1CvD,OAAOsC,oBAAoB,cAAekB,GAC1CxD,OAAOsC,oBAAoB,YAAamB,GACxCzD,OAAOsC,oBAAoB,gBAAiBmB,EAAK,CAClD,GACA,IAEH,MAAMC,GAAY/D,EAAAA,EAAAA,cAAY,KAC5B,IACExB,EAAWyB,OAAS,EACpBzB,EAAWyD,YAAc,EACzBzD,EAAWqE,QACXrE,EAAWwF,MACb,CAAE,MAAAC,GACA,IAED,CAACzF,IAEE0F,GAA2BlE,EAAAA,EAAAA,cAAY,KAC3C,MAAM1I,EA/jBV,WACE,IACE,MAAM6M,EAAMvC,aAAawC,QAAQlN,GACjC,IAAKiN,EAAK,OAAO,EACjB,MAAMnM,EAAI0J,OAAOyC,GACjB,OAAOzC,OAAOC,SAAS3J,IAAMA,GAAK,EAAIA,EAAI,CAC5C,CAAE,MAAAqM,GACA,OAAO,CACT,CACF,CAsjBcC,GACV,IACE,MAAMC,EAAYnG,EAAkBmG,SACZ,kBAAbA,GAAyB7C,OAAOC,SAAS4C,IAAaA,EAAW,EAC1EnG,EAAU6D,YAAc3K,EAAIiN,EAE5BnG,EAAU6D,YAAc3K,CAE5B,CAAE,MAAAkN,GACA,IAED,CAACpG,IAEEqG,GAAYzE,EAAAA,EAAAA,cAAY,KAC5B+D,IAEKrF,IACHC,GAAc,GACdwB,IACA8C,uBAAsB,IAAMF,MAG5BhF,EAAOd,QAAUgG,sBAAsBD,IAIzCkB,IACA9F,EAAU6B,OAAS,EACnB7B,EAAU4F,MAAM,GACf,CACDhB,EACAD,EACA3E,EACAM,EACAyB,EACA4D,EACAG,IAGIQ,GAAoBrG,EAAAA,EAAAA,UACxB,MAAS+B,EAAGC,OAAOC,WAAYC,EAAGF,OAAOG,eACzC,IAIImE,GAAgB7G,EAAAA,EAAAA,QAA8B,MAEpD,OACE8G,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,UACEC,IAAKnH,EACLgH,UAAU,mBACV5L,MAAOyL,EAAkBtE,EACzBlH,OAAQwL,EAAkBnE,IAG1B7B,GAYAkG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,UACEE,KAAK,SACLJ,UAAU,wBACVK,QAASnF,EACT,aAAYF,EAAW,YAAc,YACrC,eAAcA,EAASiF,SAEtBjF,EAAW,SAAM,WAGnBA,IACC+E,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAE7BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,UAC/BrF,QAIZsF,EAAAA,EAAAA,KAAA,OAAKC,IAAKL,EAAeE,UAAU,wBAAuBC,UACxDC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVI,KAAK,QACLpL,IAAK,EACLD,IAAK/C,EAAMI,MACXkO,KAAM,EACNC,MAAO3F,EACP4F,SAAWhC,IACT3D,UAzoBJ1H,EAyoByB0J,OAAO2B,EAAEjE,OAAOgG,OAzoB9BE,EAyoBsC,EAzoB1BC,EAyoB6B1O,EAAMI,MAxoBnEe,EAAIsN,EAAKA,EAAKtN,EAAIuN,EAAKA,EAAKvN,IADrC,IAAkBA,EAAWsN,EAAYC,CA0oBpB,EACD,aAAW,2BAMjBX,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,WAC9BtN,KAAKmE,MAAe,GAATsE,SAIxB8E,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVI,KAAK,QACLpL,IAAK,EACLD,IAAK,EACLuL,KAAM,GACNC,MAAOnF,EACPoF,SAAWhC,GAAMnD,EAAUwB,OAAO2B,EAAEjE,OAAOgG,QAC3C,aAAW,6BAjEvBL,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCC,EAAAA,EAAAA,KAAA,UACEE,KAAK,SACLJ,UAAU,kBACVK,QAAST,EACT,aAAW,kBAAiBK,SAC7B,cAqEX,C,kCCtxBO,MAAMxG,UAAsBkH,MACjCC,WAAAA,CAAYC,GAAkB,IAAbC,EAAIC,UAAA7L,OAAA,QAAA8L,IAAAD,UAAA,IAAAA,UAAA,GACnBE,MAAMJ,GAAK,KAIbK,aAAgBC,IAAc,IAADC,EAC3B,OAAe,QAARA,EAAAC,KAAKR,WAAG,IAAAO,OAAA,EAARA,EAAUE,SAASH,KACnBE,KAAKjE,YAAc,IAClBiE,KAAKE,SACLF,KAAKG,OACNH,KAAKI,WAAa,CAAC,EAC1B,KAEFC,UAAY,IACHL,KAAKjE,YAAc,IAClBiE,KAAKE,SACLF,KAAKG,OACNH,KAAKI,WAAa,EACzB,KAEFE,SAAW,IAAMN,KAAK3B,SAAW2B,KAAKjE,YAAY,KAElDY,MAAQ,KACNqD,KAAKtD,QACLsD,KAAKjE,YAAc,CAAC,EAtBpBiE,KAAKP,KAAOA,CACd,E","sources":["lava_lamp/LavaLamp.tsx","util/Audio.js"],"sourcesContent":["import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport \"../styles/lavalamp.css\";\n\nimport musicAudioNoise from \"../assets/lavaLamp/guitar.mp3\";\nimport clickAudioNoise from \"../assets/lavaLamp/click.mp3\";\nimport { PersonalAudio } from \"../util/Audio\";\n\n// --- Types ---\ninterface Particle {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  heat: number; // [0..1]\n}\n\ntype Vec2 = { x: number; y: number };\n\n// --- Constants ---\nconst SIM = {\n  GRAVITY: 0.01,\n  BUOYANCY: 0.04,\n  FRICTION: 0.98,\n\n  HEAT_RATE: 0.005,\n  COOL_RATE: 0.0017,\n  HEAT_CONDUCTION: 0.002,\n\n  HEAT_SOURCE_DISTANCE: 45,\n\n  COHESION_RADIUS: 25,\n  COHESION_STRENGTH: 0.0035,\n\n  MOUSE_HEAT_RADIUS: 100,\n} as const;\n\nconst RENDER = {\n  PARTICLE_RADIUS: 10,\n  PIXEL_SIZE: 6,\n  THRESHOLD: 0.8,\n} as const;\n\nconst CLUMPS = {\n  COUNT: 15,\n  RADIUS: 50,\n  TOP_HALF_PROB: 0.3,\n} as const;\n\n// Baseline density: preserves \"look\" across screens, computed once per page load.\nconst BASELINE = {\n  WIDTH: 1920,\n  HEIGHT: 1080,\n  PARTICLES: 1200,\n} as const;\n\n// --- Speed control (indexed slider) ---\nconst SPEED = {\n  MIN: 0.0, // per request\n  MAX: 5,\n  DEFAULT: 1.0,\n  STEPS: 10, // odd => default lands centered\n} as const;\n\nfunction computeParticleCount(width: number, height: number): number {\n  const baselineArea = BASELINE.WIDTH * BASELINE.HEIGHT;\n  const currentArea = width * height;\n\n  const density = BASELINE.PARTICLES / baselineArea;\n  const scaled = Math.round(currentArea * density);\n\n  return Math.max(200, Math.min(2000, scaled));\n}\n\n// --- Persisted audio position ---\nconst MUSIC_TIME_KEY = \"lavaLamp.musicTimeSeconds\";\n\nfunction readSavedMusicTimeSeconds(): number {\n  try {\n    const raw = localStorage.getItem(MUSIC_TIME_KEY);\n    if (!raw) return 0;\n    const v = Number(raw);\n    return Number.isFinite(v) && v >= 0 ? v : 0;\n  } catch {\n    return 0;\n  }\n}\n\nfunction writeSavedMusicTimeSeconds(seconds: number) {\n  try {\n    if (!Number.isFinite(seconds) || seconds < 0) return;\n    localStorage.setItem(MUSIC_TIME_KEY, String(seconds));\n  } catch {\n    // ignore\n  }\n}\n\nfunction lerp(a: number, b: number, t: number) {\n  return a + (b - a) * t;\n}\n\nfunction clampInt(v: number, lo: number, hi: number) {\n  return v < lo ? lo : v > hi ? hi : v;\n}\n\n// Note: MIN=0 is special; we treat index 0 as \"paused-ish\" (dt=0) and\n// map indices 1..STEPS-1 into (0..MAX] smoothly in log space.\nfunction indexToSpeed(idx: number): number {\n  if (idx <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  if (steps <= 1) return SPEED.DEFAULT;\n\n  const t = (idx - 1) / (steps - 2); // idx=1 => t=0, idx=steps-1 => t=1\n  const minPositive = 0.25; // feel-good floor for nonzero speeds\n  const minLog = Math.log(minPositive);\n  const maxLog = Math.log(SPEED.MAX);\n  return Math.exp(lerp(minLog, maxLog, t));\n}\n\nfunction speedToNearestIndex(speed: number): number {\n  if (speed <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  let best = 1;\n  let bestErr = Infinity;\n  const target = Math.log(speed);\n\n  for (let i = 1; i < steps; i++) {\n    const s = indexToSpeed(i);\n    const err = Math.abs(Math.log(s) - target);\n    if (err < bestErr) {\n      bestErr = err;\n      best = i;\n    }\n  }\n  return best;\n}\n\n// --- Utils ---\nfunction clamp01(v: number): number {\n  return v < 0 ? 0 : v > 1 ? 1 : v;\n}\n\nfunction hypot2(dx: number, dy: number): number {\n  return Math.hypot(dx, dy);\n}\n\nfunction randInCircle(radius: number): Vec2 {\n  const angle = Math.random() * Math.PI * 2;\n  const r = Math.random() * radius;\n  return { x: Math.cos(angle) * r, y: Math.sin(angle) * r };\n}\n\nfunction setCanvasToWindow(canvas: HTMLCanvasElement) {\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n}\n\nfunction bounceInBounds(p: Particle, width: number, height: number) {\n  if (p.x < 0) {\n    p.x = 0;\n    p.vx *= -0.5;\n  } else if (p.x > width) {\n    p.x = width;\n    p.vx *= -0.5;\n  }\n\n  if (p.y < 0) {\n    p.y = 0;\n    p.vy *= -0.5;\n  } else if (p.y > height) {\n    p.y = height;\n    p.vy *= -0.5;\n  }\n}\n\nfunction clampAllToBounds(particles: Particle[], width: number, height: number) {\n  for (let i = 0; i < particles.length; i++) {\n    bounceInBounds(particles[i], width, height);\n  }\n}\n\n// --- Init ---\nfunction createParticles(width: number, height: number, count: number): Particle[] {\n  const particles: Particle[] = [];\n  const particlesPerClump = Math.floor(count / CLUMPS.COUNT);\n\n  for (let i = 0; i < CLUMPS.COUNT; i++) {\n    const centerX = Math.random() * width;\n    const centerY =\n      Math.random() < CLUMPS.TOP_HALF_PROB\n        ? Math.random() * height * 0.5\n        : height * 0.5 + Math.random() * height * 0.5;\n\n    const clumpHeat = Math.random();\n    for (let j = 0; j < particlesPerClump; j++) {\n      const offset = randInCircle(CLUMPS.RADIUS);\n      particles.push({\n        x: centerX + offset.x,\n        y: centerY + offset.y,\n        vx: 0,\n        vy: 0,\n        heat: clumpHeat,\n      });\n    }\n  }\n\n  while (particles.length < count) {\n    particles.push({\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: 0,\n      vy: 0,\n      heat: 0,\n    });\n  }\n\n  return particles;\n}\n\n// --- Physics (single pair-pass on post-move positions, time-scaled) ---\nexport function stepSimulationOnePairPass(\n  particles: Particle[],\n  width: number,\n  height: number,\n  pointerDown: boolean,\n  pointerPos: Vec2,\n  neighborCounts: Uint16Array,\n  timeScale: number\n) {\n  // dt=0 => frozen (but still renders)\n  const dt = Math.max(0, Math.min(4.0, timeScale));\n\n  // Pass 1: integrate + pointer heat + reset neighbors\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    applyBuoyancyAndGravity(p, dt);\n    applyFriction(p, dt);\n    integrate(p, dt);\n\n    if (pointerDown) applyPointerHeat(p, pointerPos, dt);\n\n    neighborCounts[i] = 0;\n    bounceInBounds(p, width, height);\n  }\n\n  // Pass 2: pairwise forces + conduction (scaled)\n  if (dt > 0) {\n    for (let i = 0; i < particles.length; i++) {\n      const p1 = particles[i];\n      for (let j = i + 1; j < particles.length; j++) {\n        const p2 = particles[j];\n\n        const dx = p2.x - p1.x;\n        const dy = p2.y - p1.y;\n        const d = hypot2(dx, dy);\n\n        if (d > 0 && d < SIM.COHESION_RADIUS) {\n          neighborCounts[i]++;\n          neighborCounts[j]++;\n\n          applyCohesionImpulse(p1, p2, dx, dy, d, dt);\n          applyHeatConduction(p1, p2, dt);\n        }\n      }\n    }\n\n    // Pass 3: heat source / cooling (scaled)\n    for (let i = 0; i < particles.length; i++) {\n      const p = particles[i];\n      applyBottomHeatOrAirCooling(p, height, neighborCounts[i], dt);\n      p.heat = clamp01(p.heat);\n    }\n  } else {\n    // dt == 0: still clamp heat into [0,1] to avoid drift from other callers\n    for (let i = 0; i < particles.length; i++) {\n      particles[i].heat = clamp01(particles[i].heat);\n    }\n  }\n\n  clampAllToBounds(particles, width, height);\n}\n\nfunction applyBuoyancyAndGravity(p: Particle, dt: number) {\n  if (dt === 0) return;\n  const buoyancy = p.heat * p.heat * SIM.BUOYANCY;\n  p.vy += (SIM.GRAVITY - buoyancy) * dt;\n}\n\nfunction applyFriction(p: Particle, dt: number) {\n  if (dt === 0) return;\n  const f = Math.pow(SIM.FRICTION, dt);\n  p.vx *= f;\n  p.vy *= f;\n}\n\nfunction integrate(p: Particle, dt: number) {\n  if (dt === 0) return;\n  p.x += p.vx * dt;\n  p.y += p.vy * dt;\n}\n\nfunction applyPointerHeat(p: Particle, pointerPos: Vec2, dt: number) {\n  const dx = p.x - pointerPos.x;\n  const dy = p.y - pointerPos.y;\n  const d = hypot2(dx, dy);\n\n  if (d < SIM.MOUSE_HEAT_RADIUS) {\n    const intensity = 1 - d * (1 / SIM.MOUSE_HEAT_RADIUS);\n    p.heat += SIM.HEAT_RATE * 2 * intensity * (dt === 0 ? 1 : dt);\n  }\n}\n\nfunction applyCohesionImpulse(\n  p1: Particle,\n  p2: Particle,\n  dx: number,\n  dy: number,\n  d: number,\n  dt: number\n) {\n  const force =\n    SIM.COHESION_STRENGTH * (1 - d * (1 / SIM.COHESION_RADIUS));\n\n  const invD = 1 / d;\n  const fx = dx * invD * force * dt;\n  const fy = dy * invD * force * dt;\n\n  p1.vx += fx;\n  p1.vy += fy;\n  p2.vx -= fx;\n  p2.vy -= fy;\n}\n\nfunction applyHeatConduction(p1: Particle, p2: Particle, dt: number) {\n  const heatDiff = p1.heat - p2.heat;\n  const conduction = heatDiff * SIM.HEAT_CONDUCTION * dt;\n  p1.heat -= conduction;\n  p2.heat += conduction;\n}\n\nfunction applyBottomHeatOrAirCooling(\n  p: Particle,\n  height: number,\n  neighborCount: number,\n  dt: number\n) {\n  const distanceFromBottom = height - p.y;\n\n  if (distanceFromBottom < SIM.HEAT_SOURCE_DISTANCE) {\n    const intensity =\n      1 - distanceFromBottom * (1 / SIM.HEAT_SOURCE_DISTANCE);\n    p.heat += SIM.HEAT_RATE * intensity * dt;\n    return;\n  }\n\n  const maxNeighbors = 8;\n  const neighbors = neighborCount < maxNeighbors ? neighborCount : maxNeighbors;\n  const airExposure = 1 - neighbors / maxNeighbors;\n\n  p.heat -= SIM.COOL_RATE * (0.2 + airExposure * 0.8) * dt;\n}\n\n// --- Render helpers ---\nfunction ensureImageData(\n  ctx: CanvasRenderingContext2D,\n  imageRef: React.MutableRefObject<ImageData | null>,\n  width: number,\n  height: number\n): ImageData {\n  const img = imageRef.current;\n  if (!img || img.width !== width || img.height !== height) {\n    imageRef.current = ctx.createImageData(width, height);\n  }\n  return imageRef.current!;\n}\n\nfunction heatToRGB(heat: number): { r: number; g: number; b: number } {\n  const t = clamp01(heat);\n  return { r: 255, g: Math.round(50 + 205 * t), b: 0 };\n}\n\nfunction setPixelBlock(\n  data: Uint8ClampedArray,\n  canvasWidth: number,\n  canvasHeight: number,\n  x: number,\n  y: number,\n  size: number,\n  r: number,\n  g: number,\n  b: number\n) {\n  for (let py = 0; py < size; py++) {\n    const yy = y + py;\n    if (yy >= canvasHeight) continue;\n\n    const rowBase = yy * canvasWidth * 4;\n    for (let px = 0; px < size; px++) {\n      const xx = x + px;\n      if (xx >= canvasWidth) continue;\n\n      const idx = rowBase + xx * 4;\n      data[idx + 0] = r;\n      data[idx + 1] = g;\n      data[idx + 2] = b;\n      data[idx + 3] = 255;\n    }\n  }\n}\n\nfunction influenceAtPoint(p: Particle, x: number, y: number, r2: number): number {\n  const dx = x - p.x;\n  const dy = y - p.y;\n  const distSq = dx * dx + dy * dy;\n  return r2 / (distSq + 1);\n}\n\nfunction drawMetaballs(\n  imageData: ImageData,\n  particles: Particle[],\n  canvasWidth: number,\n  canvasHeight: number\n) {\n  const data = imageData.data;\n  data.fill(0);\n\n  const pixelSize = RENDER.PIXEL_SIZE;\n  const threshold = RENDER.THRESHOLD;\n  const r2 = RENDER.PARTICLE_RADIUS * RENDER.PARTICLE_RADIUS;\n\n  for (let y = 0; y < canvasHeight; y += pixelSize) {\n    for (let x = 0; x < canvasWidth; x += pixelSize) {\n      let influenceSum = 0;\n      let heatWeightedSum = 0;\n\n      for (let i = 0; i < particles.length; i++) {\n        const p = particles[i];\n        const influence = influenceAtPoint(p, x, y, r2);\n        influenceSum += influence;\n        heatWeightedSum += influence * p.heat;\n      }\n\n      if (influenceSum <= threshold) continue;\n\n      const heat = heatWeightedSum / influenceSum;\n      const { r, g, b } = heatToRGB(heat);\n\n      setPixelBlock(data, canvasWidth, canvasHeight, x, y, pixelSize, r, g, b);\n    }\n  }\n}\n\nfunction renderFrame(\n  canvas: HTMLCanvasElement,\n  particles: Particle[],\n  imageRef: React.MutableRefObject<ImageData | null>\n) {\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) return;\n\n  ctx.fillStyle = \"#000\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  const imageData = ensureImageData(ctx, imageRef, canvas.width, canvas.height);\n  drawMetaballs(imageData, particles, canvas.width, canvas.height);\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// --- Component ---\nexport default function LavaLamp(): ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const rafRef = useRef<number | null>(null);\n\n  const particlesRef = useRef<Particle[]>([]);\n  const imageRef = useRef<ImageData | null>(null);\n  const neighborCountsRef = useRef<Uint16Array>(new Uint16Array(0));\n  const particleCountRef = useRef<number | null>(null);\n\n  const gameMusic = useMemo(() => new PersonalAudio(musicAudioNoise, true), []);\n  const clickSound = useMemo(() => new PersonalAudio(clickAudioNoise, false), []);\n\n  const [hasStarted, setHasStarted] = useState(false);\n\n  const pointerDownRef = useRef(false);\n  const pointerPosRef = useRef<Vec2>({ x: 0, y: 0 });\n\n  // Speed slider state\n  const defaultSpeedIdx = useMemo(\n    () => speedToNearestIndex(SPEED.DEFAULT),\n    []\n  );\n  const [speedIdx, setSpeedIdx] = useState<number>(defaultSpeedIdx);\n  const speedRef = useRef<number>(SPEED.DEFAULT);\n\n  useEffect(() => {\n    speedRef.current = indexToSpeed(speedIdx);\n  }, [speedIdx]);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  // add near your other callbacks (uses your existing click sound)\n  const toggleMenu = useCallback(() => {\n    setMenuOpen((v) => !v);\n  }, []);\n\n  const [volume, setVolume] = useState(1.0);\n\n  useEffect(() => {\n    gameMusic.volume = volume;\n  }, [volume, gameMusic]);\n\n  const initializeParticlesOnce = useCallback(() => {\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n\n    if (particleCountRef.current === null) {\n      particleCountRef.current = computeParticleCount(w, h);\n    }\n\n    const count = particleCountRef.current;\n    particlesRef.current = createParticles(w, h, count);\n    neighborCountsRef.current = new Uint16Array(count);\n  }, []);\n\n  const saveMusicPosition = useCallback(() => {\n    writeSavedMusicTimeSeconds(gameMusic.currentTime ?? 0);\n  }, [gameMusic]);\n\n  useEffect(() => {\n    if (!hasStarted) return;\n\n    const tick = () => saveMusicPosition();\n    const id = window.setInterval(tick, 1000);\n\n    const onPageHide = () => saveMusicPosition();\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"hidden\") saveMusicPosition();\n    };\n\n    window.addEventListener(\"pagehide\", onPageHide);\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n\n    return () => {\n      window.clearInterval(id);\n      window.removeEventListener(\"pagehide\", onPageHide);\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    };\n  }, [hasStarted, saveMusicPosition]);\n\n  useEffect(() => {\n    return () => {\n      saveMusicPosition();\n\n      gameMusic.pause();\n      gameMusic.volume = 0;\n      gameMusic.reset();\n\n      clickSound.pause();\n      clickSound.volume = 0;\n      clickSound.reset();\n    };\n  }, [gameMusic, clickSound, saveMusicPosition]);\n\n  const update = useCallback(() => {\n    stepSimulationOnePairPass(\n      particlesRef.current,\n      window.innerWidth,\n      window.innerHeight,\n      pointerDownRef.current,\n      pointerPosRef.current,\n      neighborCountsRef.current,\n      speedRef.current\n    );\n  }, []);\n\n  const draw = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    renderFrame(canvas, particlesRef.current, imageRef);\n  }, []);\n\n  const animate = useCallback(() => {\n    // runs forever after Start (speed 0 freezes motion)\n    update();\n    draw();\n    rafRef.current = requestAnimationFrame(animate);\n  }, [update, draw]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n      setCanvasToWindow(canvas);\n      imageRef.current = null;\n\n      if (hasStarted) draw();\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [draw, hasStarted]);\n\n  // Pointer handling\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const toLocal = (e: PointerEvent): Vec2 => {\n      const rect = canvas.getBoundingClientRect();\n      return { x: e.clientX - rect.left, y: e.clientY - rect.top };\n    };\n\n    const onDown = (e: PointerEvent) => {\n      pointerDownRef.current = true;\n      pointerPosRef.current = toLocal(e);\n    };\n    const onMove = (e: PointerEvent) => {\n      pointerPosRef.current = toLocal(e);\n    };\n    const onUp = () => {\n      pointerDownRef.current = false;\n    };\n\n    canvas.addEventListener(\"pointerdown\", onDown);\n    window.addEventListener(\"pointermove\", onMove);\n    window.addEventListener(\"pointerup\", onUp);\n    window.addEventListener(\"pointercancel\", onUp);\n\n    return () => {\n      canvas.removeEventListener(\"pointerdown\", onDown);\n      window.removeEventListener(\"pointermove\", onMove);\n      window.removeEventListener(\"pointerup\", onUp);\n      window.removeEventListener(\"pointercancel\", onUp);\n    };\n  }, []);\n\n  const playClick = useCallback(() => {\n    try {\n      clickSound.volume = 1.0;\n      clickSound.currentTime = 0;\n      clickSound.reset();\n      clickSound.play();\n    } catch {\n      // ignore\n    }\n  }, [clickSound]);\n\n  const resumeMusicFromSavedTime = useCallback(() => {\n    const t = readSavedMusicTimeSeconds();\n    try {\n      const duration = (gameMusic as any).duration as number | undefined;\n      if (typeof duration === \"number\" && Number.isFinite(duration) && duration > 0) {\n        gameMusic.currentTime = t % duration;\n      } else {\n        gameMusic.currentTime = t;\n      }\n    } catch {\n      // ignore\n    }\n  }, [gameMusic]);\n\n  const startLamp = useCallback(() => {\n    playClick();\n\n    if (!hasStarted) {\n      setHasStarted(true);\n      initializeParticlesOnce();\n      requestAnimationFrame(() => draw());\n\n      // start RAF\n      rafRef.current = requestAnimationFrame(animate);\n    }\n\n    // gesture-driven: resume from last saved time, then play\n    resumeMusicFromSavedTime();\n    gameMusic.volume = 1.0;\n    gameMusic.play();\n  }, [\n    animate,\n    draw,\n    gameMusic,\n    hasStarted,\n    initializeParticlesOnce,\n    playClick,\n    resumeMusicFromSavedTime,\n  ]);\n\n  const initialCanvasSize = useMemo(\n    () => ({ w: window.innerWidth, h: window.innerHeight }),\n    []\n  );\n\n  // Labels aligned by pixel position, not grid cells (fixes mismatch)\n  const sliderWrapRef = useRef<HTMLDivElement | null>(null);\n\n  return (\n    <div className=\"lava-lamp-container\">\n      <canvas\n        ref={canvasRef}\n        className=\"lava-lamp-canvas\"\n        width={initialCanvasSize.w}\n        height={initialCanvasSize.h}\n      />\n\n      {!hasStarted ? (\n        <div className=\"lava-lamp-start-overlay\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-start\"\n            onClick={startLamp}\n            aria-label=\"Start lava lamp\"\n          >\n            START\n          </button>\n        </div>\n      ) : (\n        <div className=\"lava-lamp-controls\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-menu-toggle\"\n            onClick={toggleMenu}\n            aria-label={menuOpen ? \"Hide menu\" : \"Show menu\"}\n            aria-pressed={menuOpen}\n          >\n            {menuOpen ? \"✕\" : \"☰\"}\n          </button>\n\n          {menuOpen && (\n            <div className=\"lava-lamp-menu\">\n              {/* Speed */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">\n                    speed: {speedIdx}\n                  </div>\n                </div>\n\n                <div ref={sliderWrapRef} className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={SPEED.STEPS}\n                    step={1}\n                    value={speedIdx}\n                    onChange={(e) =>\n                      setSpeedIdx(clampInt(Number(e.target.value), 0, SPEED.STEPS))\n                    }\n                    aria-label=\"Simulation speed\"\n                  />\n                </div>\n              </div>\n\n              {/* Volume */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">\n                    volume: {Math.round(volume * 10)}\n                  </div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={1}\n                    step={0.1}\n                    value={volume}\n                    onChange={(e) => setVolume(Number(e.target.value))}\n                    aria-label=\"Music volume\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  isPlaying = () => {\n    return this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["SIM","GRAVITY","BUOYANCY","FRICTION","HEAT_RATE","COOL_RATE","HEAT_CONDUCTION","HEAT_SOURCE_DISTANCE","COHESION_RADIUS","COHESION_STRENGTH","MOUSE_HEAT_RADIUS","RENDER","PARTICLE_RADIUS","PIXEL_SIZE","THRESHOLD","CLUMPS","COUNT","RADIUS","TOP_HALF_PROB","BASELINE","WIDTH","HEIGHT","PARTICLES","SPEED","MIN","MAX","DEFAULT","STEPS","MUSIC_TIME_KEY","indexToSpeed","idx","steps","t","minLog","Math","log","maxLog","exp","a","b","lerp","clamp01","v","hypot2","dx","dy","hypot","randInCircle","radius","angle","random","PI","r","x","cos","y","sin","bounceInBounds","p","width","height","vx","vy","stepSimulationOnePairPass","particles","pointerDown","pointerPos","neighborCounts","timeScale","dt","max","min","i","length","applyBuoyancyAndGravity","applyFriction","integrate","applyPointerHeat","p1","j","p2","d","applyCohesionImpulse","applyHeatConduction","applyBottomHeatOrAirCooling","heat","clampAllToBounds","buoyancy","f","pow","intensity","force","invD","fx","fy","conduction","neighborCount","distanceFromBottom","airExposure","heatToRGB","g","round","setPixelBlock","data","canvasWidth","canvasHeight","size","py","yy","rowBase","px","xx","influenceAtPoint","r2","renderFrame","canvas","imageRef","ctx","getContext","fillStyle","fillRect","imageData","img","current","createImageData","ensureImageData","fill","pixelSize","threshold","influenceSum","heatWeightedSum","influence","drawMetaballs","putImageData","LavaLamp","canvasRef","useRef","rafRef","particlesRef","neighborCountsRef","Uint16Array","particleCountRef","gameMusic","useMemo","PersonalAudio","musicAudioNoise","clickSound","clickAudioNoise","hasStarted","setHasStarted","useState","pointerDownRef","pointerPosRef","defaultSpeedIdx","speed","best","bestErr","Infinity","target","s","err","abs","speedToNearestIndex","speedIdx","setSpeedIdx","speedRef","useEffect","menuOpen","setMenuOpen","toggleMenu","useCallback","volume","setVolume","initializeParticlesOnce","w","window","innerWidth","h","innerHeight","baselineArea","currentArea","density","scaled","computeParticleCount","count","particlesPerClump","floor","centerX","centerY","clumpHeat","offset","push","createParticles","saveMusicPosition","_gameMusic$currentTim","seconds","Number","isFinite","localStorage","setItem","String","_unused2","writeSavedMusicTimeSeconds","currentTime","id","setInterval","tick","onPageHide","onVisibilityChange","document","visibilityState","addEventListener","clearInterval","removeEventListener","pause","reset","update","draw","animate","requestAnimationFrame","handleResize","setCanvasToWindow","toLocal","e","rect","getBoundingClientRect","clientX","left","clientY","top","onDown","onMove","onUp","playClick","play","_unused3","resumeMusicFromSavedTime","raw","getItem","_unused","readSavedMusicTimeSeconds","duration","_unused4","startLamp","initialCanvasSize","sliderWrapRef","_jsxs","className","children","_jsx","ref","type","onClick","step","value","onChange","lo","hi","Audio","constructor","src","loop","arguments","undefined","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","readyState","isPlaying","timeLeft"],"sourceRoot":""}