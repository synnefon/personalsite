"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[585],{8717:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(5043);const r=n.p+"static/media/guitar.7c3177d2baeb887643cc.mp3",s=n.p+"static/media/click.1c87678ffc4ae6835e44.mp3";const o=n.p+"static/media/power.632cc1e66922cf3fa35d93370ea84178.svg";var l=n(7375);class c{constructor(){this.audioContext=null,this.analyser=null,this.dataArray=null,this.connected=!1}connect(e){if(this.connected)return!0;try{this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256,this.analyser.smoothingTimeConstant=.95;return this.audioContext.createMediaElementSource(e).connect(this.analyser).connect(this.audioContext.destination),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.connected=!0,!0}catch(t){return console.warn("[AudioAmplitude] Failed to connect analyser:",t),!1}}getAmplitude(){if(!this.analyser||!this.dataArray)return 0;try{this.analyser.getByteTimeDomainData(this.dataArray);let e=0;for(let n=0;n<this.dataArray.length;n++){const t=(this.dataArray[n]-128)/128;e+=t*t}const t=Math.sqrt(e/this.dataArray.length);return Math.min(1,3*t)}catch(e){return console.warn("[AudioAmplitude] Error reading amplitude:",e),0}}getWaveformBars(e){if(!this.analyser||!this.dataArray)return new Array(e).fill(0);try{this.analyser.getByteTimeDomainData(this.dataArray);const t=[],n=Math.floor(this.dataArray.length/e);for(let a=0;a<e;a++){const e=a*n,r=Math.abs((this.dataArray[e]-128)/128);t.push(Math.min(1,1.2*r))}return t}catch(t){return console.warn("[AudioAmplitude] Error reading waveform:",t),new Array(e).fill(0)}}resume(){this.audioContext&&"suspended"===this.audioContext.state&&this.audioContext.resume().catch((e=>{console.warn("[AudioAmplitude] Failed to resume audio context:",e)}))}disconnect(){this.audioContext&&(this.audioContext.close().catch((()=>{})),this.audioContext=null),this.analyser=null,this.dataArray=null,this.connected=!1}isConnected(){return this.connected}}const i=(()=>{const e=navigator.userAgent||navigator.vendor||window.opera||"",t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),n="ontouchstart"in window||navigator.maxTouchPoints>0,a=window.innerWidth<=500;return t||n&&a})(),u={REDWOOD:"redwood",KEXP:"kexp"},d="#ffdd00",h="#ff5500",m={GRAVITY:.01,BUOYANCY:.04,FRICTION:.98,HEAT_RATE:.005,COOL_RATE:.0017,HEAT_CONDUCTION:.002,HEAT_SOURCE_DISTANCE:45,COHESION_RADIUS:25,COHESION_STRENGTH:.0035,MOUSE_HEAT_RADIUS:100},f={PARTICLE_RADIUS:10,THRESHOLD:.8};const p={COUNT:15,RADIUS:i?30:50,TOP_HALF_PROB:.3},v=i?54e-5:61e-5,y=2e3,w={MIN:0,MAX:5,DEFAULT:.25,STEPS:10},x=1e3/60,g=5,E="lava-lamp-music-time";function b(e){const t=e.trim().replace("#","");if(3===t.length){return{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}}if(6===t.length){return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16)}}return{r:255,g:221,b:0}}function A(e,t,n){const a=t*Math.min(n,1-n),r=t=>{const r=(t+e/30)%12,s=n-a*Math.max(Math.min(r-3,9-r,1),-1);return Math.round(255*s).toString(16).padStart(2,"0")};return"#".concat(r(0)).concat(r(8)).concat(r(4))}function S(e){const t=b(e),n=t.r/255,a=t.g/255,r=t.b/255,s=Math.max(n,a,r),o=s-Math.min(n,a,r);if(0===o)return 0;let l=0;return l=s===n?(a-r)/o%6:s===a?(r-n)/o+2:(n-a)/o+4,l=Math.round(60*l),l<0&&(l+=360),l}function N(e,t,n){const a=e+(t-e)*n;return a<0?0:a>255?255:Math.round(a)}function C(e,t,n,a){return a<<24|n<<16|t<<8|e}function T(e,t){const n=b(e),a=b(t),r=new Uint32Array(256);for(let s=0;s<256;s++){const e=s/255,t=N(n.r,a.r,e),o=N(n.g,a.g,e),l=N(n.b,a.b,e);r[s]=C(t,o,l,255)}return r}function M(e,t,n){return n*e.cols+t}function R(e){return e<0?0:e>1?1:e}function j(e){const t=Math.random()*Math.PI*2,n=Math.random()*e;return{x:Math.cos(t)*n,y:Math.sin(t)*n}}function L(e,t,n){e.x<0?(e.x=0,e.vx*=-.5):e.x>t&&(e.x=t,e.vx*=-.5),e.y<0?(e.y=0,e.vy*=-.5):e.y>n&&(e.y=n,e.vy*=-.5)}function I(e,t,n){for(let a=0;a<e.length;a++)L(e[a],t,n)}function k(e,t){const n=e.heat*e.heat*m.BUOYANCY;e.vy+=(m.GRAVITY-n)*t}function O(e,t){const n=Math.pow(m.FRICTION,t);e.vx*=n,e.vy*=n}function P(e,t){e.x+=e.vx*t,e.y+=e.vy*t}function D(e,t,n){const a=e.x-t.x,r=e.y-t.y,s=a*a+r*r,o=m.MOUSE_HEAT_RADIUS;if(s<o*o){const t=1-Math.sqrt(s)*(1/o);e.heat+=2*m.HEAT_RATE*t*n}}function _(e,t,n,a,r,s){const o=m.COHESION_STRENGTH*(1-r*(1/m.COHESION_RADIUS)),l=1/r,c=n*l*o*s,i=a*l*o*s;e.vx+=c,e.vy+=i,t.vx-=c,t.vy-=i}function U(e,t,n){const a=(e.heat-t.heat)*m.HEAT_CONDUCTION*n;e.heat-=a,t.heat+=a}function F(e,t,n,a){const r=t-e.y;if(r<m.HEAT_SOURCE_DISTANCE){const t=1-r*(1/m.HEAT_SOURCE_DISTANCE);return void(e.heat+=m.HEAT_RATE*t*a)}const s=1-(n<8?n:8)/8;e.heat-=m.COOL_RATE*(.2+.8*s)*a}function H(e,t,n,a,r,s,o){let l=0,c=0;const i=Math.floor(e*o),u=Math.floor(t*o),d=Math.max(0,i-1),h=Math.min(a.cols-1,i+1),m=Math.max(0,u-1),f=Math.min(a.rows-1,u+1);for(let p=m;p<=f;p++)for(let o=d;o<=h;o++){let i=a.heads[M(a,o,p)];for(;-1!==i;){const o=n[i],u=e-o.x,d=t-o.y,h=u*u+d*d;if(h<s){const e=r/(h+1);l+=e,c+=e*o.heat}i=a.next[i]}}return{influenceSum:l,heatWeightedSum:c}}function W(e,t,n,a,r,s,o){const l=r;for(let c=0;c<a;c++){const r=n+c;if(r>=s)break;let i=r*l+t;const u=Math.min(t+a,l);for(let n=t;n<u;n++)e[i++]=o}}function q(e,t,n,a,r,s){const o=function(e,t,n,a){const r=t.current;return r&&r.width===n&&r.height===a||(t.current=e.createImageData(n,a)),t.current}(e,a,t.width,t.height),l=function(e,t){const n=e*t,a=Math.sqrt(n/12889);return Math.max(6,Math.min(24,Math.round(a)))}(t.width,t.height);s?function(e,t,n,a,r,s){const o=f.PIXEL_SIZE,l=f.THRESHOLD,c=f.PARTICLE_RADIUS*f.PARTICLE_RADIUS,i=3*f.PARTICLE_RADIUS,u=i*i,d=new Uint32Array(e.data.buffer),h=C(0,0,0,255);d.fill(h);const m=1/s.cellSize;for(let f=0;f<a;f+=o)for(let e=0;e<n;e+=o){const{influenceSum:i,heatWeightedSum:h}=H(e,f,t,s,c,u,m);if(i<=l)continue;const p=h/i;W(d,e,f,o,n,a,r[p<=0?0:p>=1?255:255*p|0])}}(o,n,t.width,t.height,r,s):function(e,t,n,a,r,s){const o=f.THRESHOLD,l=f.PARTICLE_RADIUS*f.PARTICLE_RADIUS,c=new Uint32Array(e.data.buffer),i=C(0,0,0,255);c.fill(i);const u=n;for(let d=0;d<a;d+=s)for(let e=0;e<n;e+=s){let n=0,i=0;for(let a=0;a<t.length;a++){const r=t[a],s=e-r.x,o=d-r.y,c=l/(s*s+o*o+1);n+=c,i+=c*r.heat}if(n<=o)continue;const h=i/n,m=r[h<=0?0:h>=1?255:255*h|0];for(let t=0;t<s;t++){const n=d+t;if(n>=a)break;let r=n*u+e;const o=Math.min(e+s,u);for(let t=e;t<o;t++)c[r++]=m}}}(o,n,t.width,t.height,r,l),e.putImageData(o,0,0)}function X(e){if(e<=0)return 0;const t=w.STEPS;if(e>=t)return w.MAX;const n=e/t,a=.25/w.MAX,r=Math.log(a),s=Math.log(w.MAX);return Math.exp(function(e,t,n){return e+(t-e)*n}(r,s,n))}var B=n(579);const z={[u.REDWOOD]:{label:"redwood meditation",url:r},[u.KEXP]:{label:"kexp",url:"https://kexp.streamguys1.com/kexp160.aac"}};function K(){const e=(0,a.useRef)(null),t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)([]),i=(0,a.useRef)(null),f=(0,a.useRef)(new Uint16Array(0)),b=(0,a.useRef)(null),N=(0,a.useRef)(null),C=(0,a.useRef)({w:1,h:1}),[H,W]=(0,a.useState)(u.KEXP),K=(0,a.useMemo)((()=>{const e=new l.D(z[u.KEXP].url,!0);return e.preload="auto",e}),[]),Y=(0,a.useMemo)((()=>new l.D(s,!1)),[]),[G,V]=(0,a.useState)(!1),Z=(0,a.useRef)(!1),J=(0,a.useRef)({x:0,y:0}),Q=(0,a.useRef)(null),$=(0,a.useRef)(new Array(10).fill(0)),[ee,te]=(0,a.useState)(new Array(10).fill(0)),ne=(0,a.useRef)(0),ae=(0,a.useMemo)((()=>function(e){if(e<=0)return 0;const t=w.STEPS-1;let n=1,a=1/0;const r=Math.log(e);for(let s=1;s<=t;s++){const e=X(s),t=Math.abs(Math.log(e)-r);t<a&&(a=t,n=s)}return n}(w.DEFAULT)),[]),[re,se]=(0,a.useState)(ae),oe=(0,a.useRef)(w.DEFAULT);(0,a.useEffect)((()=>{oe.current=X(re)}),[re]);const[le,ce]=(0,a.useState)(!1),ie=(0,a.useCallback)((()=>ce((e=>!e))),[]),ue=(0,a.useRef)(null),[de,he]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const t=()=>{const t=!!document.fullscreenElement;he(t),t?document.body.classList.add("lava-lamp-fullscreen"):document.body.classList.remove("lava-lamp-fullscreen");const n=e.current;if(!n)return;const a=window.innerWidth,s=window.innerHeight;n.width=a,n.height=s,C.current={w:a,h:s},i.current=null,r.current&&I(r.current,a,s)};return document.addEventListener("fullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t),document.body.classList.remove("lava-lamp-fullscreen")}}),[]);const me=(0,a.useCallback)((()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch((e=>{console.error("Error attempting to enable fullscreen:",e)}))}),[]);(0,a.useEffect)((()=>{if(!le)return;const e=e=>{ue.current&&!ue.current.contains(e.target)&&ce(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[le]);const[fe,pe]=(0,a.useState)(1);(0,a.useEffect)((()=>{K.volume=fe}),[fe,K]);const[ve,ye]=(0,a.useState)(null),[we,xe]=(0,a.useState)(!0),ge=(0,a.useRef)(null),Ee=(0,a.useRef)(null),be=(0,a.useRef)(null),[Ae,Se]=(0,a.useState)(!1),[Ne,Ce]=(0,a.useState)(!1),[Te,Me]=(0,a.useState)(!1),Re=(0,a.useRef)(!0);(0,a.useEffect)((()=>{if(Re.current)return void(Re.current=!1);const e=z[H],t=K.isPlaying();if(t&&K.pause(),K.src=e.url,K.load(),t){const e=()=>{K.play().catch((()=>{})),K.removeEventListener("canplaythrough",e)};K.addEventListener("canplaythrough",e,{once:!0})}}),[H,K]),(0,a.useEffect)((()=>{if(!G||H!==u.KEXP)return void ye(null);const e=async()=>{try{var e;const t=await fetch("https://api.kexp.org/v2/plays/?limit=5"),n=null===(e=(await t.json()).results)||void 0===e?void 0:e[0];if(!n)return void console.log("[KEXP] No plays found");if("airbreak"===n.play_type)ye({song:"airbreak",artist:"",album:"",isAirbreak:!0});else if("trackplay"===n.play_type){const e={song:(n.song||"unknown track").toLowerCase(),artist:(n.artist||"unknown artist").toLowerCase(),album:(n.album||"unknown album").toLowerCase(),isAirbreak:!1};ye(e)}}catch(t){console.log("[KEXP] Fetch error:",t)}};e();const t=setInterval(e,5e3);return()=>clearInterval(t)}),[G,H]),(0,a.useEffect)((()=>{const e=(e,t)=>t/30,t=()=>{if(ge.current){const t=ge.current.querySelector(".scroll-wrapper"),n=ge.current.clientWidth,a=t&&t.scrollWidth>n;if(Se(!!a),a&&t){const n=e(0,t.scrollWidth),a=(t.scrollWidth,1);ge.current.style.setProperty("--scroll-duration","".concat(n,"s")),ge.current.style.setProperty("--second-copy-delay","".concat(a)),ge.current.classList.add("overflowing")}else ge.current.classList.remove("overflowing")}if(Ee.current){const t=Ee.current.querySelector(".scroll-wrapper"),n=Ee.current.clientWidth,a=t&&t.scrollWidth>n;if(Ce(!!a),a&&t){const n=e(0,t.scrollWidth),a=(t.scrollWidth,1);Ee.current.style.setProperty("--scroll-duration","".concat(n,"s")),Ee.current.style.setProperty("--second-copy-delay","".concat(a)),Ee.current.classList.add("overflowing")}else Ee.current.classList.remove("overflowing")}if(be.current){const t=be.current.querySelector(".scroll-wrapper"),n=be.current.clientWidth,a=t&&t.scrollWidth>n;if(Me(!!a),a&&t){const n=e(0,t.scrollWidth),a=(t.scrollWidth,1);be.current.style.setProperty("--scroll-duration","".concat(n,"s")),be.current.style.setProperty("--second-copy-delay","".concat(a)),be.current.classList.add("overflowing")}else be.current.classList.remove("overflowing")}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[ve,we]);const je=(0,a.useRef)(h),Le=(0,a.useRef)(d),[Ie,ke]=(0,a.useState)(h),[Oe,Pe]=(0,a.useState)(d),[De,_e]=(0,a.useState)(!1),Ue=(0,a.useRef)(0),Fe=(0,a.useRef)(0),He=(0,a.useRef)(T(h,d));(0,a.useEffect)((()=>{je.current=Ie,Le.current=Oe,He.current=T(Ie,Oe)}),[Ie,Oe,G]),(0,a.useEffect)((()=>{const n=e.current;if(!n)return;const a=window.innerWidth,r=window.innerHeight;C.current={w:a,h:r},n.width=a,n.height=r,t.current=n.getContext("2d"),i.current=null}),[]);const We=(0,a.useCallback)((()=>{const{w:e,h:t}=C.current;null===b.current&&(b.current=function(e,t){const n=e*t,a=Math.round(n*v);return Math.min(a,y)}(e,t));const n=b.current;r.current=function(e,t,n){const a=[],r=Math.floor(n/p.COUNT);for(let s=0;s<p.COUNT;s++){const n=Math.random()*e,s=Math.random()<p.TOP_HALF_PROB?Math.random()*t*.5:.5*t+Math.random()*t*.5,o=Math.random();for(let e=0;e<r;e++){const e=j(p.RADIUS);a.push({x:n+e.x,y:s+e.y,vx:0,vy:0,heat:o})}}for(;a.length<n;)a.push({x:Math.random()*e,y:Math.random()*t,vx:0,vy:0,heat:0});return a}(e,t,n),f.current=new Uint16Array(n),function(e,t,n,a,r){const s=Math.max(1,Math.ceil(t/r)),o=Math.max(1,Math.ceil(n/r)),l=s*o,c=e.current;c&&c.cols===s&&c.rows===o&&c.cellSize===r&&c.next.length===a&&c.heads.length===l||(e.current={cellSize:r,cols:s,rows:o,heads:new Int32Array(l),next:new Int32Array(a)})}(N,e,t,n,m.COHESION_RADIUS)}),[]),qe=(0,a.useCallback)((()=>{var e;!function(e){try{if(!Number.isFinite(e)||e<0)return;localStorage.setItem(E,String(e))}catch(t){}}(null!==(e=K.currentTime)&&void 0!==e?e:0)}),[K]);(0,a.useEffect)((()=>{if(!G)return;const e=window.setInterval((()=>qe()),1e3),t=()=>qe(),n=()=>{"hidden"===document.visibilityState&&qe()};return window.addEventListener("pagehide",t),document.addEventListener("visibilitychange",n),()=>{window.clearInterval(e),window.removeEventListener("pagehide",t),document.removeEventListener("visibilitychange",n)}}),[G,qe]),(0,a.useEffect)((()=>()=>{qe(),K.pause(),K.volume=0,K.reset(),Y.pause(),Y.volume=0,Y.reset(),Q.current&&(Q.current.disconnect(),Q.current=null)}),[K,Y,qe]);const Xe=(0,a.useCallback)((()=>{const e=N.current;if(!e)return;const{w:t,h:n}=C.current;!function(e,t,n,a,r,s,o,l){const c=Math.max(0,Math.min(4,o));for(let h=0;h<e.length;h++){const o=e[h];k(o,c),O(o,c),P(o,c),a&&D(o,r,c),s[h]=0,L(o,t,n)}if(0===c){for(let t=0;t<e.length;t++)e[t].heat=R(e[t].heat);return void I(e,t,n)}l.heads.fill(-1);const i=1/l.cellSize;for(let h=0;h<e.length;h++){const t=e[h];let n=t.x*i|0,a=t.y*i|0;n<0?n=0:n>=l.cols&&(n=l.cols-1),a<0?a=0:a>=l.rows&&(a=l.rows-1);const r=M(l,n,a);l.next[h]=l.heads[r],l.heads[r]=h}const u=m.COHESION_RADIUS,d=u*u;for(let h=0;h<e.length;h++){const t=e[h];let n=t.x*i|0,a=t.y*i|0;n<0?n=0:n>=l.cols&&(n=l.cols-1),a<0?a=0:a>=l.rows&&(a=l.rows-1);const r=n>0?n-1:n,o=n+1<l.cols?n+1:n,u=a>0?a-1:a,m=a+1<l.rows?a+1:a;for(let i=u;i<=m;i++)for(let n=r;n<=o;n++){let a=l.heads[M(l,n,i)];for(;-1!==a;){if(a>h){const n=e[a],r=n.x-t.x,o=n.y-t.y,l=r*r+o*o;l>0&&l<d&&(s[h]++,s[a]++,_(t,n,r,o,Math.sqrt(l),c),U(t,n,c))}a=l.next[a]}}}for(let h=0;h<e.length;h++){const t=e[h];F(t,n,s[h],c),t.heat=R(t.heat)}I(e,t,n)}(r.current,t,n,Z.current,J.current,f.current,oe.current,e)}),[]),Be=(0,a.useCallback)((()=>{const n=e.current,a=t.current;n&&a&&q(a,n,r.current,i,He.current)}),[]),ze=(0,a.useRef)({last:0,acc:0}),Ke=(0,a.useCallback)((t=>{const a=ze.current;0===a.last&&(a.last=t);const r=t-a.last;a.last=t,a.acc+=Math.min(250,Math.max(0,r));const s=performance.now();let o=0;for(;a.acc>=x&&o<g;)Xe(),a.acc-=x,o++;const l=performance.now();a.acc>=x&&(a.acc=0),Q.current&&($.current=Q.current.getWaveformBars(10),ne.current++,ne.current>=5&&(te($.current),ne.current=0));const c=performance.now();Be();const i=performance.now(),u=performance.now()-frameStart,d=l-s,h=i-c,m=u-d-h,f=perfRef.current;f.frameCount++,f.totalTime+=u,f.physicsTime+=d,f.renderTime+=h,f.otherTime+=m,0===f.lastLogTime&&(f.lastLogTime=t);const p=t-f.lastLogTime;if(p>=1e4){const n=f.totalTime/f.frameCount,a=f.physicsTime/f.frameCount,r=f.renderTime/f.frameCount,s=f.otherTime/f.frameCount,o=f.frameCount/p*1e3,l=a/n*100,c=r/n*100,i=s/n*100,u=e.current,d=(null===u||void 0===u?void 0:u.width)||0,h=(null===u||void 0===u?void 0:u.height)||0,m=d&&h?Math.max(6,Math.min(24,Math.round(Math.sqrt(d*h/12889)))):0;console.log("=== Performance (10s average) ==="),console.log("Screen: ".concat(d,"x").concat(h," (").concat(m,"px chunks)")),console.log("FPS: ".concat(o.toFixed(1))),console.log("Total Frame: ".concat(n.toFixed(2),"ms")),console.log("  Physics: ".concat(a.toFixed(2),"ms (").concat(l.toFixed(1),"%)")),console.log("  Render:  ".concat(r.toFixed(2),"ms (").concat(c.toFixed(1),"%)")),console.log("  Other:   ".concat(s.toFixed(2),"ms (").concat(i.toFixed(1),"%)")),console.log("================================="),f.frameCount=0,f.totalTime=0,f.physicsTime=0,f.renderTime=0,f.otherTime=0,f.lastLogTime=t}n.current=requestAnimationFrame(Ke)}),[Be,Xe]),Ye=(0,a.useRef)(!1);(0,a.useEffect)((()=>{De&&!Ye.current&&(Ue.current=S(Ie),Fe.current=S(Oe)),Ye.current=De}),[De,Ie,Oe]),(0,a.useEffect)((()=>{if(!De)return;let e,t=performance.now();const n=a=>{const r=a-t;t=a;const s=oe.current,o=r/16.67,l=.02*s*o,c=.02*s*o*1.3;Ue.current=(Ue.current+l)%360,Fe.current=(Fe.current+c)%360;const i=A(Ue.current,1,.5),u=A(Fe.current,1,.5);ke(i),Pe(u),e=requestAnimationFrame(n)};return e=requestAnimationFrame(n),()=>cancelAnimationFrame(e)}),[De]),(0,a.useEffect)((()=>{const t=e.current;if(!t)return;const n=e=>{const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},a=e=>{Z.current=!0,J.current=n(e)},r=e=>{J.current=n(e)},s=()=>{Z.current=!1};return t.addEventListener("pointerdown",a),window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),()=>{t.removeEventListener("pointerdown",a),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}),[]);const Ge=(0,a.useCallback)((()=>{try{Y.volume=1,Y.currentTime=0,Y.reset(),Y.play()}catch(e){}}),[Y]),Ve=(0,a.useCallback)((()=>{const e=function(){try{const e=localStorage.getItem(E);if(!e)return 0;const t=Number(e);return Number.isFinite(t)&&t>=0?t:0}catch(e){return 0}}();try{const t=K.duration;"number"===typeof t&&Number.isFinite(t)&&t>0?K.currentTime=e%t:K.currentTime=e}catch(t){}}),[K]),Ze=(0,a.useCallback)((async()=>{if(Ge(),!G&&(V(!0),We(),ze.current={last:0,acc:0},requestAnimationFrame((()=>Be())),n.current=requestAnimationFrame(Ke),!Q.current)){const e=new c;e.connect(K)?(Q.current=e,console.log("[LavaLamp] Audio amplitude analyzer connected")):console.warn("[LavaLamp] Failed to connect audio amplitude analyzer")}if(Q.current&&Q.current.resume(),H!==u.KEXP&&Ve(),K.volume=1,K.readyState<3){K.load();const e=async()=>{try{await K.play()}catch(t){}K.removeEventListener("canplaythrough",e)};K.addEventListener("canplaythrough",e,{once:!0})}else try{await K.play()}catch(e){}}),[Ke,H,Be,K,G,We,Ge,Ve]),Je=(0,a.useMemo)((()=>({w:window.innerWidth,h:window.innerHeight})),[]),Qe=w.STEPS-1;return(0,B.jsxs)("div",{className:"lava-lamp-container",children:[(0,B.jsx)("canvas",{ref:e,className:"lava-lamp-canvas",width:Je.w,height:Je.h}),ve&&(0,B.jsxs)("div",{className:"lava-lamp-now-playing ".concat(we?"expanded":"collapsed"),children:[(0,B.jsx)("button",{type:"button",className:"lava-lamp-now-playing-toggle",onClick:()=>xe(!we),"aria-label":we?"Collapse now playing":"Expand now playing",children:we?"\u203a":"\u2039"}),(0,B.jsxs)("div",{className:"lava-lamp-now-playing-content",children:[(0,B.jsxs)("div",{className:"lava-lamp-now-playing-header",children:[(0,B.jsx)("div",{className:"lava-lamp-now-playing-label",children:"kexp"}),!ve.isAirbreak&&(0,B.jsx)("div",{className:"lava-lamp-soundwave",children:ee.map(((e,t)=>(0,B.jsx)("div",{className:"lava-lamp-soundwave-bar",style:{"--bar-height":e}},t)))})]}),(0,B.jsxs)("div",{ref:ge,className:"lava-lamp-now-playing-song",children:[(0,B.jsx)("span",{className:"scroll-wrapper",children:ve.song}),Ae&&(0,B.jsx)("span",{className:"scroll-wrapper second",children:ve.song})]}),!ve.isAirbreak&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{ref:Ee,className:"lava-lamp-now-playing-artist",children:[(0,B.jsx)("span",{className:"scroll-wrapper",children:ve.artist}),Ne&&(0,B.jsx)("span",{className:"scroll-wrapper second",children:ve.artist})]}),(0,B.jsxs)("div",{ref:be,className:"lava-lamp-now-playing-album",children:[(0,B.jsx)("span",{className:"scroll-wrapper",children:ve.album}),Te&&(0,B.jsx)("span",{className:"scroll-wrapper second",children:ve.album})]})]})]})]}),G?(0,B.jsxs)("div",{className:"lava-lamp-controls",ref:ue,children:[(0,B.jsx)("button",{type:"button",className:"lava-lamp-menu-toggle",onClick:ie,"aria-label":le?"Hide menu":"Show menu","aria-pressed":le,children:le?"\u2715":"\u2630"}),le&&(0,B.jsxs)("div",{className:"lava-lamp-menu",children:[(0,B.jsxs)("div",{className:"lava-lamp-control-block",children:[(0,B.jsx)("div",{className:"lava-lamp-control-header",children:(0,B.jsxs)("div",{className:"lava-lamp-control-title",children:["speed: ",re]})}),(0,B.jsx)("div",{className:"lava-lamp-slider-wrap",children:(0,B.jsx)("input",{className:"lava-lamp-slider",type:"range",min:0,max:Qe,step:1,value:re,onChange:e=>{return se((t=Number(e.target.value),a=Qe,t<(n=0)?n:t>a?a:t));var t,n,a},"aria-label":"Simulation speed"})})]}),(0,B.jsxs)("div",{className:"lava-lamp-control-block",children:[(0,B.jsx)("div",{className:"lava-lamp-control-header",children:(0,B.jsxs)("div",{className:"lava-lamp-control-title",children:["volume: ",Math.round(100*fe),"%"]})}),(0,B.jsx)("div",{className:"lava-lamp-slider-wrap",children:(0,B.jsx)("input",{className:"lava-lamp-slider",type:"range",min:0,max:1,step:.01,value:fe,onChange:e=>pe(Number(e.target.value)),"aria-label":"Music volume"})})]}),(0,B.jsxs)("div",{className:"lava-lamp-control-block",children:[(0,B.jsx)("div",{className:"lava-lamp-control-header",children:(0,B.jsx)("div",{className:"lava-lamp-control-title",children:"audio source"})}),(0,B.jsx)("div",{className:"lava-lamp-slider-wrap",children:(0,B.jsx)("select",{className:"lava-lamp-slider",value:H,onChange:e=>W(e.target.value),"aria-label":"Audio source",children:Object.entries(z).map((e=>{let[t,n]=e;return(0,B.jsx)("option",{value:t,children:n.label},t)}))})})]}),(0,B.jsxs)("div",{className:"lava-lamp-control-block",children:[(0,B.jsx)("div",{className:"lava-lamp-control-header",children:(0,B.jsx)("div",{className:"lava-lamp-control-title",children:"lava colors"})}),(0,B.jsx)("div",{className:"lava-lamp-slider-wrap",style:{marginBottom:"12px"},children:(0,B.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,B.jsx)("input",{type:"checkbox",className:"lava-lamp-checkbox",checked:De,onChange:e=>_e(e.target.checked)}),(0,B.jsx)("span",{style:{fontSize:"13px",opacity:.9},children:"rainbow drift mode"})]})}),(0,B.jsxs)("div",{className:"lava-lamp-color-row",children:[(0,B.jsxs)("label",{className:"lava-lamp-color-label",children:["hot",(0,B.jsx)("input",{className:"lava-lamp-color-input",type:"color",value:Oe,onChange:e=>{Pe(e.target.value),_e(!1)},disabled:De,"aria-label":"Lava high color"})]}),(0,B.jsxs)("label",{className:"lava-lamp-color-label",children:["cool",(0,B.jsx)("input",{className:"lava-lamp-color-input",type:"color",value:Ie,onChange:e=>{ke(e.target.value),_e(!1)},disabled:De,"aria-label":"Lava low color"})]}),(0,B.jsx)("button",{type:"button",className:"lava-lamp-color-reset",onClick:()=>{ke(h),Pe(d),_e(!1)},disabled:De,children:"reset"})]})]}),(0,B.jsx)("div",{className:"lava-lamp-control-block",children:(0,B.jsx)("div",{className:"lava-lamp-slider-wrap",children:(0,B.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,B.jsx)("input",{type:"checkbox",className:"lava-lamp-checkbox",checked:de,onChange:me}),(0,B.jsx)("span",{style:{fontSize:"13px",opacity:.9},children:"fullscreen mode"})]})})}),(0,B.jsx)("div",{className:"lava-lamp-control-block",children:(0,B.jsxs)("button",{type:"button",className:"lava-lamp-power-off",onClick:()=>window.location.reload(),"aria-label":"Power off",children:[(0,B.jsx)("img",{src:o,alt:"Power off",className:"lava-lamp-power-off-icon"}),(0,B.jsx)("span",{children:"power off"})]})})]})]}):(0,B.jsx)("div",{className:"lava-lamp-start-overlay",children:(0,B.jsx)("button",{type:"button",className:"lava-lamp-start",onClick:Ze,"aria-label":"Start lava lamp radio",children:(0,B.jsx)("img",{src:o,alt:"Power",className:"lava-lamp-start-icon"})})})]})}},7375:(e,t,n)=>{n.d(t,{D:()=>a});class a extends Audio{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(e),this.isPlayingSrc=e=>{var t;return(null===(t=this.src)||void 0===t?void 0:t.includes(e))&&this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2},this.isPlaying=()=>this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2,this.timeLeft=()=>this.duration-this.currentTime,this.reset=()=>{this.pause(),this.currentTime=0},this.loop=t,this.crossOrigin="anonymous"}}}}]);
//# sourceMappingURL=585.39fa2348.chunk.js.map