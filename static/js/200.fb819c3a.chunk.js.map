{"version":3,"file":"static/js/200.fb819c3a.chunk.js","mappings":"4TAeA,MAAMA,EAAe,UACfC,EAAc,UAsBdC,EAAM,CACVC,QAAS,IACTC,SAAU,IACVC,SAAU,IAEVC,UAAW,KACXC,UAAW,MACXC,gBAAiB,KAEjBC,qBAAsB,GAEtBC,gBAAiB,GACjBC,kBAAmB,MAEnBC,kBAAmB,KAGfC,EAAS,CACbC,gBAAiB,GACjBC,WAAY,EACZC,UAAW,IAGPC,EAAS,CACbC,MAAO,GACPC,OAAQ,GACRC,cAAe,IAIXC,EAAW,CACfC,MAAO,KACPC,OAAQ,KACRC,UAAW,MAIPC,EAAQ,CACZC,IAAK,EACLC,IAAK,EACLC,QAAS,IACTC,MAAO,IAKHC,EAAW,IADC,GAEZC,EAAoB,EAGpBC,EAAiB,4BAGvB,SAASC,EAAQC,GACf,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACjC,CAUA,SAASC,EAAQC,EAAWC,EAAWC,GACrC,MAAMJ,EAAIE,GAAKC,EAAID,GAAKE,EACxB,OAAOJ,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMK,KAAKC,MAAMN,EAChD,CAEA,SAASO,EAAaC,GACpB,MAAMC,EAAQJ,KAAKK,SAAWL,KAAKM,GAAK,EAClCC,EAAIP,KAAKK,SAAWF,EAC1B,MAAO,CAAEK,EAAGR,KAAKS,IAAIL,GAASG,EAAGG,EAAGV,KAAKW,IAAIP,GAASG,EACxD,CAEA,SAASK,EAAeC,EAAaC,EAAeC,GAC9CF,EAAEL,EAAI,GACRK,EAAEL,EAAI,EACNK,EAAEG,KAAO,IACAH,EAAEL,EAAIM,IACfD,EAAEL,EAAIM,EACND,EAAEG,KAAO,IAGPH,EAAEH,EAAI,GACRG,EAAEH,EAAI,EACNG,EAAEI,KAAO,IACAJ,EAAEH,EAAIK,IACfF,EAAEH,EAAIK,EACNF,EAAEI,KAAO,GAEb,CAEA,SAASC,EAAiBC,EAAuBL,EAAeC,GAC9D,IAAK,IAAIK,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IACpCR,EAAeO,EAAUC,GAAIN,EAAOC,EAExC,CAiCA,SAASO,EAAaC,GACpB,GAAIA,GAAO,EAAG,OAAO,EAErB,MAAMC,EAAQtC,EAAMI,MACpB,GAAIiC,GAAOC,EAAO,OAAOtC,EAAME,IAG/B,MAAMW,EAAIwB,EAAMC,EAIVC,EAAeC,IAAmCxC,EAAME,IAExDuC,EAAS3B,KAAK4B,IAAIH,GAClBI,EAAS7B,KAAK4B,IAAI1C,EAAME,KAE9B,OAAOY,KAAK8B,IAtFd,SAAcjC,EAAWC,EAAWC,GAClC,OAAOF,GAAKC,EAAID,GAAKE,CACvB,CAoFkBgC,CAAKJ,EAAQE,EAAQ9B,GACvC,CAwBA,SAASiC,EAASC,GAChB,MAAMC,EAAID,EAAIE,OAAOC,QAAQ,IAAK,IAClC,GAAiB,IAAbF,EAAEb,OAAc,CAIlB,MAAO,CAAEd,EAHC8B,SAASH,EAAE,GAAKA,EAAE,GAAI,IAGpBI,EAFFD,SAASH,EAAE,GAAKA,EAAE,GAAI,IAEjBpC,EADLuC,SAASH,EAAE,GAAKA,EAAE,GAAI,IAElC,CACA,GAAiB,IAAbA,EAAEb,OAAc,CAIlB,MAAO,CAAEd,EAHC8B,SAASH,EAAEK,MAAM,EAAG,GAAI,IAGtBD,EAFFD,SAASH,EAAEK,MAAM,EAAG,GAAI,IAEnBzC,EADLuC,SAASH,EAAEK,MAAM,EAAG,GAAI,IAEpC,CACA,MAAO,CAAEhC,EAAG,IAAK+B,EAAG,IAAKxC,EAAG,EAC9B,CAEA,SAAS0C,EAASjC,EAAW+B,EAAWxC,EAAWD,GAEjD,OAAQA,GAAK,GAAOC,GAAK,GAAOwC,GAAK,EAAK/B,CAC5C,CAEA,SAASkC,EAAgBC,EAAgBC,GACvC,MAAMC,EAAKZ,EAASU,GACdG,EAAKb,EAASW,GAEdG,EAAM,IAAIC,YAAY,KAC5B,IAAK,IAAI3B,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B,MAAMrB,EAAIqB,EAAI,IACRb,EAAIX,EAAQgD,EAAGrC,EAAGsC,EAAGtC,EAAGR,GACxBuC,EAAI1C,EAAQgD,EAAGN,EAAGO,EAAGP,EAAGvC,GACxBD,EAAIF,EAAQgD,EAAG9C,EAAG+C,EAAG/C,EAAGC,GAC9B+C,EAAI1B,GAAKoB,EAASjC,EAAG+B,EAAGxC,EAAG,IAC7B,CACA,OAAOgD,CACT,CAiCA,SAASE,EAAUV,EAAgBW,EAAYC,GAC7C,OAAOA,EAAKZ,EAAEa,KAAOF,CACvB,CAyCO,SAASG,EACdjC,EACAL,EACAC,EACAsC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAK1D,KAAK2D,IAAI,EAAG3D,KAAK4D,IAAI,EAAKJ,IAGrC,IAAK,IAAIpC,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GAEpByC,EAAwBhD,EAAG6C,GAC3BI,EAAcjD,EAAG6C,GACjBK,EAAUlD,EAAG6C,GAETL,GAAaW,EAAiBnD,EAAGyC,EAAYI,GAEjDH,EAAenC,GAAK,EACpBR,EAAeC,EAAGC,EAAOC,EAC3B,CAGA,GAAW,IAAP2C,EAAU,CACZ,IAAK,IAAItC,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IACpCD,EAAUC,GAAG6C,KAAOvE,EAAQyB,EAAUC,GAAG6C,MAG3C,YADA/C,EAAiBC,EAAWL,EAAOC,EAErC,CAGA0C,EAAKS,MAAMC,MAAM,GACjB,MAAMC,EAAU,EAAIX,EAAKY,SAEzB,IAAK,IAAIjD,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GAEpB,IAAI6B,EAAMpC,EAAEL,EAAI4D,EAAW,EACvBlB,EAAMrC,EAAEH,EAAI0D,EAAW,EAEvBnB,EAAK,EAAGA,EAAK,EACRA,GAAMQ,EAAKN,OAAMF,EAAKQ,EAAKN,KAAO,GAEvCD,EAAK,EAAGA,EAAK,EACRA,GAAMO,EAAKa,OAAMpB,EAAKO,EAAKa,KAAO,GAE3C,MAAMC,EAAOvB,EAAUS,EAAMR,EAAIC,GACjCO,EAAKe,KAAKpD,GAAKqC,EAAKS,MAAMK,GAC1Bd,EAAKS,MAAMK,GAAQnD,CACrB,CAGA,MAAMb,EAAI5C,EAAIQ,gBACRsG,EAAKlE,EAAIA,EAEf,IAAK,IAAIa,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMsD,EAAKvD,EAAUC,GAErB,IAAI6B,EAAMyB,EAAGlE,EAAI4D,EAAW,EACxBlB,EAAMwB,EAAGhE,EAAI0D,EAAW,EAExBnB,EAAK,EAAGA,EAAK,EACRA,GAAMQ,EAAKN,OAAMF,EAAKQ,EAAKN,KAAO,GAEvCD,EAAK,EAAGA,EAAK,EACRA,GAAMO,EAAKa,OAAMpB,EAAKO,EAAKa,KAAO,GAE3C,MAAMK,EAAK1B,EAAK,EAAIA,EAAK,EAAIA,EACvB2B,EAAK3B,EAAK,EAAIQ,EAAKN,KAAOF,EAAK,EAAIA,EACnC4B,EAAK3B,EAAK,EAAIA,EAAK,EAAIA,EACvB4B,EAAK5B,EAAK,EAAIO,EAAKa,KAAOpB,EAAK,EAAIA,EAEzC,IAAK,IAAI6B,EAAKF,EAAIE,GAAMD,EAAIC,IAC1B,IAAK,IAAIC,EAAKL,EAAIK,GAAMJ,EAAII,IAAM,CAChC,IAAIC,EAAIxB,EAAKS,MAAMlB,EAAUS,EAAMuB,EAAID,IACvC,MAAc,IAAPE,GAAU,CACf,GAAIA,EAAI7D,EAAG,CACT,MAAM8D,EAAK/D,EAAU8D,GACfE,EAAKD,EAAG1E,EAAIkE,EAAGlE,EACf4E,EAAKF,EAAGxE,EAAIgE,EAAGhE,EACf2E,EAAKF,EAAKA,EAAKC,EAAKA,EAE1B,GAAIC,EAAK,GAAKA,EAAKZ,EAAI,CACrBlB,EAAenC,KACfmC,EAAe0B,KAGfK,EAAqBZ,EAAIQ,EAAIC,EAAIC,EADvBpF,KAAKuF,KAAKF,GACoB3B,GACxC8B,EAAoBd,EAAIQ,EAAIxB,EAC9B,CACF,CACAuB,EAAIxB,EAAKe,KAAKS,EAChB,CACF,CAEJ,CAGA,IAAK,IAAI7D,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GACpBqE,EAA4B5E,EAAGE,EAAQwC,EAAenC,GAAIsC,GAC1D7C,EAAEoD,KAAOvE,EAAQmB,EAAEoD,KACrB,CAEA/C,EAAiBC,EAAWL,EAAOC,EACrC,CAEA,SAAS8C,EAAwBhD,EAAa6C,GAC5C,MAAMgC,EAAW7E,EAAEoD,KAAOpD,EAAEoD,KAAOtG,EAAIE,SACvCgD,EAAEI,KAAOtD,EAAIC,QAAU8H,GAAYhC,CACrC,CAEA,SAASI,EAAcjD,EAAa6C,GAClC,MAAMiC,EAAI3F,KAAK4F,IAAIjI,EAAIG,SAAU4F,GACjC7C,EAAEG,IAAM2E,EACR9E,EAAEI,IAAM0E,CACV,CAEA,SAAS5B,EAAUlD,EAAa6C,GAC9B7C,EAAEL,GAAKK,EAAEG,GAAK0C,EACd7C,EAAEH,GAAKG,EAAEI,GAAKyC,CAChB,CAEA,SAASM,EAAiBnD,EAAayC,EAAkBI,GACvD,MAAMyB,EAAKtE,EAAEL,EAAI8C,EAAW9C,EACtB4E,EAAKvE,EAAEH,EAAI4C,EAAW5C,EACtB2E,EAAKF,EAAKA,EAAKC,EAAKA,EACpB7E,EAAI5C,EAAIU,kBAGd,GAAIgH,EAFO9E,EAAIA,EAEF,CACX,MACMsF,EAAY,EADR7F,KAAKuF,KAAKF,IACO,EAAI9E,GAC/BM,EAAEoD,MAAwB,EAAhBtG,EAAII,UAAgB8H,EAAYnC,CAC5C,CACF,CAEA,SAAS4B,EACPZ,EACAQ,EACAC,EACAC,EACAU,EACApC,GAEA,MAAMqC,EAAQpI,EAAIS,mBAAqB,EAAI0H,GAAK,EAAInI,EAAIQ,kBAClD6H,EAAO,EAAIF,EACXG,EAAKd,EAAKa,EAAOD,EAAQrC,EACzBwC,EAAKd,EAAKY,EAAOD,EAAQrC,EAE/BgB,EAAG1D,IAAMiF,EACTvB,EAAGzD,IAAMiF,EACThB,EAAGlE,IAAMiF,EACTf,EAAGjE,IAAMiF,CACX,CAEA,SAASV,EAAoBd,EAAcQ,EAAcxB,GACvD,MACMyC,GADWzB,EAAGT,KAAOiB,EAAGjB,MACAtG,EAAIM,gBAAkByF,EACpDgB,EAAGT,MAAQkC,EACXjB,EAAGjB,MAAQkC,CACb,CAEA,SAASV,EACP5E,EACAE,EACAqF,EACA1C,GAEA,MAAM2C,EAAqBtF,EAASF,EAAEH,EAEtC,GAAI2F,EAAqB1I,EAAIO,qBAAsB,CACjD,MAAM2H,EAAY,EAAIQ,GAAsB,EAAI1I,EAAIO,sBAEpD,YADA2C,EAAEoD,MAAQtG,EAAII,UAAY8H,EAAYnC,EAExC,CAEA,MAEM4C,EAAc,GADFF,EADG,EAC4BA,EAD5B,KAIrBvF,EAAEoD,MAAQtG,EAAIK,WAAa,GAAoB,GAAdsI,GAAqB5C,CACxD,CAuEA,SAAS6C,EACPC,EACAC,EACAtF,EACAuF,EACAC,GAEA,MAAMC,EA3ER,SACEJ,EACAE,EACA5F,EACAC,GAEA,MAAM8F,EAAMH,EAASI,QAIrB,OAHKD,GAAOA,EAAI/F,QAAUA,GAAS+F,EAAI9F,SAAWA,IAChD2F,EAASI,QAAUN,EAAIO,gBAAgBjG,EAAOC,IAEzC2F,EAASI,OAClB,CAgEoBE,CAAgBR,EAAKE,EAAUD,EAAO3F,MAAO2F,EAAO1F,SA9DxE,SACE6F,EACAzF,EACA8F,EACAC,EACAP,GAEA,MAAMQ,EAAY7I,EAAOE,WACnB4I,EAAY9I,EAAOG,UACnBgG,EAAKnG,EAAOC,gBAAkBD,EAAOC,gBAErC8I,EAAS,IAAItE,YAAY6D,EAAUU,KAAKC,QAGxCC,EAAQhF,EAAS,EAAG,EAAG,EAAG,KAChC6E,EAAOlD,KAAKqD,GAEZ,MAAMC,EAAIR,EAEV,IAAK,IAAIvG,EAAI,EAAGA,EAAIwG,EAAcxG,GAAKyG,EACrC,IAAK,IAAI3G,EAAI,EAAGA,EAAIyG,EAAazG,GAAK2G,EAAW,CAC/C,IAAIO,EAAe,EACfC,EAAkB,EAEtB,IAAK,IAAIvG,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GACd+D,EAAK3E,EAAIK,EAAEL,EACX4E,EAAK1E,EAAIG,EAAEH,EAEXkH,EAAYnD,GADHU,EAAKA,EAAKC,EAAKA,EACG,GAEjCsC,GAAgBE,EAChBD,GAAmBC,EAAY/G,EAAEoD,IACnC,CAEA,GAAIyD,GAAgBN,EAAW,SAE/B,MAAMnD,EAAO0D,EAAkBD,EAEzBG,EAAOlB,EADE1C,GAAQ,EAAI,EAAIA,GAAQ,EAAI,IAAc,IAAPA,EAAc,GAGhE,IAAK,IAAI6D,EAAK,EAAGA,EAAKX,EAAWW,IAAM,CACrC,MAAMC,EAAKrH,EAAIoH,EACf,GAAIC,GAAMb,EAAc,MAExB,IAAI3F,EAAMwG,EAAKN,EAAIjH,EACnB,MAAMwH,EAAShI,KAAK4D,IAAIpD,EAAI2G,EAAWM,GACvC,IAAK,IAAIQ,EAAKzH,EAAGyH,EAAKD,EAAQC,IAC5BZ,EAAO9F,KAASsG,CAEpB,CACF,CAEJ,CAUEK,CAActB,EAAWzF,EAAWsF,EAAO3F,MAAO2F,EAAO1F,OAAQ4F,GACjEH,EAAI2B,aAAavB,EAAW,EAAG,EACjC,CAGe,SAASwB,IACtB,MAAMC,GAAYC,EAAAA,EAAAA,QAA0B,MACtCC,GAASD,EAAAA,EAAAA,QAAwC,MAEjDE,GAASF,EAAAA,EAAAA,QAAsB,MAE/BG,GAAeH,EAAAA,EAAAA,QAAmB,IAClC5B,GAAW4B,EAAAA,EAAAA,QAAyB,MACpCI,GAAoBJ,EAAAA,EAAAA,QAAoB,IAAIK,YAAY,IACxDC,GAAmBN,EAAAA,EAAAA,QAAsB,MAEzCO,GAAUP,EAAAA,EAAAA,QAA2B,MAGrCQ,GAAUR,EAAAA,EAAAA,QAAiC,CAAEb,EAAG,EAAGvF,EAAG,IAEtD6G,GAAYC,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcC,GAAiB,IAAO,IACpEC,GAAaH,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcG,GAAiB,IAAQ,KAErEC,EAAYC,IAAiBC,EAAAA,EAAAA,WAAS,GAEvCC,GAAiBlB,EAAAA,EAAAA,SAAO,GACxBmB,GAAgBnB,EAAAA,EAAAA,QAAa,CAAE9H,EAAG,EAAGE,EAAG,IAGxCgJ,GAAkBV,EAAAA,EAAAA,UAAQ,IA7alC,SAA6BW,GAC3B,GAAIA,GAAS,EAAG,OAAO,EAEvB,MACMC,EADQ1K,EAAMI,MACC,EAErB,IAAIuK,EAAO,EACPC,EAAUC,IACd,MAAMC,EAAShK,KAAK4B,IAAI+H,GAExB,IAAK,IAAIvI,EAAI,EAAGA,GAAKwI,EAAMxI,IAAK,CAC9B,MAAM6I,EAAI3I,EAAaF,GACjB8I,EAAMlK,KAAKmK,IAAInK,KAAK4B,IAAIqI,GAAKD,GAC/BE,EAAMJ,IACRA,EAAUI,EACVL,EAAOzI,EAEX,CACA,OAAOyI,CACT,CA0ZwCO,CAAoBlL,EAAMG,UAAU,KACnEgL,EAAUC,IAAef,EAAAA,EAAAA,UAAiBG,GAC3Ca,GAAWjC,EAAAA,EAAAA,QAAepJ,EAAMG,UAEtCmL,EAAAA,EAAAA,YAAU,KACRD,EAASzD,QAAUxF,EAAa+I,EAAS,GACxC,CAACA,IAEJ,MAAOI,EAAUC,IAAenB,EAAAA,EAAAA,WAAS,GACnCoB,GAAaC,EAAAA,EAAAA,cAAY,IAAMF,GAAa/K,IAAOA,KAAI,KAEtDkL,EAAQC,IAAavB,EAAAA,EAAAA,UAAS,IACrCiB,EAAAA,EAAAA,YAAU,KACRzB,EAAU8B,OAASA,CAAM,GACxB,CAACA,EAAQ9B,IAEZ,MAAMgC,GAAkBzC,EAAAA,EAAAA,QAAO5K,GACzBsN,GAAmB1C,EAAAA,EAAAA,QAAO7K,IAEzBwN,EAAcC,IAAmB3B,EAAAA,EAAAA,UAAS7L,IAC1CyN,EAAeC,IAAoB7B,EAAAA,EAAAA,UAAS9L,GAE7C4N,GAAa/C,EAAAA,EAAAA,QAAoB7F,EAAgB/E,EAAaD,KAGpE+M,EAAAA,EAAAA,YAAU,KACRO,EAAgBjE,QAAUmE,EAC1BD,EAAiBlE,QAAUqE,EAC3BE,EAAWvE,QAAUrE,EAAgBwI,EAAcE,EAAc,GAChE,CAACF,EAAcE,EAAe9B,KAGjCmB,EAAAA,EAAAA,YAAU,KACR,MAAM/D,EAAS4B,EAAUvB,QACzB,IAAKL,EAAQ,OAEb,MAAMgB,EAAI6D,OAAOC,WACXrJ,EAAIoJ,OAAOE,YACjB1C,EAAQhC,QAAU,CAAEW,IAAGvF,KAEvBuE,EAAO3F,MAAQ2G,EACfhB,EAAO1F,OAASmB,EAEhBqG,EAAOzB,QAAUL,EAAOgF,WAAW,MAGnC/E,EAASI,QAAU,IAAI,GAGtB,IAEH,MAAM4E,GAA0Bd,EAAAA,EAAAA,cAAY,KAC1C,MAAM,EAAEnD,EAAC,EAAEvF,GAAM4G,EAAQhC,QAEQ,OAA7B8B,EAAiB9B,UACnB8B,EAAiB9B,QAthBvB,SAA8BhG,EAAeC,GAC3C,MAAM4K,EAAe7M,EAASC,MAAQD,EAASE,OACzC4M,EAAc9K,EAAQC,EAEtB8K,EAAU/M,EAASG,UAAY0M,EAC/BG,EAAS9L,KAAKC,MAAM2L,EAAcC,GAExC,OAAO7L,KAAK2D,IAAI,IAAK3D,KAAK4D,IAAI,IAAMkI,GACtC,CA8gBiCC,CAAqBtE,EAAGvF,IAGrD,MAAM8J,EAAQpD,EAAiB9B,QAC/B2B,EAAa3B,QAzYjB,SAAyBhG,EAAeC,EAAgBiL,GACtD,MAAM7K,EAAwB,GACxB8K,EAAoBjM,KAAKkM,MAAMF,EAAQtN,EAAOC,OAEpD,IAAK,IAAIyC,EAAI,EAAGA,EAAI1C,EAAOC,MAAOyC,IAAK,CACrC,MAAM+K,EAAUnM,KAAKK,SAAWS,EAC1BsL,EACJpM,KAAKK,SAAW3B,EAAOG,cACnBmB,KAAKK,SAAWU,EAAS,GAChB,GAATA,EAAef,KAAKK,SAAWU,EAAS,GAExCsL,EAAYrM,KAAKK,SACvB,IAAK,IAAI4E,EAAI,EAAGA,EAAIgH,EAAmBhH,IAAK,CAC1C,MAAMqH,EAASpM,EAAaxB,EAAOE,QACnCuC,EAAUoL,KAAK,CACb/L,EAAG2L,EAAUG,EAAO9L,EACpBE,EAAG0L,EAAUE,EAAO5L,EACpBM,GAAI,EACJC,GAAI,EACJgD,KAAMoI,GAEV,CACF,CAEA,KAAOlL,EAAUE,OAAS2K,GACxB7K,EAAUoL,KAAK,CACb/L,EAAGR,KAAKK,SAAWS,EACnBJ,EAAGV,KAAKK,SAAWU,EACnBC,GAAI,EACJC,GAAI,EACJgD,KAAM,IAIV,OAAO9C,CACT,CAsW2BqL,CAAgB/E,EAAGvF,EAAG8J,GAC7CtD,EAAkB5B,QAAU,IAAI6B,YAAYqD,GA7ahD,SACEnD,EACA/H,EACAC,EACAiL,EACA3H,GAEA,MAAMlB,EAAOnD,KAAK2D,IAAI,EAAG3D,KAAKyM,KAAK3L,EAAQuD,IACrCC,EAAOtE,KAAK2D,IAAI,EAAG3D,KAAKyM,KAAK1L,EAASsD,IACtCqI,EAAQvJ,EAAOmB,EAEfhC,EAAIuG,EAAQ/B,QAEfxE,GACDA,EAAEa,OAASA,GACXb,EAAEgC,OAASA,GACXhC,EAAE+B,WAAaA,GACf/B,EAAEkC,KAAKnD,SAAW2K,GAClB1J,EAAE4B,MAAM7C,SAAWqL,IAEnB7D,EAAQ/B,QAAU,CAChBzC,WACAlB,OACAmB,OACAJ,MAAO,IAAIyI,WAAWD,GACtBlI,KAAM,IAAImI,WAAWX,IAG3B,CAmZIY,CAAW/D,EAASpB,EAAGvF,EAAG8J,EAAOrO,EAAIQ,gBAAgB,GACpD,IAEG0O,GAAoBjC,EAAAA,EAAAA,cAAY,KAAO,IAADkC,GA3gB9C,SAAoCC,GAClC,IACE,IAAKC,OAAOC,SAASF,IAAYA,EAAU,EAAG,OAC9CG,aAAaC,QAAQ1N,EAAgB2N,OAAOL,GAC9C,CAAE,MAAAM,GACA,CAEJ,CAqgBIC,CAAgD,QAAtBR,EAAC/D,EAAUwE,mBAAW,IAAAT,EAAAA,EAAI,EAAE,GACrD,CAAC/D,KAEJyB,EAAAA,EAAAA,YAAU,KACR,IAAKnB,EAAY,OAEjB,MACMmE,EAAKlC,OAAOmC,aADLC,IAAMb,KACiB,KAE9Bc,EAAaA,IAAMd,IACnBe,EAAqBA,KACQ,WAA7BC,SAASC,iBAA8BjB,GAAmB,EAMhE,OAHAvB,OAAOyC,iBAAiB,WAAYJ,GACpCE,SAASE,iBAAiB,mBAAoBH,GAEvC,KACLtC,OAAO0C,cAAcR,GACrBlC,OAAO2C,oBAAoB,WAAYN,GACvCE,SAASI,oBAAoB,mBAAoBL,EAAmB,CACrE,GACA,CAACvE,EAAYwD,KAEhBrC,EAAAA,EAAAA,YAAU,IACD,KACLqC,IAEA9D,EAAUmF,QACVnF,EAAU8B,OAAS,EACnB9B,EAAUoF,QAEVhF,EAAW+E,QACX/E,EAAW0B,OAAS,EACpB1B,EAAWgF,OAAO,GAEnB,CAACpF,EAAWI,EAAY0D,IAE3B,MAAMuB,GAAaxD,EAAAA,EAAAA,cAAY,KAC7B,MAAMtI,EAAIuG,EAAQ/B,QAClB,IAAKxE,EAAG,OAER,MAAM,EAAEmF,EAAC,EAAEvF,GAAM4G,EAAQhC,QAEzB1D,EACEqF,EAAa3B,QACbW,EACAvF,EACAsH,EAAe1C,QACf2C,EAAc3C,QACd4B,EAAkB5B,QAClByD,EAASzD,QACTxE,EACD,GACA,IAEG+L,GAAOzD,EAAAA,EAAAA,cAAY,KACvB,MAAMnE,EAAS4B,EAAUvB,QACnBN,EAAM+B,EAAOzB,QACdL,GAAWD,GAEhBD,EAAYC,EAAKC,EAAQgC,EAAa3B,QAASJ,EAAU2E,EAAWvE,QAAQ,GAC3E,IAGGwH,IAAWhG,EAAAA,EAAAA,QAAsC,CAAEsB,KAAM,EAAG2E,IAAK,IAEjEC,IAAU5D,EAAAA,EAAAA,cAAa6D,IAC3B,MAAMC,EAAQJ,GAASxH,QAEJ,IAAf4H,EAAM9E,OAAY8E,EAAM9E,KAAO6E,GACnC,MAAME,EAAQF,EAAMC,EAAM9E,KAC1B8E,EAAM9E,KAAO6E,EAGbC,EAAMH,KAAOvO,KAAK4D,IAAI,IAAK5D,KAAK2D,IAAI,EAAGgL,IAEvC,IAAInN,EAAQ,EACZ,KAAOkN,EAAMH,KAAOhP,GAAYiC,EAAQhC,GACtC4O,IACAM,EAAMH,KAAOhP,EACbiC,IAIEkN,EAAMH,KAAOhP,IAAUmP,EAAMH,IAAM,GAEvCF,IACA7F,EAAO1B,QAAU8H,sBAAsBJ,GAAQ,GAC9C,CAACH,EAAMD,KAGV5D,EAAAA,EAAAA,YAAU,KACR,MAAM/D,EAAS4B,EAAUvB,QACzB,IAAKL,EAAQ,OAEb,MAAMoI,EAAWC,IACf,MAAMC,EAAOtI,EAAOuI,wBACpB,MAAO,CAAExO,EAAGsO,EAAEG,QAAUF,EAAKG,KAAMxO,EAAGoO,EAAEK,QAAUJ,EAAKK,IAAK,EAGxDC,EAAUP,IACdtF,EAAe1C,SAAU,EACzB2C,EAAc3C,QAAU+H,EAAQC,EAAE,EAE9BQ,EAAUR,IACdrF,EAAc3C,QAAU+H,EAAQC,EAAE,EAE9BS,EAAOA,KACX/F,EAAe1C,SAAU,CAAK,EAQhC,OALAL,EAAOsH,iBAAiB,cAAesB,GACvC/D,OAAOyC,iBAAiB,cAAeuB,GACvChE,OAAOyC,iBAAiB,YAAawB,GACrCjE,OAAOyC,iBAAiB,gBAAiBwB,GAElC,KACL9I,EAAOwH,oBAAoB,cAAeoB,GAC1C/D,OAAO2C,oBAAoB,cAAeqB,GAC1ChE,OAAO2C,oBAAoB,YAAasB,GACxCjE,OAAO2C,oBAAoB,gBAAiBsB,EAAK,CAClD,GACA,IAEH,MAAMC,IAAY5E,EAAAA,EAAAA,cAAY,KAC5B,IACEzB,EAAW0B,OAAS,EACpB1B,EAAWoE,YAAc,EACzBpE,EAAWgF,QACXhF,EAAWsG,MACb,CAAE,MAAAC,GACA,IAED,CAACvG,IAEEwG,IAA2B/E,EAAAA,EAAAA,cAAY,KAC3C,MAAM7K,EAhqBV,WACE,IACE,MAAM6P,EAAM1C,aAAa2C,QAAQpQ,GACjC,IAAKmQ,EAAK,OAAO,EACjB,MAAMjQ,EAAIqN,OAAO4C,GACjB,OAAO5C,OAAOC,SAAStN,IAAMA,GAAK,EAAIA,EAAI,CAC5C,CAAE,MAAAmQ,GACA,OAAO,CACT,CACF,CAupBcC,GACV,IACE,MAAMC,EAAYjH,EAAkBiH,SACZ,kBAAbA,GAAyBhD,OAAOC,SAAS+C,IAAaA,EAAW,EAC1EjH,EAAUwE,YAAcxN,EAAIiQ,EAE5BjH,EAAUwE,YAAcxN,CAE5B,CAAE,MAAAkQ,GACA,IAED,CAAClH,IAEEmH,IAAYtF,EAAAA,EAAAA,cAAY,KAC5B4E,KAEKnG,IACHC,GAAc,GACdoC,IAGA4C,GAASxH,QAAU,CAAE8C,KAAM,EAAG2E,IAAK,GAGnCK,uBAAsB,IAAMP,MAG5B7F,EAAO1B,QAAU8H,sBAAsBJ,KAGzCmB,KACA5G,EAAU8B,OAAS,EACnB9B,EAAU0G,MAAM,GACf,CACDjB,GACAH,EACAtF,EACAM,EACAqC,EACA8D,GACAG,KAGIQ,IAAoBnH,EAAAA,EAAAA,UACxB,MAASvB,EAAG6D,OAAOC,WAAYrJ,EAAGoJ,OAAOE,eACzC,IAGI4E,GAAelR,EAAMI,MAAQ,EAEnC,OACE+Q,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,UACEC,IAAKpI,EACLiI,UAAU,mBACVxP,MAAOqP,GAAkB1I,EACzB1G,OAAQoP,GAAkBjO,IAG1BmH,GAYAgH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,UACEE,KAAK,SACLJ,UAAU,wBACVK,QAAShG,EACT,aAAYF,EAAW,YAAc,YACrC,eAAcA,EAAS8F,SAEtB9F,EAAW,SAAM,WAGnBA,IACC4F,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAE7BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,UAAQlG,QAGnDmG,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVI,KAAK,QACL9M,IAAK,EACLD,IAAKyM,GACLQ,KAAM,EACNC,MAAOxG,EACPyG,SAAWhC,IACTxE,UAxzBJ3K,EAwzByBqN,OAAO8B,EAAE9E,OAAO6G,OAxzBlBhO,EAwzB6BuN,GAvzB7DzQ,GADoBiD,EAwzBsC,GAvzBjDA,EAAKjD,EAAIkD,EAAKA,EAAKlD,IADrC,IAAkBA,EAAWiD,EAAYC,CAyzBpB,EACD,aAAW,2BAMjBwN,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,WAC9BvQ,KAAKC,MAAe,IAAT4K,GAAc,UAItC2F,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVI,KAAK,QACL9M,IAAK,EACLD,IAAK,EACLiN,KAAM,IACNC,MAAOhG,EACPiG,SAAWhC,GAAMhE,EAAUkC,OAAO8B,EAAE9E,OAAO6G,QAC3C,aAAW,uBAMjBR,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,SAAC,mBAG3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAElCF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,wBAAuBC,SAAA,CAAC,OAEvCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,wBACVI,KAAK,QACLG,MAAO1F,EACP2F,SAAWhC,GAAM1D,EAAiB0D,EAAE9E,OAAO6G,OAC3C,aAAW,wBAIfR,EAAAA,EAAAA,MAAA,SAAOC,UAAU,wBAAuBC,SAAA,CAAC,QAEvCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,wBACVI,KAAK,QACLG,MAAO5F,EACP6F,SAAWhC,GAAM5D,EAAgB4D,EAAE9E,OAAO6G,OAC1C,aAAW,uBAIfL,EAAAA,EAAAA,KAAA,UACEE,KAAK,SACLJ,UAAU,wBACVK,QAASA,KACPzF,EAAgBxN,GAChB0N,EAAiB3N,EAAa,EAC9B8S,SACH,uBAzGXC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCC,EAAAA,EAAAA,KAAA,UACEE,KAAK,SACLJ,UAAU,kBACVK,QAAST,GACT,aAAW,kBAAiBK,SAC7B,cA8GX,C,kCCp+BO,MAAMtH,UAAsB8H,MACjCC,WAAAA,CAAYC,GAAkB,IAAbC,EAAIC,UAAA9P,OAAA,QAAA+P,IAAAD,UAAA,IAAAA,UAAA,GACnBE,MAAMJ,GAAK,KAIbK,aAAgBC,IAAc,IAADC,EAC3B,OAAe,QAARA,EAAAC,KAAKR,WAAG,IAAAO,OAAA,EAARA,EAAUE,SAASH,KACnBE,KAAKlE,YAAc,IAClBkE,KAAKE,SACLF,KAAKG,OACNH,KAAKI,WAAa,CAAC,EAC1B,KAEFC,UAAY,IACHL,KAAKlE,YAAc,IAClBkE,KAAKE,SACLF,KAAKG,OACNH,KAAKI,WAAa,EACzB,KAEFE,SAAW,IAAMN,KAAKzB,SAAWyB,KAAKlE,YAAY,KAElDY,MAAQ,KACNsD,KAAKvD,QACLuD,KAAKlE,YAAc,CAAC,EAtBpBkE,KAAKP,KAAOA,CACd,E","sources":["lava_lamp/LavaLamp.tsx","util/Audio.js"],"sourcesContent":["import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport \"../styles/lavalamp.css\";\n\nimport musicAudioNoise from \"../assets/lavaLamp/guitar.mp3\";\nimport clickAudioNoise from \"../assets/lavaLamp/click.mp3\";\nimport { PersonalAudio } from \"../util/Audio\";\n\n// --- Colors: keep state (for controlled inputs) + refs (fast access elsewhere) ---\nconst DEFAULT_HIGH = \"#ffdd00\";\nconst DEFAULT_LOW = \"#ff5500\";\n\n// --- Types ---\ninterface Particle {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  heat: number; // [0..1]\n}\n\ntype Vec2 = { x: number; y: number };\n\ntype SpatialGrid = {\n  cellSize: number;\n  cols: number;\n  rows: number;\n  heads: Int32Array; // length cols*rows, head index or -1\n  next: Int32Array; // length particleCount, next index or -1\n};\n\n// --- Constants ---\nconst SIM = {\n  GRAVITY: 0.01,\n  BUOYANCY: 0.04,\n  FRICTION: 0.98,\n\n  HEAT_RATE: 0.005,\n  COOL_RATE: 0.0017,\n  HEAT_CONDUCTION: 0.002,\n\n  HEAT_SOURCE_DISTANCE: 45,\n\n  COHESION_RADIUS: 25,\n  COHESION_STRENGTH: 0.0035,\n\n  MOUSE_HEAT_RADIUS: 100,\n} as const;\n\nconst RENDER = {\n  PARTICLE_RADIUS: 10,\n  PIXEL_SIZE: 6,\n  THRESHOLD: 0.8,\n} as const;\n\nconst CLUMPS = {\n  COUNT: 15,\n  RADIUS: 50,\n  TOP_HALF_PROB: 0.3,\n} as const;\n\n// Baseline density: preserves \"look\" across screens, computed once per page load.\nconst BASELINE = {\n  WIDTH: 1920,\n  HEIGHT: 1080,\n  PARTICLES: 1200,\n} as const;\n\n// --- Speed control (indexed slider) ---\nconst SPEED = {\n  MIN: 0.0,\n  MAX: 5,\n  DEFAULT: 0.25,\n  STEPS: 10, // number of discrete positions\n} as const;\n\n// --- Fixed update rate (independent of render cost / screen size) ---\nconst FIXED_FPS = 60;\nconst FIXED_MS = 1000 / FIXED_FPS;\nconst MAX_CATCHUP_STEPS = 4;\n\n// --- Persisted audio position ---\nconst MUSIC_TIME_KEY = \"lavaLamp.musicTimeSeconds\";\n\n// --- Utils ---\nfunction clamp01(v: number): number {\n  return v < 0 ? 0 : v > 1 ? 1 : v;\n}\n\nfunction clampInt(v: number, lo: number, hi: number) {\n  return v < lo ? lo : v > hi ? hi : v;\n}\n\nfunction lerp(a: number, b: number, t: number) {\n  return a + (b - a) * t;\n}\n\nfunction lerpInt(a: number, b: number, t: number): number {\n  const v = a + (b - a) * t;\n  return v < 0 ? 0 : v > 255 ? 255 : Math.round(v);\n}\n\nfunction randInCircle(radius: number): Vec2 {\n  const angle = Math.random() * Math.PI * 2;\n  const r = Math.random() * radius;\n  return { x: Math.cos(angle) * r, y: Math.sin(angle) * r };\n}\n\nfunction bounceInBounds(p: Particle, width: number, height: number) {\n  if (p.x < 0) {\n    p.x = 0;\n    p.vx *= -0.5;\n  } else if (p.x > width) {\n    p.x = width;\n    p.vx *= -0.5;\n  }\n\n  if (p.y < 0) {\n    p.y = 0;\n    p.vy *= -0.5;\n  } else if (p.y > height) {\n    p.y = height;\n    p.vy *= -0.5;\n  }\n}\n\nfunction clampAllToBounds(particles: Particle[], width: number, height: number) {\n  for (let i = 0; i < particles.length; i++) {\n    bounceInBounds(particles[i], width, height);\n  }\n}\n\nfunction computeParticleCount(width: number, height: number): number {\n  const baselineArea = BASELINE.WIDTH * BASELINE.HEIGHT;\n  const currentArea = width * height;\n\n  const density = BASELINE.PARTICLES / baselineArea;\n  const scaled = Math.round(currentArea * density);\n\n  return Math.max(200, Math.min(2000, scaled));\n}\n\nfunction readSavedMusicTimeSeconds(): number {\n  try {\n    const raw = localStorage.getItem(MUSIC_TIME_KEY);\n    if (!raw) return 0;\n    const v = Number(raw);\n    return Number.isFinite(v) && v >= 0 ? v : 0;\n  } catch {\n    return 0;\n  }\n}\n\nfunction writeSavedMusicTimeSeconds(seconds: number) {\n  try {\n    if (!Number.isFinite(seconds) || seconds < 0) return;\n    localStorage.setItem(MUSIC_TIME_KEY, String(seconds));\n  } catch {\n    // ignore\n  }\n}\n\n// Note: MIN=0 is special; idx 0 => frozen-ish. idx 1..(STEPS-1) => (0..MAX] in log space.\nfunction indexToSpeed(idx: number): number {\n  if (idx <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  if (idx >= steps) return SPEED.MAX;\n\n  // normalized position excluding 0\n  const t = idx / steps; // idx=steps/2 => midpoint\n\n  // calibrated so midpoint ≈ 0.5\n  const targetMidSpeed = 0.5;\n  const minPositive = (targetMidSpeed * targetMidSpeed) / SPEED.MAX;\n\n  const minLog = Math.log(minPositive);\n  const maxLog = Math.log(SPEED.MAX);\n\n  return Math.exp(lerp(minLog, maxLog, t));\n}\n\nfunction speedToNearestIndex(speed: number): number {\n  if (speed <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  const last = steps - 1;\n\n  let best = 1;\n  let bestErr = Infinity;\n  const target = Math.log(speed);\n\n  for (let i = 1; i <= last; i++) {\n    const s = indexToSpeed(i);\n    const err = Math.abs(Math.log(s) - target);\n    if (err < bestErr) {\n      bestErr = err;\n      best = i;\n    }\n  }\n  return best;\n}\n\n// --- Color / LUT ---\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } {\n  const h = hex.trim().replace(\"#\", \"\");\n  if (h.length === 3) {\n    const r = parseInt(h[0] + h[0], 16);\n    const g = parseInt(h[1] + h[1], 16);\n    const b = parseInt(h[2] + h[2], 16);\n    return { r, g, b };\n  }\n  if (h.length === 6) {\n    const r = parseInt(h.slice(0, 2), 16);\n    const g = parseInt(h.slice(2, 4), 16);\n    const b = parseInt(h.slice(4, 6), 16);\n    return { r, g, b };\n  }\n  return { r: 255, g: 221, b: 0 };\n}\n\nfunction packRgba(r: number, g: number, b: number, a: number): number {\n  // Uint32Array view over ImageData.data.buffer (common little-endian fast path).\n  return (a << 24) | (b << 16) | (g << 8) | r;\n}\n\nfunction buildHeatLut256(lowHex: string, highHex: string): Uint32Array {\n  const lo = hexToRgb(lowHex);\n  const hi = hexToRgb(highHex);\n\n  const lut = new Uint32Array(256);\n  for (let i = 0; i < 256; i++) {\n    const t = i / 255;\n    const r = lerpInt(lo.r, hi.r, t);\n    const g = lerpInt(lo.g, hi.g, t);\n    const b = lerpInt(lo.b, hi.b, t);\n    lut[i] = packRgba(r, g, b, 255);\n  }\n  return lut;\n}\n\n// --- Spatial grid helpers ---\nfunction ensureGrid(\n  gridRef: React.MutableRefObject<SpatialGrid | null>,\n  width: number,\n  height: number,\n  count: number,\n  cellSize: number\n) {\n  const cols = Math.max(1, Math.ceil(width / cellSize));\n  const rows = Math.max(1, Math.ceil(height / cellSize));\n  const cells = cols * rows;\n\n  const g = gridRef.current;\n  if (\n    !g ||\n    g.cols !== cols ||\n    g.rows !== rows ||\n    g.cellSize !== cellSize ||\n    g.next.length !== count ||\n    g.heads.length !== cells\n  ) {\n    gridRef.current = {\n      cellSize,\n      cols,\n      rows,\n      heads: new Int32Array(cells),\n      next: new Int32Array(count),\n    };\n  }\n}\n\nfunction gridIndex(g: SpatialGrid, cx: number, cy: number): number {\n  return cy * g.cols + cx;\n}\n\n// --- Init ---\nfunction createParticles(width: number, height: number, count: number): Particle[] {\n  const particles: Particle[] = [];\n  const particlesPerClump = Math.floor(count / CLUMPS.COUNT);\n\n  for (let i = 0; i < CLUMPS.COUNT; i++) {\n    const centerX = Math.random() * width;\n    const centerY =\n      Math.random() < CLUMPS.TOP_HALF_PROB\n        ? Math.random() * height * 0.5\n        : height * 0.5 + Math.random() * height * 0.5;\n\n    const clumpHeat = Math.random();\n    for (let j = 0; j < particlesPerClump; j++) {\n      const offset = randInCircle(CLUMPS.RADIUS);\n      particles.push({\n        x: centerX + offset.x,\n        y: centerY + offset.y,\n        vx: 0,\n        vy: 0,\n        heat: clumpHeat,\n      });\n    }\n  }\n\n  while (particles.length < count) {\n    particles.push({\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: 0,\n      vy: 0,\n      heat: 0,\n    });\n  }\n\n  return particles;\n}\n\n// --- Physics (grid-accelerated cohesion/conduction) ---\nexport function stepSimulationOnePairPass(\n  particles: Particle[],\n  width: number,\n  height: number,\n  pointerDown: boolean,\n  pointerPos: Vec2,\n  neighborCounts: Uint16Array,\n  timeScale: number,\n  grid: SpatialGrid\n) {\n  const dt = Math.max(0, Math.min(4.0, timeScale));\n\n  // Pass 1: integrate + pointer heat + reset neighbors + bounds\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    applyBuoyancyAndGravity(p, dt);\n    applyFriction(p, dt);\n    integrate(p, dt);\n\n    if (pointerDown) applyPointerHeat(p, pointerPos, dt);\n\n    neighborCounts[i] = 0;\n    bounceInBounds(p, width, height);\n  }\n\n  // dt=0 => frozen (no cohesion/conduction/cooling), but still clamp\n  if (dt === 0) {\n    for (let i = 0; i < particles.length; i++) {\n      particles[i].heat = clamp01(particles[i].heat);\n    }\n    clampAllToBounds(particles, width, height);\n    return;\n  }\n\n  // Build spatial hash\n  grid.heads.fill(-1);\n  const invCell = 1 / grid.cellSize;\n\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    let cx = (p.x * invCell) | 0;\n    let cy = (p.y * invCell) | 0;\n\n    if (cx < 0) cx = 0;\n    else if (cx >= grid.cols) cx = grid.cols - 1;\n\n    if (cy < 0) cy = 0;\n    else if (cy >= grid.rows) cy = grid.rows - 1;\n\n    const cell = gridIndex(grid, cx, cy);\n    grid.next[i] = grid.heads[cell];\n    grid.heads[cell] = i;\n  }\n\n  // Pass 2: local neighbor forces + conduction\n  const r = SIM.COHESION_RADIUS;\n  const r2 = r * r;\n\n  for (let i = 0; i < particles.length; i++) {\n    const p1 = particles[i];\n\n    let cx = (p1.x * invCell) | 0;\n    let cy = (p1.y * invCell) | 0;\n\n    if (cx < 0) cx = 0;\n    else if (cx >= grid.cols) cx = grid.cols - 1;\n\n    if (cy < 0) cy = 0;\n    else if (cy >= grid.rows) cy = grid.rows - 1;\n\n    const x0 = cx > 0 ? cx - 1 : cx;\n    const x1 = cx + 1 < grid.cols ? cx + 1 : cx;\n    const y0 = cy > 0 ? cy - 1 : cy;\n    const y1 = cy + 1 < grid.rows ? cy + 1 : cy;\n\n    for (let ny = y0; ny <= y1; ny++) {\n      for (let nx = x0; nx <= x1; nx++) {\n        let j = grid.heads[gridIndex(grid, nx, ny)];\n        while (j !== -1) {\n          if (j > i) {\n            const p2 = particles[j];\n            const dx = p2.x - p1.x;\n            const dy = p2.y - p1.y;\n            const d2 = dx * dx + dy * dy;\n\n            if (d2 > 0 && d2 < r2) {\n              neighborCounts[i]++;\n              neighborCounts[j]++;\n\n              const d = Math.sqrt(d2);\n              applyCohesionImpulse(p1, p2, dx, dy, d, dt);\n              applyHeatConduction(p1, p2, dt);\n            }\n          }\n          j = grid.next[j];\n        }\n      }\n    }\n  }\n\n  // Pass 3: heat source / cooling\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n    applyBottomHeatOrAirCooling(p, height, neighborCounts[i], dt);\n    p.heat = clamp01(p.heat);\n  }\n\n  clampAllToBounds(particles, width, height);\n}\n\nfunction applyBuoyancyAndGravity(p: Particle, dt: number) {\n  const buoyancy = p.heat * p.heat * SIM.BUOYANCY;\n  p.vy += (SIM.GRAVITY - buoyancy) * dt;\n}\n\nfunction applyFriction(p: Particle, dt: number) {\n  const f = Math.pow(SIM.FRICTION, dt);\n  p.vx *= f;\n  p.vy *= f;\n}\n\nfunction integrate(p: Particle, dt: number) {\n  p.x += p.vx * dt;\n  p.y += p.vy * dt;\n}\n\nfunction applyPointerHeat(p: Particle, pointerPos: Vec2, dt: number) {\n  const dx = p.x - pointerPos.x;\n  const dy = p.y - pointerPos.y;\n  const d2 = dx * dx + dy * dy;\n  const r = SIM.MOUSE_HEAT_RADIUS;\n  const r2 = r * r;\n\n  if (d2 < r2) {\n    const d = Math.sqrt(d2);\n    const intensity = 1 - d * (1 / r);\n    p.heat += SIM.HEAT_RATE * 2 * intensity * dt;\n  }\n}\n\nfunction applyCohesionImpulse(\n  p1: Particle,\n  p2: Particle,\n  dx: number,\n  dy: number,\n  d: number,\n  dt: number\n) {\n  const force = SIM.COHESION_STRENGTH * (1 - d * (1 / SIM.COHESION_RADIUS));\n  const invD = 1 / d;\n  const fx = dx * invD * force * dt;\n  const fy = dy * invD * force * dt;\n\n  p1.vx += fx;\n  p1.vy += fy;\n  p2.vx -= fx;\n  p2.vy -= fy;\n}\n\nfunction applyHeatConduction(p1: Particle, p2: Particle, dt: number) {\n  const heatDiff = p1.heat - p2.heat;\n  const conduction = heatDiff * SIM.HEAT_CONDUCTION * dt;\n  p1.heat -= conduction;\n  p2.heat += conduction;\n}\n\nfunction applyBottomHeatOrAirCooling(\n  p: Particle,\n  height: number,\n  neighborCount: number,\n  dt: number\n) {\n  const distanceFromBottom = height - p.y;\n\n  if (distanceFromBottom < SIM.HEAT_SOURCE_DISTANCE) {\n    const intensity = 1 - distanceFromBottom * (1 / SIM.HEAT_SOURCE_DISTANCE);\n    p.heat += SIM.HEAT_RATE * intensity * dt;\n    return;\n  }\n\n  const maxNeighbors = 8;\n  const neighbors = neighborCount < maxNeighbors ? neighborCount : maxNeighbors;\n  const airExposure = 1 - neighbors / maxNeighbors;\n\n  p.heat -= SIM.COOL_RATE * (0.2 + airExposure * 0.8) * dt;\n}\n\n// --- Render helpers ---\nfunction ensureImageData(\n  ctx: CanvasRenderingContext2D,\n  imageRef: React.MutableRefObject<ImageData | null>,\n  width: number,\n  height: number\n): ImageData {\n  const img = imageRef.current;\n  if (!img || img.width !== width || img.height !== height) {\n    imageRef.current = ctx.createImageData(width, height);\n  }\n  return imageRef.current!;\n}\n\nfunction drawMetaballs(\n  imageData: ImageData,\n  particles: Particle[],\n  canvasWidth: number,\n  canvasHeight: number,\n  heatLut256: Uint32Array\n) {\n  const pixelSize = RENDER.PIXEL_SIZE;\n  const threshold = RENDER.THRESHOLD;\n  const r2 = RENDER.PARTICLE_RADIUS * RENDER.PARTICLE_RADIUS;\n\n  const data32 = new Uint32Array(imageData.data.buffer);\n\n  // 7) Don’t clear twice: clear ONCE here to opaque black\n  const black = packRgba(0, 0, 0, 255);\n  data32.fill(black);\n\n  const w = canvasWidth;\n\n  for (let y = 0; y < canvasHeight; y += pixelSize) {\n    for (let x = 0; x < canvasWidth; x += pixelSize) {\n      let influenceSum = 0;\n      let heatWeightedSum = 0;\n\n      for (let i = 0; i < particles.length; i++) {\n        const p = particles[i];\n        const dx = x - p.x;\n        const dy = y - p.y;\n        const distSq = dx * dx + dy * dy;\n        const influence = r2 / (distSq + 1);\n\n        influenceSum += influence;\n        heatWeightedSum += influence * p.heat;\n      }\n\n      if (influenceSum <= threshold) continue;\n\n      const heat = heatWeightedSum / influenceSum;\n      const lutIdx = heat <= 0 ? 0 : heat >= 1 ? 255 : (heat * 255) | 0;\n      const rgba = heatLut256[lutIdx];\n\n      for (let py = 0; py < pixelSize; py++) {\n        const yy = y + py;\n        if (yy >= canvasHeight) break;\n\n        let idx = yy * w + x;\n        const rowEnd = Math.min(x + pixelSize, w);\n        for (let xx = x; xx < rowEnd; xx++) {\n          data32[idx++] = rgba;\n        }\n      }\n    }\n  }\n}\n\nfunction renderFrame(\n  ctx: CanvasRenderingContext2D,\n  canvas: HTMLCanvasElement,\n  particles: Particle[],\n  imageRef: React.MutableRefObject<ImageData | null>,\n  heatLut256: Uint32Array\n) {\n  const imageData = ensureImageData(ctx, imageRef, canvas.width, canvas.height);\n  drawMetaballs(imageData, particles, canvas.width, canvas.height, heatLut256);\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// --- Component ---\nexport default function LavaLamp(): ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const ctxRef = useRef<CanvasRenderingContext2D | null>(null);\n\n  const rafRef = useRef<number | null>(null);\n\n  const particlesRef = useRef<Particle[]>([]);\n  const imageRef = useRef<ImageData | null>(null);\n  const neighborCountsRef = useRef<Uint16Array>(new Uint16Array(0));\n  const particleCountRef = useRef<number | null>(null);\n\n  const gridRef = useRef<SpatialGrid | null>(null);\n\n  // 5) Cache dimensions ONCE (read only on page load)\n  const sizeRef = useRef<{ w: number; h: number }>({ w: 1, h: 1 });\n\n  const gameMusic = useMemo(() => new PersonalAudio(musicAudioNoise, true), []);\n  const clickSound = useMemo(() => new PersonalAudio(clickAudioNoise, false), []);\n\n  const [hasStarted, setHasStarted] = useState(false);\n\n  const pointerDownRef = useRef(false);\n  const pointerPosRef = useRef<Vec2>({ x: 0, y: 0 });\n\n  // Speed slider state\n  const defaultSpeedIdx = useMemo(() => speedToNearestIndex(SPEED.DEFAULT), []);\n  const [speedIdx, setSpeedIdx] = useState<number>(defaultSpeedIdx);\n  const speedRef = useRef<number>(SPEED.DEFAULT);\n\n  useEffect(() => {\n    speedRef.current = indexToSpeed(speedIdx);\n  }, [speedIdx]);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n  const toggleMenu = useCallback(() => setMenuOpen((v) => !v), []);\n\n  const [volume, setVolume] = useState(1.0);\n  useEffect(() => {\n    gameMusic.volume = volume;\n  }, [volume, gameMusic]);\n\n  const lavaLowColorRef = useRef(DEFAULT_LOW);\n  const lavaHighColorRef = useRef(DEFAULT_HIGH);\n\n  const [lavaLowColor, setLavaLowColor] = useState(DEFAULT_LOW);\n  const [lavaHighColor, setLavaHighColor] = useState(DEFAULT_HIGH);\n\n  const heatLutRef = useRef<Uint32Array>(buildHeatLut256(DEFAULT_LOW, DEFAULT_HIGH));\n\n  // Rebuild LUT whenever colors change; redraw immediately if running.\n  useEffect(() => {\n    lavaLowColorRef.current = lavaLowColor;\n    lavaHighColorRef.current = lavaHighColor;\n    heatLutRef.current = buildHeatLut256(lavaLowColor, lavaHighColor);\n  }, [lavaLowColor, lavaHighColor, hasStarted]);\n\n  // 5) Cache canvas/context + dimensions (only read on initial mount)\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n    sizeRef.current = { w, h };\n\n    canvas.width = w;\n    canvas.height = h;\n\n    ctxRef.current = canvas.getContext(\"2d\");\n\n    // ensure image data matches cached size\n    imageRef.current = null;\n\n    // no resize listener by request\n  }, []);\n\n  const initializeParticlesOnce = useCallback(() => {\n    const { w, h } = sizeRef.current;\n\n    if (particleCountRef.current === null) {\n      particleCountRef.current = computeParticleCount(w, h);\n    }\n\n    const count = particleCountRef.current;\n    particlesRef.current = createParticles(w, h, count);\n    neighborCountsRef.current = new Uint16Array(count);\n\n    ensureGrid(gridRef, w, h, count, SIM.COHESION_RADIUS);\n  }, []);\n\n  const saveMusicPosition = useCallback(() => {\n    writeSavedMusicTimeSeconds(gameMusic.currentTime ?? 0);\n  }, [gameMusic]);\n\n  useEffect(() => {\n    if (!hasStarted) return;\n\n    const tick = () => saveMusicPosition();\n    const id = window.setInterval(tick, 1000);\n\n    const onPageHide = () => saveMusicPosition();\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"hidden\") saveMusicPosition();\n    };\n\n    window.addEventListener(\"pagehide\", onPageHide);\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n\n    return () => {\n      window.clearInterval(id);\n      window.removeEventListener(\"pagehide\", onPageHide);\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    };\n  }, [hasStarted, saveMusicPosition]);\n\n  useEffect(() => {\n    return () => {\n      saveMusicPosition();\n\n      gameMusic.pause();\n      gameMusic.volume = 0;\n      gameMusic.reset();\n\n      clickSound.pause();\n      clickSound.volume = 0;\n      clickSound.reset();\n    };\n  }, [gameMusic, clickSound, saveMusicPosition]);\n\n  const updateOnce = useCallback(() => {\n    const g = gridRef.current;\n    if (!g) return;\n\n    const { w, h } = sizeRef.current;\n\n    stepSimulationOnePairPass(\n      particlesRef.current,\n      w,\n      h,\n      pointerDownRef.current,\n      pointerPosRef.current,\n      neighborCountsRef.current,\n      speedRef.current,\n      g\n    );\n  }, []);\n\n  const draw = useCallback(() => {\n    const canvas = canvasRef.current;\n    const ctx = ctxRef.current;\n    if (!canvas || !ctx) return;\n\n    renderFrame(ctx, canvas, particlesRef.current, imageRef, heatLutRef.current);\n  }, []);\n\n  // 0) Fixed update cadence: updates happen at FIXED_FPS regardless of render speed.\n  const clockRef = useRef<{ last: number; acc: number }>({ last: 0, acc: 0 });\n\n  const animate = useCallback((now: number) => {\n    const clock = clockRef.current;\n\n    if (clock.last === 0) clock.last = now;\n    const delta = now - clock.last;\n    clock.last = now;\n\n    // Clamp massive deltas (tab-switch etc.)\n    clock.acc += Math.min(250, Math.max(0, delta));\n\n    let steps = 0;\n    while (clock.acc >= FIXED_MS && steps < MAX_CATCHUP_STEPS) {\n      updateOnce();\n      clock.acc -= FIXED_MS;\n      steps++;\n    }\n\n    // Drop extra backlog to avoid death spiral\n    if (clock.acc >= FIXED_MS) clock.acc = 0;\n\n    draw();\n    rafRef.current = requestAnimationFrame(animate);\n  }, [draw, updateOnce]);\n\n  // Pointer handling\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const toLocal = (e: PointerEvent): Vec2 => {\n      const rect = canvas.getBoundingClientRect();\n      return { x: e.clientX - rect.left, y: e.clientY - rect.top };\n    };\n\n    const onDown = (e: PointerEvent) => {\n      pointerDownRef.current = true;\n      pointerPosRef.current = toLocal(e);\n    };\n    const onMove = (e: PointerEvent) => {\n      pointerPosRef.current = toLocal(e);\n    };\n    const onUp = () => {\n      pointerDownRef.current = false;\n    };\n\n    canvas.addEventListener(\"pointerdown\", onDown);\n    window.addEventListener(\"pointermove\", onMove);\n    window.addEventListener(\"pointerup\", onUp);\n    window.addEventListener(\"pointercancel\", onUp);\n\n    return () => {\n      canvas.removeEventListener(\"pointerdown\", onDown);\n      window.removeEventListener(\"pointermove\", onMove);\n      window.removeEventListener(\"pointerup\", onUp);\n      window.removeEventListener(\"pointercancel\", onUp);\n    };\n  }, []);\n\n  const playClick = useCallback(() => {\n    try {\n      clickSound.volume = 1.0;\n      clickSound.currentTime = 0;\n      clickSound.reset();\n      clickSound.play();\n    } catch {\n      // ignore\n    }\n  }, [clickSound]);\n\n  const resumeMusicFromSavedTime = useCallback(() => {\n    const t = readSavedMusicTimeSeconds();\n    try {\n      const duration = (gameMusic as any).duration as number | undefined;\n      if (typeof duration === \"number\" && Number.isFinite(duration) && duration > 0) {\n        gameMusic.currentTime = t % duration;\n      } else {\n        gameMusic.currentTime = t;\n      }\n    } catch {\n      // ignore\n    }\n  }, [gameMusic]);\n\n  const startLamp = useCallback(() => {\n    playClick();\n\n    if (!hasStarted) {\n      setHasStarted(true);\n      initializeParticlesOnce();\n\n      // reset fixed-timestep clock\n      clockRef.current = { last: 0, acc: 0 };\n\n      // draw a first frame immediately\n      requestAnimationFrame(() => draw());\n\n      // start RAF loop\n      rafRef.current = requestAnimationFrame(animate);\n    }\n\n    resumeMusicFromSavedTime();\n    gameMusic.volume = 1.0;\n    gameMusic.play();\n  }, [\n    animate,\n    draw,\n    gameMusic,\n    hasStarted,\n    initializeParticlesOnce,\n    playClick,\n    resumeMusicFromSavedTime,\n  ]);\n\n  const initialCanvasSize = useMemo(\n    () => ({ w: window.innerWidth, h: window.innerHeight }),\n    []\n  );\n\n  const lastSpeedIdx = SPEED.STEPS - 1;\n\n  return (\n    <div className=\"lava-lamp-container\">\n      <canvas\n        ref={canvasRef}\n        className=\"lava-lamp-canvas\"\n        width={initialCanvasSize.w}\n        height={initialCanvasSize.h}\n      />\n\n      {!hasStarted ? (\n        <div className=\"lava-lamp-start-overlay\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-start\"\n            onClick={startLamp}\n            aria-label=\"Start lava lamp\"\n          >\n            START\n          </button>\n        </div>\n      ) : (\n        <div className=\"lava-lamp-controls\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-menu-toggle\"\n            onClick={toggleMenu}\n            aria-label={menuOpen ? \"Hide menu\" : \"Show menu\"}\n            aria-pressed={menuOpen}\n          >\n            {menuOpen ? \"✕\" : \"☰\"}\n          </button>\n\n          {menuOpen && (\n            <div className=\"lava-lamp-menu\">\n              {/* Speed */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">speed: {speedIdx}</div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={lastSpeedIdx}\n                    step={1}\n                    value={speedIdx}\n                    onChange={(e) =>\n                      setSpeedIdx(clampInt(Number(e.target.value), 0, lastSpeedIdx))\n                    }\n                    aria-label=\"Simulation speed\"\n                  />\n                </div>\n              </div>\n\n              {/* Volume */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">\n                    volume: {Math.round(volume * 100)}%\n                  </div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={1}\n                    step={0.01}\n                    value={volume}\n                    onChange={(e) => setVolume(Number(e.target.value))}\n                    aria-label=\"Music volume\"\n                  />\n                </div>\n              </div>\n\n              {/* Lava colors */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">lava colors</div>\n                </div>\n\n                <div className=\"lava-lamp-color-row\">\n\n                  <label className=\"lava-lamp-color-label\">\n                    hot\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaHighColor}\n                      onChange={(e) => setLavaHighColor(e.target.value)}\n                      aria-label=\"Lava high color\"\n                    />\n                  </label>\n\n                  <label className=\"lava-lamp-color-label\">\n                    cool\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaLowColor}\n                      onChange={(e) => setLavaLowColor(e.target.value)}\n                      aria-label=\"Lava low color\"\n                    />\n                  </label>\n\n                  <button\n                    type=\"button\"\n                    className=\"lava-lamp-color-reset\"\n                    onClick={() => {\n                      setLavaLowColor(DEFAULT_LOW);\n                      setLavaHighColor(DEFAULT_HIGH);\n                    }}\n                  >\n                    reset\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  isPlaying = () => {\n    return this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["DEFAULT_HIGH","DEFAULT_LOW","SIM","GRAVITY","BUOYANCY","FRICTION","HEAT_RATE","COOL_RATE","HEAT_CONDUCTION","HEAT_SOURCE_DISTANCE","COHESION_RADIUS","COHESION_STRENGTH","MOUSE_HEAT_RADIUS","RENDER","PARTICLE_RADIUS","PIXEL_SIZE","THRESHOLD","CLUMPS","COUNT","RADIUS","TOP_HALF_PROB","BASELINE","WIDTH","HEIGHT","PARTICLES","SPEED","MIN","MAX","DEFAULT","STEPS","FIXED_MS","MAX_CATCHUP_STEPS","MUSIC_TIME_KEY","clamp01","v","lerpInt","a","b","t","Math","round","randInCircle","radius","angle","random","PI","r","x","cos","y","sin","bounceInBounds","p","width","height","vx","vy","clampAllToBounds","particles","i","length","indexToSpeed","idx","steps","minPositive","targetMidSpeed","minLog","log","maxLog","exp","lerp","hexToRgb","hex","h","trim","replace","parseInt","g","slice","packRgba","buildHeatLut256","lowHex","highHex","lo","hi","lut","Uint32Array","gridIndex","cx","cy","cols","stepSimulationOnePairPass","pointerDown","pointerPos","neighborCounts","timeScale","grid","dt","max","min","applyBuoyancyAndGravity","applyFriction","integrate","applyPointerHeat","heat","heads","fill","invCell","cellSize","rows","cell","next","r2","p1","x0","x1","y0","y1","ny","nx","j","p2","dx","dy","d2","applyCohesionImpulse","sqrt","applyHeatConduction","applyBottomHeatOrAirCooling","buoyancy","f","pow","intensity","d","force","invD","fx","fy","conduction","neighborCount","distanceFromBottom","airExposure","renderFrame","ctx","canvas","imageRef","heatLut256","imageData","img","current","createImageData","ensureImageData","canvasWidth","canvasHeight","pixelSize","threshold","data32","data","buffer","black","w","influenceSum","heatWeightedSum","influence","rgba","py","yy","rowEnd","xx","drawMetaballs","putImageData","LavaLamp","canvasRef","useRef","ctxRef","rafRef","particlesRef","neighborCountsRef","Uint16Array","particleCountRef","gridRef","sizeRef","gameMusic","useMemo","PersonalAudio","musicAudioNoise","clickSound","clickAudioNoise","hasStarted","setHasStarted","useState","pointerDownRef","pointerPosRef","defaultSpeedIdx","speed","last","best","bestErr","Infinity","target","s","err","abs","speedToNearestIndex","speedIdx","setSpeedIdx","speedRef","useEffect","menuOpen","setMenuOpen","toggleMenu","useCallback","volume","setVolume","lavaLowColorRef","lavaHighColorRef","lavaLowColor","setLavaLowColor","lavaHighColor","setLavaHighColor","heatLutRef","window","innerWidth","innerHeight","getContext","initializeParticlesOnce","baselineArea","currentArea","density","scaled","computeParticleCount","count","particlesPerClump","floor","centerX","centerY","clumpHeat","offset","push","createParticles","ceil","cells","Int32Array","ensureGrid","saveMusicPosition","_gameMusic$currentTim","seconds","Number","isFinite","localStorage","setItem","String","_unused2","writeSavedMusicTimeSeconds","currentTime","id","setInterval","tick","onPageHide","onVisibilityChange","document","visibilityState","addEventListener","clearInterval","removeEventListener","pause","reset","updateOnce","draw","clockRef","acc","animate","now","clock","delta","requestAnimationFrame","toLocal","e","rect","getBoundingClientRect","clientX","left","clientY","top","onDown","onMove","onUp","playClick","play","_unused3","resumeMusicFromSavedTime","raw","getItem","_unused","readSavedMusicTimeSeconds","duration","_unused4","startLamp","initialCanvasSize","lastSpeedIdx","_jsxs","className","children","_jsx","ref","type","onClick","step","value","onChange","Audio","constructor","src","loop","arguments","undefined","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","readyState","isPlaying","timeLeft"],"sourceRoot":""}