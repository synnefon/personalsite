"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[399],{9399:(n,t,e)=>{e.r(t),e.d(t,{default:()=>I});var r=e(5043),c=e(579);const o={GRAVITY:.01,BUOYANCY:.04,FRICTION:.98,HEAT_RATE:.005,COOL_RATE:.0017,HEAT_CONDUCTION:.002,HEAT_SOURCE_DISTANCE:45,COHESION_RADIUS:25,COHESION_STRENGTH:.0035,MOUSE_HEAT_RADIUS:100},a={PARTICLE_RADIUS:10,PIXEL_SIZE:6,THRESHOLD:.8},u={COUNT:15,RADIUS:50,TOP_HALF_PROB:.3},s={WIDTH:1920,HEIGHT:1080,PARTICLES:1200};function l(n){return n<0?0:n>1?1:n}function i(n,t){return Math.hypot(n,t)}function h(n){const t=Math.random()*Math.PI*2,e=Math.random()*n;return{x:Math.cos(t)*e,y:Math.sin(t)*e}}function f(n,t,e){n.x<0?(n.x=0,n.vx*=-.5):n.x>t&&(n.x=t,n.vx*=-.5),n.y<0?(n.y=0,n.vy*=-.5):n.y>e&&(n.y=e,n.vy*=-.5)}function d(n,t,e,r,c,a){const u=n.length,s=o.GRAVITY,h=o.BUOYANCY,d=o.FRICTION,E=o.MOUSE_HEAT_RADIUS,T=1/E,C=o.HEAT_RATE,A=o.COOL_RATE,I=o.HEAT_SOURCE_DISTANCE,R=1/I,w=o.COHESION_RADIUS,v=1/w,O=o.COHESION_STRENGTH,m=o.HEAT_CONDUCTION,y=c.x,x=c.y;for(let o=0;o<u;o++){const c=n[o],u=c.heat*c.heat*h;if(c.vy+=s-u,c.vx*=d,c.vy*=d,c.x+=c.vx,c.y+=c.vy,r){const n=i(c.x-y,c.y-x);if(n<E){const t=1-n*T;c.heat+=2*C*t}}a[o]=0,f(c,t,e)}for(let o=0;o<u;o++){const t=n[o];for(let e=o+1;e<u;e++){const r=n[e],c=r.x-t.x,u=r.y-t.y,s=i(c,u);if(s>0&&s<w){a[o]++,a[e]++;const n=O*(1-s*v),l=1/s,i=c*l*n,h=u*l*n;t.vx+=i,t.vy+=h,r.vx-=i,r.vy-=h;const f=(t.heat-r.heat)*m;t.heat-=f,r.heat+=f}}}for(let o=0;o<u;o++){const t=n[o],r=e-t.y;if(r<I){const n=1-r*R;t.heat+=C*n}else{const n=8,e=1-(a[o]<n?a[o]:n)/n;t.heat-=A*(.2+.8*e)}t.heat=l(t.heat)}!function(n,t,e){for(let r=0;r<n.length;r++)f(n[r],t,e)}(n,t,e)}function E(n){const t=l(n);return{r:255,g:Math.round(50+205*t),b:0}}function T(n,t,e,r,c,o,a,u,s){for(let l=0;l<o;l++){const i=c+l;if(i>=e)continue;const h=i*t*4;for(let e=0;e<o;e++){const c=r+e;if(c>=t)continue;const o=h+4*c;n[o+0]=a,n[o+1]=u,n[o+2]=s,n[o+3]=255}}}function C(n,t,e,r){const c=t-n.x,o=e-n.y;return r/(c*c+o*o+1)}function A(n,t,e){const r=n.getContext("2d");if(!r)return;r.fillStyle="#000",r.fillRect(0,0,n.width,n.height);const c=function(n,t,e,r){const c=t.current;return c&&c.width===e&&c.height===r||(t.current=n.createImageData(e,r)),t.current}(r,e,n.width,n.height);!function(n,t,e,r){const c=n.data;c.fill(0);const o=a.PIXEL_SIZE,u=a.THRESHOLD,s=a.PARTICLE_RADIUS*a.PARTICLE_RADIUS;for(let a=0;a<r;a+=o)for(let n=0;n<e;n+=o){let l=0,i=0;for(let e=0;e<t.length;e++){const r=t[e],c=C(r,n,a,s);l+=c,i+=c*r.heat}if(l<=u)continue;const h=i/l,{r:f,g:d,b:A}=E(h);T(c,e,r,n,a,o,f,d,A)}}(c,t,n.width,n.height),r.putImageData(c,0,0)}function I(){const n=(0,r.useRef)(null),t=(0,r.useRef)(null),e=(0,r.useRef)([]),o=(0,r.useRef)(null),a=(0,r.useRef)(new Uint16Array(0)),l=(0,r.useRef)(null),[i,f]=(0,r.useState)(!0),E=(0,r.useRef)(!1),T=(0,r.useRef)({x:0,y:0}),C=(0,r.useCallback)((()=>{const n=window.innerWidth,t=window.innerHeight;null===l.current&&(l.current=function(n,t){const e=s.WIDTH*s.HEIGHT,r=n*t,c=s.PARTICLES/e,o=Math.round(r*c);return Math.max(200,Math.min(2e3,o))}(n,t));const r=l.current;e.current=function(n,t,e){const r=[],c=Math.floor(e/u.COUNT);for(let o=0;o<u.COUNT;o++){const e=Math.random()*n,o=Math.random()<u.TOP_HALF_PROB?Math.random()*t*.5:.5*t+Math.random()*t*.5,a=Math.random();for(let n=0;n<c;n++){const n=h(u.RADIUS);r.push({x:e+n.x,y:o+n.y,vx:0,vy:0,heat:a})}}for(;r.length<e;)r.push({x:Math.random()*n,y:Math.random()*t,vx:0,vy:0,heat:0});return r}(n,t,r),a.current=new Uint16Array(r)}),[]),I=(0,r.useCallback)((()=>{const n=e.current,t=window.innerWidth,r=window.innerHeight;a.current.length!==n.length&&(a.current=new Uint16Array(n.length)),d(n,t,r,E.current,T.current,a.current)}),[]),R=(0,r.useCallback)((()=>{const t=n.current;t&&A(t,e.current,o)}),[]),w=(0,r.useCallback)((()=>{i&&(I(),R(),t.current=requestAnimationFrame(w))}),[i,I,R]);(0,r.useEffect)((()=>{C()}),[C]),(0,r.useEffect)((()=>i?(t.current=requestAnimationFrame(w),()=>{null!==t.current&&cancelAnimationFrame(t.current),t.current=null}):(null!==t.current&&cancelAnimationFrame(t.current),void(t.current=null))),[i,w]),(0,r.useEffect)((()=>{const t=()=>{const t=n.current;t&&(!function(n){n.width=window.innerWidth,n.height=window.innerHeight}(t),o.current=null)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]);const v=(0,r.useCallback)(((n,t)=>{T.current={x:n,y:t}}),[]),O=(0,r.useCallback)((n=>{E.current=!0,v(n.clientX,n.clientY)}),[v]),m=(0,r.useCallback)((n=>{v(n.clientX,n.clientY)}),[v]),y=(0,r.useCallback)((()=>{E.current=!1}),[]),x=(0,r.useCallback)((n=>{const t=n.touches[0];t&&(E.current=!0,v(t.clientX,t.clientY))}),[v]),H=(0,r.useCallback)((n=>{const t=n.touches[0];t&&v(t.clientX,t.clientY)}),[v]),S=(0,r.useCallback)((()=>{E.current=!1}),[]),M=(0,r.useCallback)((()=>f((n=>!n))),[]),_=(0,r.useMemo)((()=>({w:window.innerWidth,h:window.innerHeight})),[]);return(0,c.jsxs)("div",{className:"lava-lamp-container",children:[(0,c.jsx)("canvas",{ref:n,className:"lava-lamp-canvas",width:_.w,height:_.h,onMouseDown:O,onMouseMove:m,onMouseUp:y,onMouseLeave:y,onTouchStart:x,onTouchMove:H,onTouchEnd:S}),(0,c.jsx)("div",{className:"lava-lamp-controls",children:(0,c.jsx)("button",{className:"lava-lamp-button",onClick:M,children:i?"\u23f8":"\u25b6"})})]})}}}]);
//# sourceMappingURL=399.88bc92b2.chunk.js.map