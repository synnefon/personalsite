{"version":3,"file":"static/js/627.817a0f43.chunk.js","mappings":"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","sources":["shufflenator/ShuffleScorers.js","shufflenator/Shuffler.js","shufflenator/ShuffleSimulator.js","shufflenator/Shufflenator.js"],"sourcesContent":["function calcAdjacentTermDifferences(cards) {\n    const deckLen = cards.length;\n    const adjacentTermDifferences = [];\n    for (let idx = 0; idx < deckLen; idx++) {\n        const nextIdx = (idx + 1) % deckLen;\n        let diff = (cards[nextIdx] - cards[idx]);\n        if (diff < 0) {\n            diff += deckLen;\n        }\n        adjacentTermDifferences.push(diff);\n    }\n    return adjacentTermDifferences;\n}\n\nfunction calcAverageNeighborDist(cards) {\n    return calcAdjacentTermDifferences(cards).reduce((a, b) => a + b, 0) / cards.length;\n}\n\nfunction calcLocationDelta(cards) {\n    let totalLocationDelta = 0;\n    for (let idx = 0; idx < cards.length; idx++) {\n        const delta = Math.abs(idx - cards[idx]);\n        totalLocationDelta += delta;\n    }\n    return totalLocationDelta / cards.length;\n}\n\nfunction calcShannonEntropy(cards) {\n    const adjacentTermDifferences = calcAdjacentTermDifferences(cards);\n    const termCounts = {};\n    for (const diff of adjacentTermDifferences) {\n        termCounts[diff] = (termCounts[diff] || 0) + 1;\n    }\n    const pCounts = Object.values(termCounts).map(c => c / cards.length);\n    const lnPCounts = pCounts.map(p => Math.abs(Math.log(p) * p)).filter(p => p > 0);\n    return lnPCounts.reduce((a, b) => a + b, 0);\n}\n\nexport const SCORE_TYPE = ['SHANNON_ENTROPY', 'NEIGHBOR_DIST', 'LOCATION_DELTA'];\nexport const SCORE_FUNCTION_MAP = {\n    \"SHANNON_ENTROPY\": calcShannonEntropy,\n    \"NEIGHBOR_DIST\": calcAverageNeighborDist,\n    \"LOCATION_DELTA\": calcLocationDelta\n};\n\n","import { SCORE_FUNCTION_MAP } from './ShuffleScorers';\n\nexport class ShuffledDeck {\n    constructor(cardList, permutation, scoreType) {\n        this.cardList = cardList;\n        this.permutation = permutation;\n        this.scoreType = scoreType;\n        this.score = SCORE_FUNCTION_MAP[scoreType](cardList);\n    }\n\n    equals(other) {\n        return other instanceof ShuffledDeck && this.cardList === other.cardList;\n    }\n\n    hash() {\n        return this.cardList.join(',');\n    }\n\n    print() {\n        console.log(this.permutation, \":\", this.score);\n    }\n}\n\nfunction formatResponse(originalDeck, cardPiles) {\n    return new ShuffledDeck(\n        cardPiles.flat(),\n        [...originalDeck.permutation, cardPiles.length],\n        originalDeck.scoreType\n    );\n}\n\nfunction shuffle(pileSelector, deck, numPiles) {\n    const piles = Array.from({ length: numPiles }, () => []);\n\n    for (let idx = 0; idx < deck.cardList.length; idx++) {\n        const pile = pileSelector(idx);\n        piles[pile].unshift(deck.cardList[idx]);\n    }\n\n    return formatResponse(deck, piles);\n}\n\nfunction pileShuffle(deck, numPiles) {\n    const pileSelector = (idx) => idx % numPiles;\n    return shuffle(pileSelector, deck, numPiles);\n}\n\nfunction randomPileShuffle(deck, numPiles) {\n    const pileSelector = () => Math.floor(Math.random() * numPiles);\n    return shuffle(pileSelector, deck, numPiles);\n}\n\n// function cutDeck(deck) {\n//     const halfWay = Math.floor(deck.cardList.length / 2);\n//     const pileSelector = (idx) => (idx < halfWay ? idx + halfWay : idx - halfWay);\n//     return shuffle(pileSelector, deck, deck.cardList.length);\n// }\n\nexport const SHUFFLE_STRAT = [\n    'PILE',\n    // 'RANDOM_PILE',\n    // 'CUT_DECK'\n]\n\nexport const SHUFFLE_FUNCTION_MAP = {\n    \"PILE\": pileShuffle,\n    // \"RANDOM_PILE\": randomPileShuffle\n};\n","import { SHUFFLE_FUNCTION_MAP, ShuffledDeck } from './Shuffler';\n// import { Worker, isMainThread, parentPort } from 'worker_threads';\n\n// const MT_CUTOFF = 5000;\n\nfunction runPerm(shuffledDecks, pileDivisions, shuffleFunction) {\n    const newDecks = [];\n    for (const deck of shuffledDecks) {\n        for (const numPiles of pileDivisions) {\n            const res = shuffleFunction(deck, numPiles);\n            newDecks.push(res);\n        }\n    }\n\n    return newDecks;\n}\n\nexport const shuffleDecks = async ({\n    shuffleStrat,\n    scoreType,\n    maxShuffles,\n    deckSize,\n    minNumPiles,\n    maxNumPiles\n}) => {\n    const pileDivisions = Array.from({ length: maxNumPiles - minNumPiles + 1 }, (_, i) => i + minNumPiles);\n    const baseCardList = Array.from({ length: deckSize }, (_, i) => i);\n    const shuffleFunction = SHUFFLE_FUNCTION_MAP[shuffleStrat];\n\n    let shuffledDecks = [new ShuffledDeck(baseCardList, [], scoreType)];\n    let best = null;\n\n    for (let i = 0; i < maxShuffles; i++) {\n        const newDecks = runPerm(shuffledDecks, pileDivisions, shuffleFunction);\n\n        shuffledDecks = [...new Set([...shuffledDecks, ...newDecks])];\n        shuffledDecks.sort((a, b) => b.score - a.score);\n        \n        best = shuffledDecks[0];\n    }\n\n    return best;\n}\n","import { useRef, useState } from 'react';\nimport MultiRangeSlider from \"multi-range-slider-react\";\nimport Select from 'react-select'\n\nimport { shuffleDecks } from './ShuffleSimulator';\nimport { SHUFFLE_STRAT } from './Shuffler';\nimport { SCORE_TYPE } from './ShuffleScorers';\n\nimport '../styles/shufflenator.css'\n\nconst selectStyles = {\n  control: (baseStyles, { isFocused }) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n    borderColor: isFocused ? 'var(--text-color)' : 'var(--tertiary)',\n    cursor: \"var(--pointer)\",\n  }),\n  singleValue: (baseStyles) => ({\n    ...baseStyles,\n    color:'var(--alt-text-color)',\n  }),\n  option: (baseStyles, { isFocused, isSelected }) => ({\n    ...baseStyles,\n    cursor: \"var(--pointer)\",\n    color: isSelected ? 'var(--bg-color)' : 'var(--alt-text-color)',\n    backgroundColor: isSelected ? 'var(--tertiary)' : (isFocused ? \"var(--text-color)\" : \"var(--alt-bg-color)\"),\n    fontWeight: isSelected ? 'bold' : 'normal',\n  }),\n  menu: (baseStyles) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n  }),\n  indicatorSeparator: (baseStyles) => ({...baseStyles, backgroundColor: 'var(--alt-text-color)'})\n};\n\nexport default function Shufflenator() {\n  const cardsInDeck = useRef();\n  const [pileMin, setPileMin] = useState(5);\n  const [pileMax, setPileMax] = useState(10);\n  const [maxShuffles, setMaxShuffles] = useState({value: 3, label: 3});\n  const [shuffleStrat, setShuffleStrat] = useState({value: \"PILE\", label: \"PILE\"});\n  const [scoreType, setScoreType] = useState({value: \"SHANNON_ENTROPY\", label: \"SHANNON_ENTROPY\"});\n  const [results, setResults] = useState(null);\n  const [showExplainer, setShowExplainer] = useState(false);\n\n  const CardsInDeck = () => {\n    return (\n      <div className='shufflenator-selector-row'>\n        <div className='shufflenator-selector-row-title'>cards in deck:</div>\n        <input\n          className='shufflenator-selector-row-number'\n          type=\"number\"\n          ref={cardsInDeck}\n          defaultValue={52}\n          step={10}\n          min={10}\n          max={1_000}\n        />\n      </div>\n    );\n  };\n  const cardsInDeckInput = useRef(<CardsInDeck/>);\n\n  const PileSizeRange = () => {\n    const MAX_DIF = 10;\n\n    const onChange = e => {\n      const goingDown = e.minValue !== pileMin;\n      const newMin = goingDown \n        ? e.minValue \n        : Math.max(e.minValue, e.maxValue - MAX_DIF);\n      const newMax = goingDown \n        ? Math.min(e.maxValue, e.minValue + MAX_DIF) \n        : e.maxValue;\n      setPileMin(newMin);\n      setPileMax(newMax);\n    };\n\n    return (\n      <div className='shufflenator-selector-row'>\n        <div className='shufflenator-selector-row-title'>pile size range:</div>\n        <MultiRangeSlider\n          className='shufflenator-selector-row-slider'\n          min={2}\n          max={20}\n          step={1}\n          minValue={pileMin}\n          maxValue={pileMax}\n          onChange={onChange}\n          preventWheel={true}\n          stepOnly={false}\n          ruler={false}\n          label={false}\n        />\n      </div>\n    );\n  };\n\n  const Dropdown = ({title, options, value, defaultValue, onChange}) => {\n    options = options.map(o => {\n      return {value: o, label: o};\n    });\n    return (\n      <div className='shufflenator-selector-row'>\n        <div className='shufflenator-selector-row-title'>{title}:</div>\n        <Select\n          value={value}\n          defaultValue={defaultValue}\n          options={options}\n          onChange={onChange}\n          isSearchable={false}\n          styles={selectStyles}\n        />\n      </div>\n    );\n  };\n\n  const MaxShuffles = () => {\n    return (\n      <Dropdown\n        title=\"max shuffles\"\n        options={[1, 2, 3, 4, 5]}\n        value={maxShuffles}\n        defaultValue={3}\n        onChange={setMaxShuffles}\n      />\n    );\n  };\n\n  // const ShuffleStrategy = () => {\n  //   return (\n  //     <Dropdown\n  //       title=\"shuffle strategy\"\n  //       options={SHUFFLE_STRAT}\n  //       value={shuffleStrat}\n  //       defaultValue={\"PILE\"}\n  //       onChange={setShuffleStrat}\n  //     />\n  //   );\n  // }\n\n  const ScoreType = () => {\n    return (\n      <Dropdown\n        title=\"score strategy\"\n        options={SCORE_TYPE}\n        value={scoreType}\n        defaultValue={\"SHANNON_ENTROPY\"}\n        onChange={setScoreType}\n      />\n    );\n  };\n  \n  const shuffle = async () => {\n    const ret = await shuffleDecks({\n      shuffleStrat: shuffleStrat.value, \n      scoreType: scoreType.value,\n      maxShuffles: maxShuffles.value,\n      deckSize: cardsInDeck.current.value,\n      minNumPiles: pileMin,\n      maxNumPiles: pileMax\n    })\n    setResults(ret);\n  };\n\n  const SubmitButton = () => {\n    return <div onClick={shuffle} className=\"shufflenator-submit-button\">\n      <div className=\"shufflenator-submit-button-text\">submit</div>\n    </div>;\n  };\n\n  const Results = () => {\n    return (\n      <div className=\"shufflenator-results\">\n        <span className=\"shufflenator-results-number\">optimal sequence:</span>\n        {results.permutation.map((n, i) => (\n          <div key={i}>\n            &nbsp;&nbsp;{i + 1}. cyclically deal into <span className=\"shufflenator-results-number\">{n}</span> piles.\n          </div>\n        ))}\n        <br/>\n        <div className=\"shufflenator-results-note\">* after each step, reassemble piles in order.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"shufflenator\">\n      <div className=\"shufflenator-header\">\n        <h1 className=\"shufflenator-title\">shufflenator</h1>\n        <button className=\"shufflenator-help-button\" onClick={() => setShowExplainer(true)}>\n          ?\n        </button>\n      </div>\n\n      {showExplainer && (\n        <div className=\"shufflenator-modal-overlay\" onClick={() => setShowExplainer(false)}>\n          <div className=\"shufflenator-modal\" onClick={(e) => e.stopPropagation()}>\n            <button className=\"shufflenator-modal-close\" onClick={() => setShowExplainer(false)}>\n              ×\n            </button>\n            <div className=\"shufflenator-explainer\">\n              <h2>how it works</h2>\n              <p>\n                this tool calculates the best pile shuffle pattern for thoroughly randomizing a deck of cards.\n                pile shuffling alone doesn't randomize—it performs a deterministic permutation.\n                but the right sequence of pile shuffles can spread cards maximally before you do your riffle shuffles.\n              </p>\n              <p>\n                configure your deck size, pile size range, and how many shuffles you want to perform.\n                the calculator will find the permutation that maximizes shannon entropy (randomness) given your constraints.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className='shufflenator-selector'>\n        {cardsInDeckInput.current}\n        <PileSizeRange/>\n        <MaxShuffles/>\n        {/* <ShuffleStrategy/> */}\n        {/* <ScoreType/> */}\n      </div>\n      <SubmitButton/>\n      {results && <Results/>}\n    </div>\n  );\n};\n"],"names":["calcAdjacentTermDifferences","cards","deckLen","length","adjacentTermDifferences","idx","diff","push","SCORE_FUNCTION_MAP","termCounts","Object","values","map","c","p","Math","abs","log","filter","reduce","a","b","totalLocationDelta","ShuffledDeck","constructor","cardList","permutation","scoreType","this","score","equals","other","hash","join","print","console","shuffle","pileSelector","deck","numPiles","piles","Array","from","unshift","originalDeck","cardPiles","flat","SHUFFLE_FUNCTION_MAP","runPerm","shuffledDecks","pileDivisions","shuffleFunction","newDecks","res","shuffleDecks","async","shuffleStrat","maxShuffles","deckSize","minNumPiles","maxNumPiles","_ref","_","i","baseCardList","best","Set","sort","selectStyles","control","baseStyles","isFocused","_objectSpread","backgroundColor","borderColor","cursor","singleValue","color","option","_ref2","isSelected","fontWeight","menu","indicatorSeparator","Shufflenator","cardsInDeck","useRef","pileMin","setPileMin","useState","pileMax","setPileMax","setMaxShuffles","value","label","setShuffleStrat","setScoreType","results","setResults","showExplainer","setShowExplainer","CardsInDeck","_jsxs","className","children","_jsx","type","ref","defaultValue","step","min","max","cardsInDeckInput","PileSizeRange","MultiRangeSlider","minValue","maxValue","onChange","e","goingDown","newMin","newMax","preventWheel","stepOnly","ruler","Dropdown","_ref3","title","options","o","Select","isSearchable","styles","MaxShuffles","ret","current","SubmitButton","onClick","Results","n","stopPropagation"],"sourceRoot":""}