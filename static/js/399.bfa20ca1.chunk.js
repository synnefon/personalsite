"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[399],{9399:(t,e,n)=>{n.r(e),n.d(e,{default:()=>y});var a=n(5043),r=n(579);const c=500,o=.01,l=.04,s=.98,h=.005,i=.0028,u=.002,f=30,d=25,m=.003,x=10,v=6;function y(){const t=(0,a.useRef)(null),e=(0,a.useRef)(null),n=(0,a.useRef)([]),[y,w]=(0,a.useState)(!0),M=(0,a.useRef)(!1),g=(0,a.useRef)({x:0,y:0}),p=(0,a.useCallback)((()=>{const t=window.innerWidth,e=window.innerHeight,n=[],a=Math.floor(c/15);for(let r=0;r<15;r++){const r=Math.random()*t,c=Math.random()<.3?Math.random()*e*.5:.5*e+Math.random()*e*.5,o=Math.random();for(let t=0;t<a;t++){const t=Math.random()*Math.PI*2,e=50*Math.random();n.push({x:r+Math.cos(t)*e,y:c+Math.sin(t)*e,vx:0,vy:0,heat:o})}}for(;n.length<c;)n.push({x:Math.random()*t,y:Math.random()*e,vx:0,vy:0,heat:0});return n}),[]);(0,a.useEffect)((()=>{n.current=p()}),[p]);const b=(0,a.useCallback)((()=>{const t=n.current,e=window.innerWidth,a=window.innerHeight,r=t.map((e=>t.filter((t=>e!==t&&Math.hypot(t.x-e.x,t.y-e.y)<d)).length));for(let n=0;n<t.length;n++){const c=t[n],u=Math.pow(c.heat,2)*l;if(c.vy+=o-u,c.vx*=s,c.vy*=s,c.x+=c.vx,c.y+=c.vy,M.current){const t=Math.hypot(c.x-g.current.x,c.y-g.current.y),e=100;if(t<e){const n=1-t/e;c.heat+=2*h*n}}const d=a-c.y;if(d<f){const t=1-d/f;c.heat+=h*t}else{const t=8,e=1-Math.min(r[n],t)/t;c.heat-=i*(.2+.8*e)}c.heat=Math.max(0,Math.min(1,c.heat)),c.x<0?(c.x=0,c.vx*=-.5):c.x>e&&(c.x=e,c.vx*=-.5),c.y<0?(c.y=0,c.vy*=-.5):c.y>a&&(c.y=a,c.vy*=-.5)}for(let n=0;n<t.length;n++){const e=t[n];for(let a=n+1;a<t.length;a++){const n=t[a],r=n.x-e.x,c=n.y-e.y,o=Math.hypot(r,c);if(o>0&&o<d){const t=m*(1-o/d),a=r/o*t,l=c/o*t;e.vx+=a,e.vy+=l,n.vx-=a,n.vy-=l;const s=(e.heat-n.heat)*u;e.heat-=s,n.heat+=s}}}}),[]),k=(0,a.useCallback)((()=>{const e=t.current;if(!e)return;const a=e.getContext("2d");if(!a)return;const r=n.current;a.fillStyle="#000",a.fillRect(0,0,e.width,e.height);const c=a.createImageData(e.width,e.height),o=c.data;for(let t=0;t<e.height;t+=v)for(let n=0;n<e.width;n+=v){let a=0,c=0;for(const e of r){const r=n-e.x,o=t-e.y,l=x*x/(r*r+o*o+1);a+=l,c+=l*e.heat}if(a>.8){const r=c/a,l=Math.floor(100+155*r),s=Math.floor(50+205*r),h=Math.floor(200-200*r);for(let a=0;a<v;a++){const r=t+a;if(!(r>=e.height))for(let t=0;t<v;t++){const a=n+t;if(a>=e.width)continue;const c=4*(r*e.width+a);o[c+0]=l,o[c+1]=s,o[c+2]=h,o[c+3]=255}}}}a.putImageData(c,0,0)}),[]),C=(0,a.useCallback)((()=>{y&&(b(),k(),e.current=requestAnimationFrame(C))}),[y,b,k]);(0,a.useEffect)((()=>(y?e.current=requestAnimationFrame(C):null!==e.current&&(cancelAnimationFrame(e.current),e.current=null),()=>{null!==e.current&&cancelAnimationFrame(e.current)})),[y,C]),(0,a.useEffect)((()=>{function e(){t.current&&(t.current.width=window.innerWidth,t.current.height=window.innerHeight,n.current=p())}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[p]);const E=(0,a.useCallback)((t=>{M.current=!0,g.current={x:t.clientX,y:t.clientY}}),[]),R=(0,a.useCallback)((t=>{g.current={x:t.clientX,y:t.clientY}}),[]),j=(0,a.useCallback)((()=>{M.current=!1}),[]),N=(0,a.useCallback)((t=>{t.touches.length>0&&(M.current=!0,g.current={x:t.touches[0].clientX,y:t.touches[0].clientY})}),[]),A=(0,a.useCallback)((t=>{t.touches.length>0&&(g.current={x:t.touches[0].clientX,y:t.touches[0].clientY})}),[]),F=(0,a.useCallback)((()=>{M.current=!1}),[]),H=(0,a.useCallback)((()=>w((t=>!t))),[]),W=(0,a.useCallback)((()=>{n.current=p(),k()}),[p,k]);return(0,r.jsxs)("div",{className:"lava-lamp-container",children:[(0,r.jsx)("canvas",{ref:t,className:"lava-lamp-canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:E,onMouseMove:R,onMouseUp:j,onMouseLeave:j,onTouchStart:N,onTouchMove:A,onTouchEnd:F}),(0,r.jsxs)("div",{className:"lava-lamp-controls",children:[(0,r.jsx)("button",{className:"lava-lamp-button",onClick:H,children:y?"\u23f8":"\u25b6"}),(0,r.jsx)("button",{className:"lava-lamp-button",onClick:W,children:"\u27f2"})]})]})}}}]);
//# sourceMappingURL=399.bfa20ca1.chunk.js.map