(()=>{let t=null,e=null,n=null;const r={SHANNON_ENTROPY:function(r){const o=r.length;if(!t||t.length<o){t=new Uint32Array(o),e=new Uint16Array(o),n=new Float64Array(o+1);for(let t=1;t<=o;t++){const e=t/o;n[t]=-Math.log(e)*e}}let l=0;for(let n=0;n<o-1;n++){let s=r[n+1]-r[n];s<0&&(s+=o),0===t[s]&&(e[l++]=s),t[s]++}let s=r[0]-r[o-1];s<0&&(s+=o),0===t[s]&&(e[l++]=s),t[s]++;let c=0;for(let a=0;a<l;a++){const r=e[a];c+=n[t[r]],t[r]=0}return c},NEIGHBOR_DIST:function(t){const e=t.length;let n=0;for(let r=0;r<e;r++){let o=t[(r+1)%e]-t[r];o<0&&(o+=e),n+=o}return n/e},LOCATION_DELTA:function(t){let e=0;for(let n=0;n<t.length;n++)e+=Math.abs(n-t[n]);return e/t.length}};let o={};function l(t,e,n){return{cardList:t,permutation:e,score:r[n](t)}}const s={PILE:function(t,e,n){const r=t.cardList,s=r.length,c=o[e],a=new Array(s);for(let o=0;o<s;o++)a[c[o]]=r[o];return l(a,t.permutation.concat(e),n)},RANDOM_PILE:function(t,e,n){return function(t,e,n,r){const o=Array.from({length:n},(()=>[]));for(let l=0;l<e.cardList.length;l++)o[t(l)].unshift(e.cardList[l]);return l(o.flat(),e.permutation.concat(n),r)}((()=>Math.floor(Math.random()*e)),t,e,n)}},c=self;c.onmessage=t=>{const{shuffleStrat:e,scoreType:n,maxShuffles:r,deckSize:a,minNumPiles:f,maxNumPiles:u}=t.data,i=Array.from({length:u-f+1},((t,e)=>e+f)),h=s[e],p=i.length;o={};for(const l of i){const t=new Int32Array(a),e=Math.floor(a/l),n=a%l;let r=0;const s=new Array(l),c=new Array(l);for(let o=0;o<l;o++)s[o]=r,c[o]=o<n?e+1:e,r+=c[o];const f=new Array(l);for(let o=0;o<l;o++)f[o]=s[o]+c[o]-1;for(let o=0;o<a;o++)t[o]=f[o%l],f[o%l]--;o[l]=t}const m=l(Array.from({length:a},((t,e)=>e)),[],n);let d=0;for(let o=1;o<=r;o++)d+=Math.pow(p,o);let g=0,A=null;const y=[{deck:m,depth:0}];!function t(){const e=performance.now();for(;y.length>0;){const{deck:o,depth:l}=y.pop();if(l>0&&(g++,(!A||o.score>A.score)&&(A={permutation:[...o.permutation],score:o.score})),l<r)for(let t=p-1;t>=0;t--){const e=h(o,i[t],n);y.push({deck:e,depth:l+1})}if(performance.now()-e>200)return c.postMessage({type:"progress",completed:g,total:d,round:1}),void setTimeout(t,0)}c.postMessage({type:"result",data:A?{permutation:A.permutation,score:A.score}:null})}()}})();
//# sourceMappingURL=663.e86008d8.chunk.js.map