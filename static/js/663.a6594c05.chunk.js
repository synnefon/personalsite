(()=>{let t=null,o=null,e=null;const n={SHANNON_ENTROPY:function(n){const r=n.length;if(!t||t.length<r){t=new Uint32Array(r),o=new Uint16Array(r),e=new Float64Array(r+1);for(let t=1;t<=r;t++){const o=t/r;e[t]=-Math.log(o)*o}}let c=0;for(let e=0;e<r-1;e++){let s=n[e+1]-n[e];s<0&&(s+=r),0===t[s]&&(o[c++]=s),t[s]++}let s=n[0]-n[r-1];s<0&&(s+=r),0===t[s]&&(o[c++]=s),t[s]++;let a=0;for(let l=0;l<c;l++){const n=o[l];a+=e[t[n]],t[n]=0}return a},NEIGHBOR_DIST:function(t){const o=t.length;let e=0;for(let n=0;n<o;n++){let r=t[(n+1)%o]-t[n];r<0&&(r+=o),e+=r}return e/o},LOCATION_DELTA:function(t){let o=0;for(let e=0;e<t.length;e++)o+=Math.abs(e-t[e]);return o/t.length}};let r=0,c=0,s=0,a=0,l=0,f={};function i(t,o,e){const r=performance.now(),s=n[e](t);return c+=performance.now()-r,{cardList:t,permutation:o,score:s}}const m={PILE:function(t,o,e){const n=performance.now(),c=t.cardList,a=c.length,l=f[o],m=new Array(a);for(let r=0;r<a;r++)m[l[r]]=c[r];const p=performance.now();r+=p-n;const u=performance.now(),d=t.permutation.concat(o);return s+=performance.now()-u,i(m,d,e)},RANDOM_PILE:function(t,o,e){return function(t,o,e,n){const r=Array.from({length:e},(()=>[]));for(let c=0;c<o.cardList.length;c++)r[t(c)].unshift(o.cardList[c]);return i(r.flat(),o.permutation.concat(e),n)}((()=>Math.floor(Math.random()*o)),t,o,e)}},p=self;p.onmessage=t=>{const{shuffleStrat:o,scoreType:e,maxShuffles:n,deckSize:u,minNumPiles:d,maxNumPiles:h}=t.data;console.log("[params] deck=".concat(u," piles=").concat(d,"-").concat(h," rounds=").concat(n," strat=").concat(o," score=").concat(e));const w=Array.from({length:h-d+1},((t,o)=>o+d)),g=m[o],A=w.length;f={};for(const r of w){const t=new Int32Array(u),o=Math.floor(u/r),e=u%r;let n=0;const c=new Array(r),s=new Array(r);for(let l=0;l<r;l++)c[l]=n,s[l]=l<e?o+1:o,n+=s[l];const a=new Array(r);for(let l=0;l<r;l++)a[l]=c[l]+s[l]-1;for(let l=0;l<u;l++)t[l]=a[l%r],a[l%r]--;f[r]=t}const y=i(Array.from({length:u},((t,o)=>o)),[],e);let x=0;for(let r=1;r<=n;r++)x+=Math.pow(A,r);let F=0,N=null;const k=[{deck:y,depth:0}];r=0,c=0,s=0,a=0,l=0,function t(){const o=performance.now();for(;k.length>0;){let f,i;f=performance.now();const{deck:m,depth:u}=k.pop();if(i=performance.now(),a+=i-f,u>0&&(F++,(!N||m.score>N.score)&&(N={permutation:[...m.permutation],score:m.score})),u<n)for(let t=A-1;t>=0;t--){const o=g(m,w[t],e);f=performance.now(),k.push({deck:o,depth:u+1}),a+=performance.now()-f}f=performance.now();const d=f-o;if(l+=performance.now()-f,d>200)return p.postMessage({type:"progress",completed:F,total:x,round:1}),console.log("[profile] nodes=".concat(F," | shuffle=").concat(r.toFixed(0),"ms score=").concat(c.toFixed(0),"ms spread=").concat(s.toFixed(0),"ms | stackOps=").concat(a.toFixed(0),"ms timeCheck=").concat(l.toFixed(0),"ms")),void setTimeout(t,0)}console.log("[profile FINAL] nodes=".concat(F," | shuffle=").concat(r.toFixed(0),"ms score=").concat(c.toFixed(0),"ms spread=").concat(s.toFixed(0),"ms | stackOps=").concat(a.toFixed(0),"ms timeCheck=").concat(l.toFixed(0),"ms")),p.postMessage({type:"result",data:N?{permutation:N.permutation,score:N.score}:null})}()}})();
//# sourceMappingURL=663.a6594c05.chunk.js.map