{"version":3,"file":"static/js/6.3aa8b298.chunk.js","mappings":"qJAAA,MAAMA,EAAQ,IAAIC,IAAI,CAAC,OAAQ,SAElBC,EAA0B,CAAC,OAAQ,MAAO,MAAO,Q,aCG/C,SAASC,IACpB,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,QAC1CC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,OAC1BG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,cAClCK,EAAeC,IAAoBN,EAAAA,EAAAA,UAAS,IA6BnD,OACIO,EAAAA,EAAAA,KAAA,OACIC,UAAU,UACVC,MAAO,CAAEC,QAAS,QAASC,UAE3BC,EAAAA,EAAAA,MAAA,OACIJ,UAAU,kBAAiBG,SAAA,EAE3BJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,mBACJJ,EAAAA,EAAAA,KAAA,SAAOM,KAAK,OAAOC,OAAQlB,EAAwBmB,KAAIC,GAAC,IAAAC,OAAQD,KAAME,SApCzDC,UACrB,MAAMC,EAAOC,EAAEC,OAAOC,MAAM,GAC5B,IAAKH,EAAM,OACX,MAAMI,EAAcJ,EAAKP,KACzBT,EAAYgB,EAAKK,MACjBnB,EDZD,SAA0BkB,GAC/B,MAAO,CACL,KAAQ,CAAC,MAAO,QAChB,IAAO,CAAC,MAAO,QACf,IAAO,CAAC,MAAO,QACf,KAAQ,CAAC,MAAO,QAChBA,EACJ,CCKyBE,CAAiB5B,IAElC,IACI,MAAM6B,QDNXR,eAA4BC,EAAMtB,GACvC,KAAMsB,aAAgBQ,MAAO,MAAM,IAAIC,MAAM,+BAC7C,MAAMC,EAASC,IAAIC,gBAAgBZ,GAC7Ba,QAAY,IAAIC,SAAQ,CAACC,EAAKC,KAClC,MAAMC,EAAK,IAAIC,MACfD,EAAGE,OAAS,IAAMJ,EAAIE,GACtBA,EAAGG,QAAUJ,EACbC,EAAGI,IAAMX,CAAM,IAGXY,EAASC,SAASC,cAAc,UAkBtC,OAjBAF,EAAOG,MAAQZ,EAAIY,MACnBH,EAAOI,OAASb,EAAIa,OACRJ,EAAOK,WAAW,MAE1BC,UAAUf,EAAK,EAAG,SAEH,IAAIC,SAASC,GAC9BO,EAAOO,QACJC,IACCnB,IAAIoB,gBAAgBrB,GACpBK,EAAIe,EAAE,GAERpD,EACAJ,EAAM0D,IAAItD,GAAgB,SAAOuD,IAKvC,CCvBqCC,CAAalC,EAAMI,GAC5CtB,EAAQyB,EACZ,CAAE,MAAO4B,GACLC,QAAQC,MAAMF,EAClB,MAyBQhD,EAAAA,EAAAA,KAAA,OAAKE,MAAO,CAAEiD,aAAc,UAAW/C,UACnCC,EAAAA,EAAAA,MAAA,SAAAD,SAAA,CAAO,iBACY,KACfJ,EAAAA,EAAAA,KAAA,UAAQoD,MAAO7D,EAAcoB,SAAWG,GAAMtB,EAAgBsB,EAAEC,OAAOqC,OAAOhD,SACzEN,EAAcU,KAAIC,IACfT,EAAAA,EAAAA,KAAA,UAAgBoD,MAAK,GAAA1C,OAAKD,GAAIL,SAAA,GAAAM,OAAKD,IAAtBA,YAM5Bf,IACGM,EAAAA,EAAAA,KAAA,OAAKE,MAAO,CAAEmD,UAAW,QAASjD,UAC9BJ,EAAAA,EAAAA,KAAA,UACIC,UAAU,uBACVqD,QArCDC,KACnB,IAAK7D,EAAM,OACX,MAAM8D,EAAMhC,IAAIC,gBAAgB/B,GAC1B+D,EAAIrB,SAASC,cAAc,KACjCoB,EAAEC,KAAOF,EACTC,EAAEE,SAAQ,GAAAjD,OAAMd,EAAQ,KAAAc,OAAInB,GAC5B6C,SAASwB,KAAKC,YAAYJ,GAC1BA,EAAEK,QACF1B,SAASwB,KAAKG,YAAYN,GAC1BjC,IAAIoB,gBAAgBY,EAAI,EA4BoBpD,SAC3B,mBAQzB,C","sources":["toolbox/fileConversions.js","toolbox/Toolbox.js"],"sourcesContent":["const LOSSY = new Set([\"jpeg\", \"webp\"]);\n\nexport const convertableImageFormats = [\"jpeg\", \"jpg\", \"png\", \"webp\"];\n\nexport function getOutputFormats(inputFormat) {\n  return {\n    \"jpeg\": [\"png\", \"webp\"],\n    \"jpg\": [\"png\", \"webp\"],\n    \"png\": [\"jpg\", \"webp\"],\n    \"webp\": [\"png\", \"jpg\"]\n  }[inputFormat]\n}\n\nexport async function convertImage(file, outputFormat) {\n  if (!(file instanceof File)) throw new Error(\"Input must be a File object\");\n  const srcUrl = URL.createObjectURL(file);\n  const img = await new Promise((res, rej) => {\n    const im = new Image();\n    im.onload = () => res(im);\n    im.onerror = rej;\n    im.src = srcUrl;\n  });\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = img.width;\n  canvas.height = img.height;\n  const ctx = canvas.getContext(\"2d\");\n\n  ctx.drawImage(img, 0, 0);\n\n  const blob = await new Promise((res) =>\n    canvas.toBlob(\n      (b) => {\n        URL.revokeObjectURL(srcUrl);\n        res(b);\n      },\n      outputFormat,\n      LOSSY.has(outputFormat) ? 0.92 : undefined\n    )\n  );\n\n  return blob;\n}\n","import { useState } from 'react';\nimport { convertImage, convertableImageFormats, getOutputFormats } from \"./fileConversions\";\n\nimport \"../styles/toolbox.css\";\n\nexport default function Toolbox() {\n    const [outputFormat, setOutputFormat] = useState(\"png\");\n    const [blob, setBlob] = useState(null);\n    const [fileName, setFileName] = useState(\"converted\")\n    const [outputFormats, setOutputFormats] = useState([])\n\n    const handleFileChange = async (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        const inputFormat = file.type;\n        setFileName(file.name)\n        setOutputFormats(getOutputFormats(outputFormat))\n\n        try {\n            const resultBlob = await convertImage(file, inputFormat, outputFormat);\n            setBlob(resultBlob);\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const handleDownload = () => {\n        if (!blob) return;\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `${fileName}.${outputFormat}`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    };\n\n    return (\n        <div\n            className=\"toolbox\"\n            style={{ padding: \"1rem\" }}\n        >\n            <div\n                className='file-conversion'\n            >\n                <h2>convert image</h2>\n                <input type=\"file\" accept={convertableImageFormats.map(f => `.${f}`)} onChange={handleFileChange} />\n                <div style={{ marginBottom: \"0.5rem\" }}>\n                    <label>\n                        output format:{\" \"}\n                        <select value={outputFormat} onChange={(e) => setOutputFormat(e.target.value)}>\n                            {outputFormats.map(f =>\n                                <option key={f} value={`${f}`}>{`${f}`}</option>)\n                            }\n                        </select>\n                    </label>\n                </div>\n\n                {blob && (\n                    <div style={{ marginTop: \"1rem\" }}>\n                        <button\n                            className='download-file-button'\n                            onClick={handleDownload}\n                        >\n                            Download\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}"],"names":["LOSSY","Set","convertableImageFormats","Toolbox","outputFormat","setOutputFormat","useState","blob","setBlob","fileName","setFileName","outputFormats","setOutputFormats","_jsx","className","style","padding","children","_jsxs","type","accept","map","f","concat","onChange","async","file","e","target","files","inputFormat","name","getOutputFormats","resultBlob","File","Error","srcUrl","URL","createObjectURL","img","Promise","res","rej","im","Image","onload","onerror","src","canvas","document","createElement","width","height","getContext","drawImage","toBlob","b","revokeObjectURL","has","undefined","convertImage","err","console","error","marginBottom","value","marginTop","onClick","handleDownload","url","a","href","download","body","appendChild","click","removeChild"],"sourceRoot":""}