{"version":3,"file":"static/js/971.8e59eae5.chunk.js","mappings":"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","sources":["shufflenator/Shufflenator.js"],"sourcesContent":["import MultiRangeSlider from \"multi-range-slider-react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport Select from \"react-select\";\n\nimport { SCORE_TYPE } from \"./ShuffleScorers\";\n\nimport \"../styles/shufflenator.css\";\n\nconst selectStyles = {\n  control: (baseStyles, { isFocused }) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n    borderColor: isFocused ? \"var(--text-color)\" : \"var(--tertiary)\",\n    cursor: \"var(--pointer)\",\n  }),\n  singleValue: (baseStyles) => ({\n    ...baseStyles,\n    color: \"var(--alt-text-color)\",\n  }),\n  option: (baseStyles, { isFocused, isSelected }) => ({\n    ...baseStyles,\n    cursor: \"var(--pointer)\",\n    color: isSelected ? \"var(--bg-color)\" : \"var(--alt-text-color)\",\n    backgroundColor: isSelected\n      ? \"var(--tertiary)\"\n      : isFocused\n        ? \"var(--text-color)\"\n        : \"var(--alt-bg-color)\",\n    fontWeight: isSelected ? \"bold\" : \"normal\",\n  }),\n  menu: (baseStyles) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-bg-color)\",\n  }),\n  indicatorSeparator: (baseStyles) => ({\n    ...baseStyles,\n    backgroundColor: \"var(--alt-text-color)\",\n  }),\n};\n\nexport default function Shufflenator() {\n  const cardsInDeck = useRef();\n  const workerRef = useRef(null);\n\n  useEffect(() => {\n    return () => {\n      workerRef.current?.terminate();\n      clearTimeout(progressTimerRef.current);\n    };\n  }, []);\n\n  const [pileMin, setPileMin] = useState(5);\n  const [pileMax, setPileMax] = useState(10);\n  const [maxShuffles, setMaxShuffles] = useState({ value: 3, label: 3 });\n  const [shuffleStrat] = useState({ value: \"PILE\", label: \"PILE\" });\n  const [scoreType, setScoreType] = useState({\n    value: \"SHANNON_ENTROPY\",\n    label: \"SHANNON_ENTROPY\",\n  });\n  const [results, setResults] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [showProgress, setShowProgress] = useState(false);\n  const [rounds, setRounds] = useState([]);\n  const progressTimerRef = useRef(null);\n  const [showExplainer, setShowExplainer] = useState(false);\n\n  const CardsInDeck = () => {\n    return (\n      <div className=\"shufflenator-selector-row\">\n        <div className=\"shufflenator-selector-row-title\">cards in deck:</div>\n        <input\n          className=\"shufflenator-selector-row-number\"\n          type=\"number\"\n          ref={cardsInDeck}\n          defaultValue={100}\n          step={10}\n          min={10}\n          max={1_000}\n        />\n      </div>\n    );\n  };\n  const cardsInDeckInput = useRef(<CardsInDeck />);\n\n  const onPileRangeChange = (e) => {\n    setPileMin(e.minValue);\n    setPileMax(e.maxValue);\n  };\n\n  const Dropdown = ({ title, options, value, defaultValue, onChange }) => {\n    options = options.map((o) => {\n      return { value: o, label: o };\n    });\n    return (\n      <div className=\"shufflenator-selector-row\">\n        <div className=\"shufflenator-selector-row-title\">{title}:</div>\n        <Select\n          value={value}\n          defaultValue={defaultValue}\n          options={options}\n          onChange={onChange}\n          isSearchable={false}\n          styles={selectStyles}\n        />\n      </div>\n    );\n  };\n\n  const MaxShuffles = () => {\n    return (\n      <Dropdown\n        title=\"max rounds\"\n        options={[1, 2, 3, 4, 5, 6, 7]}\n        value={maxShuffles}\n        defaultValue={3}\n        onChange={setMaxShuffles}\n      />\n    );\n  };\n\n  const shuffle = () => {\n    workerRef.current?.terminate();\n    clearTimeout(progressTimerRef.current);\n    setResults(null);\n    setLoading(true);\n    setShowProgress(false);\n    setRounds([{ completed: 0, total: 1 }]);\n    progressTimerRef.current = setTimeout(() => setShowProgress(true), 1000);\n\n    const worker = new Worker(new URL(\"./shuffleWorker.js\", import.meta.url));\n    workerRef.current = worker;\n    worker.postMessage({\n      shuffleStrat: shuffleStrat.value,\n      scoreType: scoreType.value,\n      maxShuffles: maxShuffles.value,\n      deckSize: Number(cardsInDeck.current.value),\n      minNumPiles: pileMin,\n      maxNumPiles: pileMax,\n    });\n    worker.onmessage = (e) => {\n      const msg = e.data;\n      if (msg.type === 'progress') {\n        setRounds((prev) => {\n          const next = [...prev];\n          next[msg.round - 1] = { completed: msg.completed, total: msg.total };\n          return next;\n        });\n      } else {\n        clearTimeout(progressTimerRef.current);\n        setResults(msg.data);\n        setLoading(false);\n        setShowProgress(false);\n        setRounds([]);\n        workerRef.current = null;\n      }\n    };\n  };\n\n\n  const Results = () => {\n    return (\n      <div className=\"shufflenator-results\">\n        <span className=\"shufflenator-results-number\">optimal sequence:</span>\n        {results.permutation.map((n, i) => (\n          <div key={i}>\n            &nbsp;&nbsp;{i + 1}. cyclically deal into{\" \"}\n            <span className=\"shufflenator-results-number\">{n}</span> piles.\n          </div>\n        ))}\n        <br />\n        <div className=\"shufflenator-results-note\">\n          * after each step, reassemble piles in order.\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"shufflenator\">\n      <div className=\"shufflenator-header\">\n        <h1 className=\"shufflenator-title\">shufflenator</h1>\n        <button\n          className=\"shufflenator-help-button\"\n          onClick={() => setShowExplainer(true)}\n        >\n          ?\n        </button>\n      </div>\n\n      {showExplainer && (\n        <div\n          className=\"shufflenator-modal-overlay\"\n          onClick={() => setShowExplainer(false)}\n        >\n          <div\n            className=\"shufflenator-modal\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <button\n              className=\"shufflenator-modal-close\"\n              onClick={() => setShowExplainer(false)}\n            >\n              ×\n            </button>\n            <div className=\"shufflenator-explainer\">\n              <h2>how it works</h2>\n              <p>\n                this tool calculates the best pile shuffle pattern for\n                thoroughly randomizing a deck of cards. pile shuffling alone\n                doesn't randomize—it performs a deterministic permutation. but\n                the right sequence of pile shuffles can spread cards maximally\n                before you do your riffle shuffles.\n              </p>\n              <p>\n                configure your deck size, pile size range, and how many shuffles\n                you want to perform. the calculator will find the permutation\n                that maximizes shannon entropy (randomness) given your\n                constraints.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"shufflenator-selector\">\n        {cardsInDeckInput.current}\n        <div className=\"shufflenator-selector-row\">\n          <div className=\"shufflenator-selector-row-title\">\n            pile size range:\n          </div>\n          <MultiRangeSlider\n            className=\"shufflenator-selector-row-slider\"\n            min={2}\n            max={20}\n            step={1}\n            minValue={pileMin}\n            maxValue={pileMax}\n            onChange={onPileRangeChange}\n            preventWheel={true}\n            stepOnly={false}\n            ruler={false}\n            label={false}\n          />\n        </div>\n        <MaxShuffles />\n        {/* <ShuffleStrategy/> */}\n        {/* <ScoreType/> */}\n      </div>\n      <div onClick={loading ? undefined : shuffle} className={`shufflenator-submit-button${loading ? ' disabled' : ''}`}>\n        <div className=\"shufflenator-submit-button-text\">submit</div>\n      </div>\n      {showProgress && (\n        <div className=\"shufflenator-rounds\">\n          {rounds.map((round, i) => (\n            <div key={i} className=\"shufflenator-round\">\n              <div className=\"shufflenator-progress\">\n                <div className=\"shufflenator-progress-bar\" style={{ width: `${(round.completed / round.total) * 100}%` }} />\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      {results && <Results />}\n    </div>\n  );\n}\n"],"names":["selectStyles","control","baseStyles","_ref","isFocused","_objectSpread","backgroundColor","borderColor","cursor","singleValue","color","option","_ref2","isSelected","fontWeight","menu","indicatorSeparator","Shufflenator","cardsInDeck","useRef","workerRef","useEffect","_workerRef$current","current","terminate","clearTimeout","progressTimerRef","pileMin","setPileMin","useState","pileMax","setPileMax","maxShuffles","setMaxShuffles","value","label","shuffleStrat","scoreType","setScoreType","results","setResults","loading","setLoading","showProgress","setShowProgress","rounds","setRounds","showExplainer","setShowExplainer","CardsInDeck","_jsxs","className","children","_jsx","type","ref","defaultValue","step","min","max","cardsInDeckInput","Dropdown","_ref3","title","options","onChange","map","o","Select","isSearchable","styles","MaxShuffles","Results","permutation","n","i","onClick","e","stopPropagation","MultiRangeSlider","minValue","maxValue","preventWheel","stepOnly","ruler","undefined","shuffle","_workerRef$current2","completed","total","setTimeout","worker","Worker","URL","postMessage","deckSize","Number","minNumPiles","maxNumPiles","onmessage","msg","data","prev","next","round","concat","style","width"],"sourceRoot":""}