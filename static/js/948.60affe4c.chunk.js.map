{"version":3,"file":"static/js/948.60affe4c.chunk.js","mappings":"sSAmCA,MACA,EAAe,IAA0B,0D,uBCpBzC,MAAMA,EAAgB,CACpBC,QAAS,UACTC,KAAM,QAKFC,EAA2E,CAC/E,CAACH,EAAcC,SAAU,CACvBG,MAAO,qBACPC,IAAKC,GAEP,CAACN,EAAcE,MAAO,CACpBE,MAAO,OACPC,IAAK,6CAKHE,EAAe,UACfC,EAAc,UAsBdC,EAAM,CACVC,QAAS,IACTC,SAAU,IACVC,SAAU,IAEVC,UAAW,KACXC,UAAW,MACXC,gBAAiB,KAEjBC,qBAAsB,GAEtBC,gBAAiB,GACjBC,kBAAmB,MAEnBC,kBAAmB,KAGfC,EAAS,CACbC,gBAAiB,GACjBC,WAAY,EACZC,UAAW,IAGPC,EAAS,CACbC,MAAO,GACPC,OAAQ,GACRC,cAAe,IAIXC,EAAW,CACfC,MAAO,KACPC,OAAQ,KACRC,UAAW,MAIPC,EAAQ,CACZC,IAAK,EACLC,IAAK,EACLC,QAAS,IACTC,MAAO,IAKHC,EAAW,IADC,GAEZC,EAAoB,EAGpBC,EAAiB,4BAGvB,SAASC,EAAQC,GACf,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACjC,CAUA,SAASC,EAAQC,EAAWC,EAAWC,GACrC,MAAMJ,EAAIE,GAAKC,EAAID,GAAKE,EACxB,OAAOJ,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMK,KAAKC,MAAMN,EAChD,CAEA,SAASO,EAAaC,GACpB,MAAMC,EAAQJ,KAAKK,SAAWL,KAAKM,GAAK,EAClCC,EAAIP,KAAKK,SAAWF,EAC1B,MAAO,CAAEK,EAAGR,KAAKS,IAAIL,GAASG,EAAGG,EAAGV,KAAKW,IAAIP,GAASG,EACxD,CAEA,SAASK,EAAeC,EAAaC,EAAeC,GAC9CF,EAAEL,EAAI,GACRK,EAAEL,EAAI,EACNK,EAAEG,KAAO,IACAH,EAAEL,EAAIM,IACfD,EAAEL,EAAIM,EACND,EAAEG,KAAO,IAGPH,EAAEH,EAAI,GACRG,EAAEH,EAAI,EACNG,EAAEI,KAAO,IACAJ,EAAEH,EAAIK,IACfF,EAAEH,EAAIK,EACNF,EAAEI,KAAO,GAEb,CAEA,SAASC,EAAiBC,EAAuBL,EAAeC,GAC9D,IAAK,IAAIK,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IACpCR,EAAeO,EAAUC,GAAIN,EAAOC,EAExC,CAiCA,SAASO,EAAaC,GACpB,GAAIA,GAAO,EAAG,OAAO,EAErB,MAAMC,EAAQtC,EAAMI,MACpB,GAAIiC,GAAOC,EAAO,OAAOtC,EAAME,IAG/B,MAAMW,EAAIwB,EAAMC,EAIVC,EAAeC,IAAmCxC,EAAME,IAExDuC,EAAS3B,KAAK4B,IAAIH,GAClBI,EAAS7B,KAAK4B,IAAI1C,EAAME,KAE9B,OAAOY,KAAK8B,IAtFd,SAAcjC,EAAWC,EAAWC,GAClC,OAAOF,GAAKC,EAAID,GAAKE,CACvB,CAoFkBgC,CAAKJ,EAAQE,EAAQ9B,GACvC,CAwBA,SAASiC,EAASC,GAChB,MAAMC,EAAID,EAAIE,OAAOC,QAAQ,IAAK,IAClC,GAAiB,IAAbF,EAAEb,OAAc,CAIlB,MAAO,CAAEd,EAHC8B,SAASH,EAAE,GAAKA,EAAE,GAAI,IAGpBI,EAFFD,SAASH,EAAE,GAAKA,EAAE,GAAI,IAEjBpC,EADLuC,SAASH,EAAE,GAAKA,EAAE,GAAI,IAElC,CACA,GAAiB,IAAbA,EAAEb,OAAc,CAIlB,MAAO,CAAEd,EAHC8B,SAASH,EAAEK,MAAM,EAAG,GAAI,IAGtBD,EAFFD,SAASH,EAAEK,MAAM,EAAG,GAAI,IAEnBzC,EADLuC,SAASH,EAAEK,MAAM,EAAG,GAAI,IAEpC,CACA,MAAO,CAAEhC,EAAG,IAAK+B,EAAG,IAAKxC,EAAG,EAC9B,CAEA,SAAS0C,EAASjC,EAAW+B,EAAWxC,EAAWD,GAEjD,OAAQA,GAAK,GAAOC,GAAK,GAAOwC,GAAK,EAAK/B,CAC5C,CAEA,SAASkC,EAAgBC,EAAgBC,GACvC,MAAMC,EAAKZ,EAASU,GACdG,EAAKb,EAASW,GAEdG,EAAM,IAAIC,YAAY,KAC5B,IAAK,IAAI3B,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5B,MAAMrB,EAAIqB,EAAI,IACRb,EAAIX,EAAQgD,EAAGrC,EAAGsC,EAAGtC,EAAGR,GACxBuC,EAAI1C,EAAQgD,EAAGN,EAAGO,EAAGP,EAAGvC,GACxBD,EAAIF,EAAQgD,EAAG9C,EAAG+C,EAAG/C,EAAGC,GAC9B+C,EAAI1B,GAAKoB,EAASjC,EAAG+B,EAAGxC,EAAG,IAC7B,CACA,OAAOgD,CACT,CAiCA,SAASE,EAAUV,EAAgBW,EAAYC,GAC7C,OAAOA,EAAKZ,EAAEa,KAAOF,CACvB,CAyCO,SAASG,EACdjC,EACAL,EACAC,EACAsC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAK1D,KAAK2D,IAAI,EAAG3D,KAAK4D,IAAI,EAAKJ,IAGrC,IAAK,IAAIpC,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GAEpByC,EAAwBhD,EAAG6C,GAC3BI,EAAcjD,EAAG6C,GACjBK,EAAUlD,EAAG6C,GAETL,GAAaW,EAAiBnD,EAAGyC,EAAYI,GAEjDH,EAAenC,GAAK,EACpBR,EAAeC,EAAGC,EAAOC,EAC3B,CAGA,GAAW,IAAP2C,EAAU,CACZ,IAAK,IAAItC,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IACpCD,EAAUC,GAAG6C,KAAOvE,EAAQyB,EAAUC,GAAG6C,MAG3C,YADA/C,EAAiBC,EAAWL,EAAOC,EAErC,CAGA0C,EAAKS,MAAMC,MAAM,GACjB,MAAMC,EAAU,EAAIX,EAAKY,SAEzB,IAAK,IAAIjD,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GAEpB,IAAI6B,EAAMpC,EAAEL,EAAI4D,EAAW,EACvBlB,EAAMrC,EAAEH,EAAI0D,EAAW,EAEvBnB,EAAK,EAAGA,EAAK,EACRA,GAAMQ,EAAKN,OAAMF,EAAKQ,EAAKN,KAAO,GAEvCD,EAAK,EAAGA,EAAK,EACRA,GAAMO,EAAKa,OAAMpB,EAAKO,EAAKa,KAAO,GAE3C,MAAMC,EAAOvB,EAAUS,EAAMR,EAAIC,GACjCO,EAAKe,KAAKpD,GAAKqC,EAAKS,MAAMK,GAC1Bd,EAAKS,MAAMK,GAAQnD,CACrB,CAGA,MAAMb,EAAI5C,EAAIQ,gBACRsG,EAAKlE,EAAIA,EAEf,IAAK,IAAIa,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMsD,EAAKvD,EAAUC,GAErB,IAAI6B,EAAMyB,EAAGlE,EAAI4D,EAAW,EACxBlB,EAAMwB,EAAGhE,EAAI0D,EAAW,EAExBnB,EAAK,EAAGA,EAAK,EACRA,GAAMQ,EAAKN,OAAMF,EAAKQ,EAAKN,KAAO,GAEvCD,EAAK,EAAGA,EAAK,EACRA,GAAMO,EAAKa,OAAMpB,EAAKO,EAAKa,KAAO,GAE3C,MAAMK,EAAK1B,EAAK,EAAIA,EAAK,EAAIA,EACvB2B,EAAK3B,EAAK,EAAIQ,EAAKN,KAAOF,EAAK,EAAIA,EACnC4B,EAAK3B,EAAK,EAAIA,EAAK,EAAIA,EACvB4B,EAAK5B,EAAK,EAAIO,EAAKa,KAAOpB,EAAK,EAAIA,EAEzC,IAAK,IAAI6B,EAAKF,EAAIE,GAAMD,EAAIC,IAC1B,IAAK,IAAIC,EAAKL,EAAIK,GAAMJ,EAAII,IAAM,CAChC,IAAIC,EAAIxB,EAAKS,MAAMlB,EAAUS,EAAMuB,EAAID,IACvC,MAAc,IAAPE,GAAU,CACf,GAAIA,EAAI7D,EAAG,CACT,MAAM8D,EAAK/D,EAAU8D,GACfE,EAAKD,EAAG1E,EAAIkE,EAAGlE,EACf4E,EAAKF,EAAGxE,EAAIgE,EAAGhE,EACf2E,EAAKF,EAAKA,EAAKC,EAAKA,EAE1B,GAAIC,EAAK,GAAKA,EAAKZ,EAAI,CACrBlB,EAAenC,KACfmC,EAAe0B,KAGfK,EAAqBZ,EAAIQ,EAAIC,EAAIC,EADvBpF,KAAKuF,KAAKF,GACoB3B,GACxC8B,EAAoBd,EAAIQ,EAAIxB,EAC9B,CACF,CACAuB,EAAIxB,EAAKe,KAAKS,EAChB,CACF,CAEJ,CAGA,IAAK,IAAI7D,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GACpBqE,EAA4B5E,EAAGE,EAAQwC,EAAenC,GAAIsC,GAC1D7C,EAAEoD,KAAOvE,EAAQmB,EAAEoD,KACrB,CAEA/C,EAAiBC,EAAWL,EAAOC,EACrC,CAEA,SAAS8C,EAAwBhD,EAAa6C,GAC5C,MAAMgC,EAAW7E,EAAEoD,KAAOpD,EAAEoD,KAAOtG,EAAIE,SACvCgD,EAAEI,KAAOtD,EAAIC,QAAU8H,GAAYhC,CACrC,CAEA,SAASI,EAAcjD,EAAa6C,GAClC,MAAMiC,EAAI3F,KAAK4F,IAAIjI,EAAIG,SAAU4F,GACjC7C,EAAEG,IAAM2E,EACR9E,EAAEI,IAAM0E,CACV,CAEA,SAAS5B,EAAUlD,EAAa6C,GAC9B7C,EAAEL,GAAKK,EAAEG,GAAK0C,EACd7C,EAAEH,GAAKG,EAAEI,GAAKyC,CAChB,CAEA,SAASM,EAAiBnD,EAAayC,EAAkBI,GACvD,MAAMyB,EAAKtE,EAAEL,EAAI8C,EAAW9C,EACtB4E,EAAKvE,EAAEH,EAAI4C,EAAW5C,EACtB2E,EAAKF,EAAKA,EAAKC,EAAKA,EACpB7E,EAAI5C,EAAIU,kBAGd,GAAIgH,EAFO9E,EAAIA,EAEF,CACX,MACMsF,EAAY,EADR7F,KAAKuF,KAAKF,IACO,EAAI9E,GAC/BM,EAAEoD,MAAwB,EAAhBtG,EAAII,UAAgB8H,EAAYnC,CAC5C,CACF,CAEA,SAAS4B,EACPZ,EACAQ,EACAC,EACAC,EACAU,EACApC,GAEA,MAAMqC,EAAQpI,EAAIS,mBAAqB,EAAI0H,GAAK,EAAInI,EAAIQ,kBAClD6H,EAAO,EAAIF,EACXG,EAAKd,EAAKa,EAAOD,EAAQrC,EACzBwC,EAAKd,EAAKY,EAAOD,EAAQrC,EAE/BgB,EAAG1D,IAAMiF,EACTvB,EAAGzD,IAAMiF,EACThB,EAAGlE,IAAMiF,EACTf,EAAGjE,IAAMiF,CACX,CAEA,SAASV,EAAoBd,EAAcQ,EAAcxB,GACvD,MACMyC,GADWzB,EAAGT,KAAOiB,EAAGjB,MACAtG,EAAIM,gBAAkByF,EACpDgB,EAAGT,MAAQkC,EACXjB,EAAGjB,MAAQkC,CACb,CAEA,SAASV,EACP5E,EACAE,EACAqF,EACA1C,GAEA,MAAM2C,EAAqBtF,EAASF,EAAEH,EAEtC,GAAI2F,EAAqB1I,EAAIO,qBAAsB,CACjD,MAAM2H,EAAY,EAAIQ,GAAsB,EAAI1I,EAAIO,sBAEpD,YADA2C,EAAEoD,MAAQtG,EAAII,UAAY8H,EAAYnC,EAExC,CAEA,MAEM4C,EAAc,GADFF,EADG,EAC4BA,EAD5B,KAIrBvF,EAAEoD,MAAQtG,EAAIK,WAAa,GAAoB,GAAdsI,GAAqB5C,CACxD,CAuEA,SAAS6C,EACPC,EACAC,EACAtF,EACAuF,EACAC,GAEA,MAAMC,EA3ER,SACEJ,EACAE,EACA5F,EACAC,GAEA,MAAM8F,EAAMH,EAASI,QAIrB,OAHKD,GAAOA,EAAI/F,QAAUA,GAAS+F,EAAI9F,SAAWA,IAChD2F,EAASI,QAAUN,EAAIO,gBAAgBjG,EAAOC,IAEzC2F,EAASI,OAClB,CAgEoBE,CAAgBR,EAAKE,EAAUD,EAAO3F,MAAO2F,EAAO1F,SA9DxE,SACE6F,EACAzF,EACA8F,EACAC,EACAP,GAEA,MAAMQ,EAAY7I,EAAOE,WACnB4I,EAAY9I,EAAOG,UACnBgG,EAAKnG,EAAOC,gBAAkBD,EAAOC,gBAErC8I,EAAS,IAAItE,YAAY6D,EAAUU,KAAKC,QAGxCC,EAAQhF,EAAS,EAAG,EAAG,EAAG,KAChC6E,EAAOlD,KAAKqD,GAEZ,MAAMC,EAAIR,EAEV,IAAK,IAAIvG,EAAI,EAAGA,EAAIwG,EAAcxG,GAAKyG,EACrC,IAAK,IAAI3G,EAAI,EAAGA,EAAIyG,EAAazG,GAAK2G,EAAW,CAC/C,IAAIO,EAAe,EACfC,EAAkB,EAEtB,IAAK,IAAIvG,EAAI,EAAGA,EAAID,EAAUE,OAAQD,IAAK,CACzC,MAAMP,EAAIM,EAAUC,GACd+D,EAAK3E,EAAIK,EAAEL,EACX4E,EAAK1E,EAAIG,EAAEH,EAEXkH,EAAYnD,GADHU,EAAKA,EAAKC,EAAKA,EACG,GAEjCsC,GAAgBE,EAChBD,GAAmBC,EAAY/G,EAAEoD,IACnC,CAEA,GAAIyD,GAAgBN,EAAW,SAE/B,MAAMnD,EAAO0D,EAAkBD,EAEzBG,EAAOlB,EADE1C,GAAQ,EAAI,EAAIA,GAAQ,EAAI,IAAc,IAAPA,EAAc,GAGhE,IAAK,IAAI6D,EAAK,EAAGA,EAAKX,EAAWW,IAAM,CACrC,MAAMC,EAAKrH,EAAIoH,EACf,GAAIC,GAAMb,EAAc,MAExB,IAAI3F,EAAMwG,EAAKN,EAAIjH,EACnB,MAAMwH,EAAShI,KAAK4D,IAAIpD,EAAI2G,EAAWM,GACvC,IAAK,IAAIQ,EAAKzH,EAAGyH,EAAKD,EAAQC,IAC5BZ,EAAO9F,KAASsG,CAEpB,CACF,CAEJ,CAUEK,CAActB,EAAWzF,EAAWsF,EAAO3F,MAAO2F,EAAO1F,OAAQ4F,GACjEH,EAAI2B,aAAavB,EAAW,EAAG,EACjC,CAGe,SAASwB,IACtB,MAAMC,GAAYC,EAAAA,EAAAA,QAA0B,MACtCC,GAASD,EAAAA,EAAAA,QAAwC,MAEjDE,GAASF,EAAAA,EAAAA,QAAsB,MAE/BG,GAAeH,EAAAA,EAAAA,QAAmB,IAClC5B,GAAW4B,EAAAA,EAAAA,QAAyB,MACpCI,GAAoBJ,EAAAA,EAAAA,QAAoB,IAAIK,YAAY,IACxDC,GAAmBN,EAAAA,EAAAA,QAAsB,MAEzCO,GAAUP,EAAAA,EAAAA,QAA2B,MAGrCQ,GAAUR,EAAAA,EAAAA,QAAiC,CAAEb,EAAG,EAAGvF,EAAG,KAErD6G,EAAaC,IAAkBC,EAAAA,EAAAA,UAAsB/L,EAAcE,MAEpE8L,GAAYC,EAAAA,EAAAA,UAAQ,KAExB,MAAMC,EAAQ,IAAIC,EAAAA,EAAchM,EAAoBH,EAAcE,MAAMG,KAAK,GAE7E,OADA6L,EAAME,QAAU,OACTF,CAAK,GACX,IACGG,GAAaJ,EAAAA,EAAAA,UAAQ,IAAM,IAAIE,EAAAA,EAAcG,GAAiB,IAAQ,KAErEC,EAAYC,IAAiBT,EAAAA,EAAAA,WAAS,GAEvCU,GAAiBrB,EAAAA,EAAAA,SAAO,GACxBsB,GAAgBtB,EAAAA,EAAAA,QAAa,CAAE9H,EAAG,EAAGE,EAAG,IAGxCmJ,GAAkBV,EAAAA,EAAAA,UAAQ,IApblC,SAA6BW,GAC3B,GAAIA,GAAS,EAAG,OAAO,EAEvB,MACMC,EADQ7K,EAAMI,MACC,EAErB,IAAI0K,EAAO,EACPC,EAAUC,IACd,MAAMC,EAASnK,KAAK4B,IAAIkI,GAExB,IAAK,IAAI1I,EAAI,EAAGA,GAAK2I,EAAM3I,IAAK,CAC9B,MAAMgJ,EAAI9I,EAAaF,GACjBiJ,EAAMrK,KAAKsK,IAAItK,KAAK4B,IAAIwI,GAAKD,GAC/BE,EAAMJ,IACRA,EAAUI,EACVL,EAAO5I,EAEX,CACA,OAAO4I,CACT,CAiawCO,CAAoBrL,EAAMG,UAAU,KACnEmL,EAAUC,IAAexB,EAAAA,EAAAA,UAAiBY,GAC3Ca,GAAWpC,EAAAA,EAAAA,QAAepJ,EAAMG,UAEtCsL,EAAAA,EAAAA,YAAU,KACRD,EAAS5D,QAAUxF,EAAakJ,EAAS,GACxC,CAACA,IAEJ,MAAOI,EAAUC,IAAe5B,EAAAA,EAAAA,WAAS,GACnC6B,GAAaC,EAAAA,EAAAA,cAAY,IAAMF,GAAalL,IAAOA,KAAI,KAEtDqL,EAAQC,IAAahC,EAAAA,EAAAA,UAAS,IACrC0B,EAAAA,EAAAA,YAAU,KACRzB,EAAU8B,OAASA,CAAM,GACxB,CAACA,EAAQ9B,IACZ,MAAOgC,EAAYC,IAAiBlC,EAAAA,EAAAA,UAK1B,OACHmC,EAAoBC,IAAyBpC,EAAAA,EAAAA,WAAS,GAEvDqC,GAAgBhD,EAAAA,EAAAA,SAAO,IAE7BqC,EAAAA,EAAAA,YAAU,KAER,GAAIW,EAAcxE,QAEhB,YADAwE,EAAcxE,SAAU,GAI1B,MAAMyE,EAASlO,EAAoB0L,GAC7ByC,EAAatC,EAAUuC,YAU7B,GAPID,GACFtC,EAAUwC,QAGZxC,EAAUyC,IAAMJ,EAAOhO,IACvB2L,EAAU0C,OAENJ,EAAY,CACd,MAAMK,EAAYA,KAChB3C,EAAU4C,OAAOC,OAAM,SAGvB7C,EAAU8C,oBAAoB,iBAAkBH,EAAU,EAE5D3C,EAAU+C,iBAAiB,iBAAkBJ,EAAW,CAAEK,MAAM,GAClE,IACC,CAACnD,EAAaG,KAGjByB,EAAAA,EAAAA,YAAU,KACR,IAAKlB,GAAcV,IAAgB7L,EAAcE,KAE/C,YADA+N,EAAc,MAIhB,MAAMgB,EAAkBC,UACtB,IAAK,IAADC,EACF,MAAMC,QAAiBC,MAAM,0CAIvBC,EAAoB,QAAfH,SAHQC,EAASG,QAGTC,eAAO,IAAAL,OAAA,EAAZA,EAAcM,MAAMb,GAAiC,cAAnBA,EAAKc,YAErD,GAAIJ,EAAO,CACT,MAAMK,EAAW,CACfC,MAAON,EAAMM,MAAQ,iBAAiBC,cACtCC,QAASR,EAAMQ,QAAU,kBAAkBD,cAC3CE,OAAQT,EAAMS,OAAS,iBAAiBF,cACxCG,YAAY,GAEdC,QAAQvL,IAAI,+BAAgCiL,GAC5C1B,EAAc0B,EAChB,MACEM,QAAQvL,IAAI,uDACZuJ,EAAc,CACZ2B,KAAM,gBACNE,OAAQ,GACRC,MAAO,GACPC,YAAY,GAGlB,CAAE,MAAO7C,GACP8C,QAAQvL,IAAI,sBAAuByI,EACrC,GAGF8B,IACA,MAAMiB,EAAWC,YAAYlB,EAAiB,KAE9C,MAAO,IAAMmB,cAAcF,EAAS,GACnC,CAAC3D,EAAYV,IAEhB,MAAMwE,GAAkBjF,EAAAA,EAAAA,QAAO5K,GACzB8P,GAAmBlF,EAAAA,EAAAA,QAAO7K,IAEzBgQ,GAAcC,KAAmBzE,EAAAA,EAAAA,UAASvL,IAC1CiQ,GAAeC,KAAoB3E,EAAAA,EAAAA,UAASxL,GAE7CoQ,IAAavF,EAAAA,EAAAA,QAAoB7F,EAAgB/E,EAAaD,KAGpEkN,EAAAA,EAAAA,YAAU,KACR4C,EAAgBzG,QAAU2G,GAC1BD,EAAiB1G,QAAU6G,GAC3BE,GAAW/G,QAAUrE,EAAgBgL,GAAcE,GAAc,GAChE,CAACF,GAAcE,GAAelE,KAGjCkB,EAAAA,EAAAA,YAAU,KACR,MAAMlE,EAAS4B,EAAUvB,QACzB,IAAKL,EAAQ,OAEb,MAAMgB,EAAIqG,OAAOC,WACX7L,EAAI4L,OAAOE,YACjBlF,EAAQhC,QAAU,CAAEW,IAAGvF,KAEvBuE,EAAO3F,MAAQ2G,EACfhB,EAAO1F,OAASmB,EAEhBqG,EAAOzB,QAAUL,EAAOwH,WAAW,MAGnCvH,EAASI,QAAU,IAAI,GAGtB,IAEH,MAAMoH,IAA0BnD,EAAAA,EAAAA,cAAY,KAC1C,MAAM,EAAEtD,EAAC,EAAEvF,GAAM4G,EAAQhC,QAEQ,OAA7B8B,EAAiB9B,UACnB8B,EAAiB9B,QA/mBvB,SAA8BhG,EAAeC,GAC3C,MAAMoN,EAAerP,EAASC,MAAQD,EAASE,OACzCoP,EAActN,EAAQC,EAEtBsN,EAAUvP,EAASG,UAAYkP,EAC/BG,EAAStO,KAAKC,MAAMmO,EAAcC,GAExC,OAAOrO,KAAK2D,IAAI,IAAK3D,KAAK4D,IAAI,IAAM0K,GACtC,CAumBiCC,CAAqB9G,EAAGvF,IAGrD,MAAMsM,EAAQ5F,EAAiB9B,QAC/B2B,EAAa3B,QAlejB,SAAyBhG,EAAeC,EAAgByN,GACtD,MAAMrN,EAAwB,GACxBsN,EAAoBzO,KAAK0O,MAAMF,EAAQ9P,EAAOC,OAEpD,IAAK,IAAIyC,EAAI,EAAGA,EAAI1C,EAAOC,MAAOyC,IAAK,CACrC,MAAMuN,EAAU3O,KAAKK,SAAWS,EAC1B8N,EACJ5O,KAAKK,SAAW3B,EAAOG,cACnBmB,KAAKK,SAAWU,EAAS,GAChB,GAATA,EAAef,KAAKK,SAAWU,EAAS,GAExC8N,EAAY7O,KAAKK,SACvB,IAAK,IAAI4E,EAAI,EAAGA,EAAIwJ,EAAmBxJ,IAAK,CAC1C,MAAM6J,EAAS5O,EAAaxB,EAAOE,QACnCuC,EAAU4N,KAAK,CACbvO,EAAGmO,EAAUG,EAAOtO,EACpBE,EAAGkO,EAAUE,EAAOpO,EACpBM,GAAI,EACJC,GAAI,EACJgD,KAAM4K,GAEV,CACF,CAEA,KAAO1N,EAAUE,OAASmN,GACxBrN,EAAU4N,KAAK,CACbvO,EAAGR,KAAKK,SAAWS,EACnBJ,EAAGV,KAAKK,SAAWU,EACnBC,GAAI,EACJC,GAAI,EACJgD,KAAM,IAIV,OAAO9C,CACT,CA+b2B6N,CAAgBvH,EAAGvF,EAAGsM,GAC7C9F,EAAkB5B,QAAU,IAAI6B,YAAY6F,GAtgBhD,SACE3F,EACA/H,EACAC,EACAyN,EACAnK,GAEA,MAAMlB,EAAOnD,KAAK2D,IAAI,EAAG3D,KAAKiP,KAAKnO,EAAQuD,IACrCC,EAAOtE,KAAK2D,IAAI,EAAG3D,KAAKiP,KAAKlO,EAASsD,IACtC6K,EAAQ/L,EAAOmB,EAEfhC,EAAIuG,EAAQ/B,QAEfxE,GACDA,EAAEa,OAASA,GACXb,EAAEgC,OAASA,GACXhC,EAAE+B,WAAaA,GACf/B,EAAEkC,KAAKnD,SAAWmN,GAClBlM,EAAE4B,MAAM7C,SAAW6N,IAEnBrG,EAAQ/B,QAAU,CAChBzC,WACAlB,OACAmB,OACAJ,MAAO,IAAIiL,WAAWD,GACtB1K,KAAM,IAAI2K,WAAWX,IAG3B,CA4eIY,CAAWvG,EAASpB,EAAGvF,EAAGsM,EAAO7Q,EAAIQ,gBAAgB,GACpD,IAEGkR,IAAoBtE,EAAAA,EAAAA,cAAY,KAAO,IAADuE,GApmB9C,SAAoCC,GAClC,IACE,IAAKC,OAAOC,SAASF,IAAYA,EAAU,EAAG,OAC9CG,aAAaC,QAAQlQ,EAAgBmQ,OAAOL,GAC9C,CAAE,MAAAM,GACA,CAEJ,CA8lBIC,CAAgD,QAAtBR,EAACpG,EAAU6G,mBAAW,IAAAT,EAAAA,EAAI,EAAE,GACrD,CAACpG,KAEJyB,EAAAA,EAAAA,YAAU,KACR,IAAKlB,EAAY,OAEjB,MACMuG,EAAKlC,OAAOT,aADL4C,IAAMZ,MACiB,KAE9Ba,EAAaA,IAAMb,KACnBc,EAAqBA,KACQ,WAA7BC,SAASC,iBAA8BhB,IAAmB,EAMhE,OAHAvB,OAAO7B,iBAAiB,WAAYiE,GACpCE,SAASnE,iBAAiB,mBAAoBkE,GAEvC,KACLrC,OAAOR,cAAc0C,GACrBlC,OAAO9B,oBAAoB,WAAYkE,GACvCE,SAASpE,oBAAoB,mBAAoBmE,EAAmB,CACrE,GACA,CAAC1G,EAAY4F,MAEhB1E,EAAAA,EAAAA,YAAU,IACD,KACL0E,KAEAnG,EAAUwC,QACVxC,EAAU8B,OAAS,EACnB9B,EAAUoH,QAEV/G,EAAWmC,QACXnC,EAAWyB,OAAS,EACpBzB,EAAW+G,OAAO,GAEnB,CAACpH,EAAWK,EAAY8F,KAE3B,MAAMkB,IAAaxF,EAAAA,EAAAA,cAAY,KAC7B,MAAMzI,EAAIuG,EAAQ/B,QAClB,IAAKxE,EAAG,OAER,MAAM,EAAEmF,EAAC,EAAEvF,GAAM4G,EAAQhC,QAEzB1D,EACEqF,EAAa3B,QACbW,EACAvF,EACAyH,EAAe7C,QACf8C,EAAc9C,QACd4B,EAAkB5B,QAClB4D,EAAS5D,QACTxE,EACD,GACA,IAEGkO,IAAOzF,EAAAA,EAAAA,cAAY,KACvB,MAAMtE,EAAS4B,EAAUvB,QACnBN,EAAM+B,EAAOzB,QACdL,GAAWD,GAEhBD,EAAYC,EAAKC,EAAQgC,EAAa3B,QAASJ,EAAUmH,GAAW/G,QAAQ,GAC3E,IAGG2J,IAAWnI,EAAAA,EAAAA,QAAsC,CAAEyB,KAAM,EAAG2G,IAAK,IAEjEC,IAAU5F,EAAAA,EAAAA,cAAa6F,IAC3B,MAAMC,EAAQJ,GAAS3J,QAEJ,IAAf+J,EAAM9G,OAAY8G,EAAM9G,KAAO6G,GACnC,MAAME,EAAQF,EAAMC,EAAM9G,KAC1B8G,EAAM9G,KAAO6G,EAGbC,EAAMH,KAAO1Q,KAAK4D,IAAI,IAAK5D,KAAK2D,IAAI,EAAGmN,IAEvC,IAAItP,EAAQ,EACZ,KAAOqP,EAAMH,KAAOnR,GAAYiC,EAAQhC,GACtC+Q,KACAM,EAAMH,KAAOnR,EACbiC,IAIEqP,EAAMH,KAAOnR,IAAUsR,EAAMH,IAAM,GAEvCF,KACAhI,EAAO1B,QAAUiK,sBAAsBJ,GAAQ,GAC9C,CAACH,GAAMD,MAGV5F,EAAAA,EAAAA,YAAU,KACR,MAAMlE,EAAS4B,EAAUvB,QACzB,IAAKL,EAAQ,OAEb,MAAMuK,EAAWC,IACf,MAAMC,EAAOzK,EAAO0K,wBACpB,MAAO,CAAE3Q,EAAGyQ,EAAEG,QAAUF,EAAKG,KAAM3Q,EAAGuQ,EAAEK,QAAUJ,EAAKK,IAAK,EAGxDC,EAAUP,IACdtH,EAAe7C,SAAU,EACzB8C,EAAc9C,QAAUkK,EAAQC,EAAE,EAE9BQ,EAAUR,IACdrH,EAAc9C,QAAUkK,EAAQC,EAAE,EAE9BS,EAAOA,KACX/H,EAAe7C,SAAU,CAAK,EAQhC,OALAL,EAAOwF,iBAAiB,cAAeuF,GACvC1D,OAAO7B,iBAAiB,cAAewF,GACvC3D,OAAO7B,iBAAiB,YAAayF,GACrC5D,OAAO7B,iBAAiB,gBAAiByF,GAElC,KACLjL,EAAOuF,oBAAoB,cAAewF,GAC1C1D,OAAO9B,oBAAoB,cAAeyF,GAC1C3D,OAAO9B,oBAAoB,YAAa0F,GACxC5D,OAAO9B,oBAAoB,gBAAiB0F,EAAK,CAClD,GACA,IAEH,MAAMC,IAAY5G,EAAAA,EAAAA,cAAY,KAC5B,IACExB,EAAWyB,OAAS,EACpBzB,EAAWwG,YAAc,EACzBxG,EAAW+G,QACX/G,EAAWuC,MACb,CAAE,MAAA8F,GACA,IAED,CAACrI,IAEEsI,IAA2B9G,EAAAA,EAAAA,cAAY,KAC3C,MAAMhL,EAzvBV,WACE,IACE,MAAM+R,EAAMpC,aAAaqC,QAAQtS,GACjC,IAAKqS,EAAK,OAAO,EACjB,MAAMnS,EAAI6P,OAAOsC,GACjB,OAAOtC,OAAOC,SAAS9P,IAAMA,GAAK,EAAIA,EAAI,CAC5C,CAAE,MAAAqS,GACA,OAAO,CACT,CACF,CAgvBcC,GACV,IACE,MAAMC,EAAYhJ,EAAkBgJ,SACZ,kBAAbA,GAAyB1C,OAAOC,SAASyC,IAAaA,EAAW,EAC1EhJ,EAAU6G,YAAchQ,EAAImS,EAE5BhJ,EAAU6G,YAAchQ,CAE5B,CAAE,MAAAoS,GACA,IAED,CAACjJ,IAEEkJ,IAAYrH,EAAAA,EAAAA,cAAYqB,UAwB5B,GAvBAuF,KAEKlI,IACHC,GAAc,GACdwE,KAGAuC,GAAS3J,QAAU,CAAEiD,KAAM,EAAG2G,IAAK,GAGnCK,uBAAsB,IAAMP,OAG5BhI,EAAO1B,QAAUiK,sBAAsBJ,KAIrC5H,IAAgB7L,EAAcE,MAChCyU,KAEF3I,EAAU8B,OAAS,EAGf9B,EAAUmJ,WAAa,EAAG,CAE5BnJ,EAAU0C,OAEV,MAAMC,EAAYO,UAChB,UACQlD,EAAU4C,MAClB,CAAE,MAAAwG,GACA,CAEFpJ,EAAU8C,oBAAoB,iBAAkBH,EAAU,EAE5D3C,EAAU+C,iBAAiB,iBAAkBJ,EAAW,CAAEK,MAAM,GAClE,MAEE,UACQhD,EAAU4C,MAClB,CAAE,MAAAyG,GACA,CAEJ,GACC,CACD5B,GACA5H,EACAyH,GACAtH,EACAO,EACAyE,GACAyD,GACAE,KAGIW,IAAoBrJ,EAAAA,EAAAA,UACxB,MAAS1B,EAAGqG,OAAOC,WAAY7L,EAAG4L,OAAOE,eACzC,IAGIyE,GAAevT,EAAMI,MAAQ,EAEnC,OACEoT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,UACEC,IAAKzK,EACLsK,UAAU,mBACV7R,MAAO0R,GAAkB/K,EACzB1G,OAAQyR,GAAkBtQ,IAG3BgJ,IACCwH,EAAAA,EAAAA,MAAA,OAAKC,UAAS,yBAAAI,OAA2B3H,EAAqB,WAAa,aAAcwH,SAAA,EACvFC,EAAAA,EAAAA,KAAA,UACEG,KAAK,SACLL,UAAU,+BACVM,QAASA,IAAM5H,GAAuBD,GACtC,aAAYA,EAAqB,uBAAyB,qBAAqBwH,SAE9ExH,EAAqB,SAAM,YAE9BsH,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC5CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+BAA8BC,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,8BAA6BC,SAAC,UAC3C1H,EAAWgC,aACXwF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6BACfE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6BACfE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6BACfE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mCAIrBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6BAA4BC,SAAE1H,EAAW4B,QACtD5B,EAAWgC,aACXwF,EAAAA,EAAAA,MAAAQ,EAAAA,SAAA,CAAAN,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,+BAA8BC,SAAE1H,EAAW8B,UAC1D6F,EAAAA,EAAAA,KAAA,OAAKF,UAAU,8BAA6BC,SAAE1H,EAAW+B,iBAOjExD,GAYAiJ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,UACEG,KAAK,SACLL,UAAU,wBACVM,QAASnI,EACT,aAAYF,EAAW,YAAc,YACrC,eAAcA,EAASgI,SAEtBhI,EAAW,SAAM,WAGnBA,IACC8H,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAE7BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,UAAQpI,QAGnDqI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVK,KAAK,QACLpP,IAAK,EACLD,IAAK8O,GACLU,KAAM,EACNC,MAAO5I,EACP6I,SAAWpC,IACTxG,UA58BJ9K,EA48ByB6P,OAAOyB,EAAE9G,OAAOiJ,OA58BlBvQ,EA48B6B4P,GA38B7D9S,GADoBiD,EA48BsC,GA38BjDA,EAAKjD,EAAIkD,EAAKA,EAAKlD,IADrC,IAAkBA,EAAWiD,EAAYC,CA68BpB,EACD,aAAW,2BAMjB6P,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,CAAC,WAC9B5S,KAAKC,MAAe,IAAT+K,GAAc,UAItC6H,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,mBACVK,KAAK,QACLpP,IAAK,EACLD,IAAK,EACLwP,KAAM,IACNC,MAAOpI,EACPqI,SAAWpC,GAAMhG,EAAUuE,OAAOyB,EAAE9G,OAAOiJ,QAC3C,aAAW,uBAMjBV,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,SAAC,oBAG3CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,UACpCC,EAAAA,EAAAA,KAAA,UACEF,UAAU,mBACVS,MAAOrK,EACPsK,SAAWpC,GAAMjI,EAAeiI,EAAE9G,OAAOiJ,OACzC,aAAW,eAAcR,SAExBU,OAAOC,QAAQlW,GAAqBmW,KAAIC,IAAA,IAAEC,EAAKnI,GAAOkI,EAAA,OACrDZ,EAAAA,EAAAA,KAAA,UAAkBO,MAAOM,EAAId,SAC1BrH,EAAOjO,OADGoW,EAEJ,YAOjBhB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,SAAC,mBAG3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAElCF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,wBAAuBC,SAAA,CAAC,OAEvCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,wBACVK,KAAK,QACLI,MAAOzF,GACP0F,SAAWpC,GAAMrD,GAAiBqD,EAAE9G,OAAOiJ,OAC3C,aAAW,wBAIfV,EAAAA,EAAAA,MAAA,SAAOC,UAAU,wBAAuBC,SAAA,CAAC,QAEvCC,EAAAA,EAAAA,KAAA,SACEF,UAAU,wBACVK,KAAK,QACLI,MAAO3F,GACP4F,SAAWpC,GAAMvD,GAAgBuD,EAAE9G,OAAOiJ,OAC1C,aAAW,uBAIfP,EAAAA,EAAAA,KAAA,UACEG,KAAK,SACLL,UAAU,wBACVM,QAASA,KACPvF,GAAgBhQ,GAChBkQ,GAAiBnQ,EAAa,EAC9BmV,SACH,uBA/HXC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCC,EAAAA,EAAAA,KAAA,UACEG,KAAK,SACLL,UAAU,kBACVM,QAASb,GACT,aAAW,wBAAuBQ,UAElCC,EAAAA,EAAAA,KAAA,OAAKlH,IAAKgI,EAAWC,IAAI,QAAQjB,UAAU,+BAmIvD,C,kCClqCO,MAAMtJ,UAAsBwK,MACjCC,WAAAA,CAAYnI,GAAkB,IAAboI,EAAIC,UAAA3S,OAAA,QAAA4S,IAAAD,UAAA,IAAAA,UAAA,GACnBE,MAAMvI,GAAK,KAIbwI,aAAgBC,IAAc,IAADC,EAC3B,OAAe,QAARA,EAAAC,KAAK3I,WAAG,IAAA0I,OAAA,EAARA,EAAUE,SAASH,KACnBE,KAAKvE,YAAc,IAClBuE,KAAKE,SACLF,KAAKG,OACNH,KAAKjC,WAAa,CAAC,EAC1B,KAEF5G,UAAY,IACH6I,KAAKvE,YAAc,IAClBuE,KAAKE,SACLF,KAAKG,OACNH,KAAKjC,WAAa,EACzB,KAEFqC,SAAW,IAAMJ,KAAKpC,SAAWoC,KAAKvE,YAAY,KAElDO,MAAQ,KACNgE,KAAK5I,QACL4I,KAAKvE,YAAc,CAAC,EAtBpBuE,KAAKP,KAAOA,CACd,E","sources":["assets/lavaLamp/power.svg","lava_lamp/LavaLamp.tsx","util/Audio.js"],"sourcesContent":["var _g;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgPower(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512.292 512.292\",\n    style: {\n      enableBackground: \"new 0 0 512.292 512.292\"\n    },\n    xmlSpace: \"preserve\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M256.061,0L256.061,0c17.673,0,32,14.327,32,32v106.667c0,17.673-14.327,32-32,32l0,0c-17.673,0-32-14.327-32-32V32   C224.061,14.327,238.387,0,256.061,0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M330.727,105.387L330.727,105.387c-0.157,10.742,5.259,20.8,14.315,26.581c80.432,49.143,105.796,154.185,56.652,234.616   S247.51,472.38,167.078,423.237S61.282,269.052,110.426,188.62c14.042-22.982,33.324-42.315,56.269-56.418   c9.211-5.781,14.773-15.92,14.699-26.795l0,0c0.049-17.673-14.238-32.039-31.911-32.088c-6.07-0.017-12.02,1.693-17.155,4.931   C22.233,146.634-11.58,291.318,56.803,401.412s213.067,143.907,323.161,75.524s143.907-213.067,75.524-323.161   c-19.035-30.645-44.879-56.489-75.524-75.524c-14.997-9.461-34.824-4.973-44.285,10.024   C332.447,93.397,330.731,99.33,330.727,105.387z\"\n  }))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgPower);\nexport default __webpack_public_path__ + \"static/media/power.632cc1e66922cf3fa35d93370ea84178.svg\";\nexport { ForwardRef as ReactComponent };","import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport \"../styles/lavalamp.css\";\n\nimport musicAudioNoise from \"../assets/lavaLamp/guitar.mp3\";\nimport clickAudioNoise from \"../assets/lavaLamp/click.mp3\";\nimport powerIcon from \"../assets/lavaLamp/power.svg\";\nimport { PersonalAudio } from \"../util/Audio\";\n\n// --- Audio sources ---\nconst AUDIO_SOURCES = {\n  REDWOOD: \"redwood\",\n  KEXP: \"kexp\",\n} as const;\n\ntype AudioSource = typeof AUDIO_SOURCES[keyof typeof AUDIO_SOURCES];\n\nconst AUDIO_SOURCE_CONFIG: Record<AudioSource, { label: string; url: string }> = {\n  [AUDIO_SOURCES.REDWOOD]: {\n    label: \"redwood meditation\",\n    url: musicAudioNoise,\n  },\n  [AUDIO_SOURCES.KEXP]: {\n    label: \"kexp\",\n    url: \"https://kexp.streamguys1.com/kexp160.aac\",\n  },\n};\n\n// --- Colors: keep state (for controlled inputs) + refs (fast access elsewhere) ---\nconst DEFAULT_HIGH = \"#ffdd00\";\nconst DEFAULT_LOW = \"#ff5500\";\n\n// --- Types ---\ninterface Particle {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  heat: number; // [0..1]\n}\n\ntype Vec2 = { x: number; y: number };\n\ntype SpatialGrid = {\n  cellSize: number;\n  cols: number;\n  rows: number;\n  heads: Int32Array; // length cols*rows, head index or -1\n  next: Int32Array; // length particleCount, next index or -1\n};\n\n// --- Constants ---\nconst SIM = {\n  GRAVITY: 0.01,\n  BUOYANCY: 0.04,\n  FRICTION: 0.98,\n\n  HEAT_RATE: 0.005,\n  COOL_RATE: 0.0017,\n  HEAT_CONDUCTION: 0.002,\n\n  HEAT_SOURCE_DISTANCE: 45,\n\n  COHESION_RADIUS: 25,\n  COHESION_STRENGTH: 0.0035,\n\n  MOUSE_HEAT_RADIUS: 100,\n} as const;\n\nconst RENDER = {\n  PARTICLE_RADIUS: 10,\n  PIXEL_SIZE: 6,\n  THRESHOLD: 0.8,\n} as const;\n\nconst CLUMPS = {\n  COUNT: 15,\n  RADIUS: 50,\n  TOP_HALF_PROB: 0.3,\n} as const;\n\n// Baseline density: preserves \"look\" across screens, computed once per page load.\nconst BASELINE = {\n  WIDTH: 1920,\n  HEIGHT: 1080,\n  PARTICLES: 1200,\n} as const;\n\n// --- Speed control (indexed slider) ---\nconst SPEED = {\n  MIN: 0.0,\n  MAX: 5,\n  DEFAULT: 0.25,\n  STEPS: 10, // number of discrete positions\n} as const;\n\n// --- Fixed update rate (independent of render cost / screen size) ---\nconst FIXED_FPS = 60;\nconst FIXED_MS = 1000 / FIXED_FPS;\nconst MAX_CATCHUP_STEPS = 4;\n\n// --- Persisted audio position ---\nconst MUSIC_TIME_KEY = \"lavaLamp.musicTimeSeconds\";\n\n// --- Utils ---\nfunction clamp01(v: number): number {\n  return v < 0 ? 0 : v > 1 ? 1 : v;\n}\n\nfunction clampInt(v: number, lo: number, hi: number) {\n  return v < lo ? lo : v > hi ? hi : v;\n}\n\nfunction lerp(a: number, b: number, t: number) {\n  return a + (b - a) * t;\n}\n\nfunction lerpInt(a: number, b: number, t: number): number {\n  const v = a + (b - a) * t;\n  return v < 0 ? 0 : v > 255 ? 255 : Math.round(v);\n}\n\nfunction randInCircle(radius: number): Vec2 {\n  const angle = Math.random() * Math.PI * 2;\n  const r = Math.random() * radius;\n  return { x: Math.cos(angle) * r, y: Math.sin(angle) * r };\n}\n\nfunction bounceInBounds(p: Particle, width: number, height: number) {\n  if (p.x < 0) {\n    p.x = 0;\n    p.vx *= -0.5;\n  } else if (p.x > width) {\n    p.x = width;\n    p.vx *= -0.5;\n  }\n\n  if (p.y < 0) {\n    p.y = 0;\n    p.vy *= -0.5;\n  } else if (p.y > height) {\n    p.y = height;\n    p.vy *= -0.5;\n  }\n}\n\nfunction clampAllToBounds(particles: Particle[], width: number, height: number) {\n  for (let i = 0; i < particles.length; i++) {\n    bounceInBounds(particles[i], width, height);\n  }\n}\n\nfunction computeParticleCount(width: number, height: number): number {\n  const baselineArea = BASELINE.WIDTH * BASELINE.HEIGHT;\n  const currentArea = width * height;\n\n  const density = BASELINE.PARTICLES / baselineArea;\n  const scaled = Math.round(currentArea * density);\n\n  return Math.max(200, Math.min(2000, scaled));\n}\n\nfunction readSavedMusicTimeSeconds(): number {\n  try {\n    const raw = localStorage.getItem(MUSIC_TIME_KEY);\n    if (!raw) return 0;\n    const v = Number(raw);\n    return Number.isFinite(v) && v >= 0 ? v : 0;\n  } catch {\n    return 0;\n  }\n}\n\nfunction writeSavedMusicTimeSeconds(seconds: number) {\n  try {\n    if (!Number.isFinite(seconds) || seconds < 0) return;\n    localStorage.setItem(MUSIC_TIME_KEY, String(seconds));\n  } catch {\n    // ignore\n  }\n}\n\n// Note: MIN=0 is special; idx 0 => frozen-ish. idx 1..(STEPS-1) => (0..MAX] in log space.\nfunction indexToSpeed(idx: number): number {\n  if (idx <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  if (idx >= steps) return SPEED.MAX;\n\n  // normalized position excluding 0\n  const t = idx / steps; // idx=steps/2 => midpoint\n\n  // calibrated so midpoint ≈ 0.5\n  const targetMidSpeed = 0.5;\n  const minPositive = (targetMidSpeed * targetMidSpeed) / SPEED.MAX;\n\n  const minLog = Math.log(minPositive);\n  const maxLog = Math.log(SPEED.MAX);\n\n  return Math.exp(lerp(minLog, maxLog, t));\n}\n\nfunction speedToNearestIndex(speed: number): number {\n  if (speed <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  const last = steps - 1;\n\n  let best = 1;\n  let bestErr = Infinity;\n  const target = Math.log(speed);\n\n  for (let i = 1; i <= last; i++) {\n    const s = indexToSpeed(i);\n    const err = Math.abs(Math.log(s) - target);\n    if (err < bestErr) {\n      bestErr = err;\n      best = i;\n    }\n  }\n  return best;\n}\n\n// --- Color / LUT ---\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } {\n  const h = hex.trim().replace(\"#\", \"\");\n  if (h.length === 3) {\n    const r = parseInt(h[0] + h[0], 16);\n    const g = parseInt(h[1] + h[1], 16);\n    const b = parseInt(h[2] + h[2], 16);\n    return { r, g, b };\n  }\n  if (h.length === 6) {\n    const r = parseInt(h.slice(0, 2), 16);\n    const g = parseInt(h.slice(2, 4), 16);\n    const b = parseInt(h.slice(4, 6), 16);\n    return { r, g, b };\n  }\n  return { r: 255, g: 221, b: 0 };\n}\n\nfunction packRgba(r: number, g: number, b: number, a: number): number {\n  // Uint32Array view over ImageData.data.buffer (common little-endian fast path).\n  return (a << 24) | (b << 16) | (g << 8) | r;\n}\n\nfunction buildHeatLut256(lowHex: string, highHex: string): Uint32Array {\n  const lo = hexToRgb(lowHex);\n  const hi = hexToRgb(highHex);\n\n  const lut = new Uint32Array(256);\n  for (let i = 0; i < 256; i++) {\n    const t = i / 255;\n    const r = lerpInt(lo.r, hi.r, t);\n    const g = lerpInt(lo.g, hi.g, t);\n    const b = lerpInt(lo.b, hi.b, t);\n    lut[i] = packRgba(r, g, b, 255);\n  }\n  return lut;\n}\n\n// --- Spatial grid helpers ---\nfunction ensureGrid(\n  gridRef: React.MutableRefObject<SpatialGrid | null>,\n  width: number,\n  height: number,\n  count: number,\n  cellSize: number\n) {\n  const cols = Math.max(1, Math.ceil(width / cellSize));\n  const rows = Math.max(1, Math.ceil(height / cellSize));\n  const cells = cols * rows;\n\n  const g = gridRef.current;\n  if (\n    !g ||\n    g.cols !== cols ||\n    g.rows !== rows ||\n    g.cellSize !== cellSize ||\n    g.next.length !== count ||\n    g.heads.length !== cells\n  ) {\n    gridRef.current = {\n      cellSize,\n      cols,\n      rows,\n      heads: new Int32Array(cells),\n      next: new Int32Array(count),\n    };\n  }\n}\n\nfunction gridIndex(g: SpatialGrid, cx: number, cy: number): number {\n  return cy * g.cols + cx;\n}\n\n// --- Init ---\nfunction createParticles(width: number, height: number, count: number): Particle[] {\n  const particles: Particle[] = [];\n  const particlesPerClump = Math.floor(count / CLUMPS.COUNT);\n\n  for (let i = 0; i < CLUMPS.COUNT; i++) {\n    const centerX = Math.random() * width;\n    const centerY =\n      Math.random() < CLUMPS.TOP_HALF_PROB\n        ? Math.random() * height * 0.5\n        : height * 0.5 + Math.random() * height * 0.5;\n\n    const clumpHeat = Math.random();\n    for (let j = 0; j < particlesPerClump; j++) {\n      const offset = randInCircle(CLUMPS.RADIUS);\n      particles.push({\n        x: centerX + offset.x,\n        y: centerY + offset.y,\n        vx: 0,\n        vy: 0,\n        heat: clumpHeat,\n      });\n    }\n  }\n\n  while (particles.length < count) {\n    particles.push({\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: 0,\n      vy: 0,\n      heat: 0,\n    });\n  }\n\n  return particles;\n}\n\n// --- Physics (grid-accelerated cohesion/conduction) ---\nexport function stepSimulationOnePairPass(\n  particles: Particle[],\n  width: number,\n  height: number,\n  pointerDown: boolean,\n  pointerPos: Vec2,\n  neighborCounts: Uint16Array,\n  timeScale: number,\n  grid: SpatialGrid\n) {\n  const dt = Math.max(0, Math.min(4.0, timeScale));\n\n  // Pass 1: integrate + pointer heat + reset neighbors + bounds\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    applyBuoyancyAndGravity(p, dt);\n    applyFriction(p, dt);\n    integrate(p, dt);\n\n    if (pointerDown) applyPointerHeat(p, pointerPos, dt);\n\n    neighborCounts[i] = 0;\n    bounceInBounds(p, width, height);\n  }\n\n  // dt=0 => frozen (no cohesion/conduction/cooling), but still clamp\n  if (dt === 0) {\n    for (let i = 0; i < particles.length; i++) {\n      particles[i].heat = clamp01(particles[i].heat);\n    }\n    clampAllToBounds(particles, width, height);\n    return;\n  }\n\n  // Build spatial hash\n  grid.heads.fill(-1);\n  const invCell = 1 / grid.cellSize;\n\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    let cx = (p.x * invCell) | 0;\n    let cy = (p.y * invCell) | 0;\n\n    if (cx < 0) cx = 0;\n    else if (cx >= grid.cols) cx = grid.cols - 1;\n\n    if (cy < 0) cy = 0;\n    else if (cy >= grid.rows) cy = grid.rows - 1;\n\n    const cell = gridIndex(grid, cx, cy);\n    grid.next[i] = grid.heads[cell];\n    grid.heads[cell] = i;\n  }\n\n  // Pass 2: local neighbor forces + conduction\n  const r = SIM.COHESION_RADIUS;\n  const r2 = r * r;\n\n  for (let i = 0; i < particles.length; i++) {\n    const p1 = particles[i];\n\n    let cx = (p1.x * invCell) | 0;\n    let cy = (p1.y * invCell) | 0;\n\n    if (cx < 0) cx = 0;\n    else if (cx >= grid.cols) cx = grid.cols - 1;\n\n    if (cy < 0) cy = 0;\n    else if (cy >= grid.rows) cy = grid.rows - 1;\n\n    const x0 = cx > 0 ? cx - 1 : cx;\n    const x1 = cx + 1 < grid.cols ? cx + 1 : cx;\n    const y0 = cy > 0 ? cy - 1 : cy;\n    const y1 = cy + 1 < grid.rows ? cy + 1 : cy;\n\n    for (let ny = y0; ny <= y1; ny++) {\n      for (let nx = x0; nx <= x1; nx++) {\n        let j = grid.heads[gridIndex(grid, nx, ny)];\n        while (j !== -1) {\n          if (j > i) {\n            const p2 = particles[j];\n            const dx = p2.x - p1.x;\n            const dy = p2.y - p1.y;\n            const d2 = dx * dx + dy * dy;\n\n            if (d2 > 0 && d2 < r2) {\n              neighborCounts[i]++;\n              neighborCounts[j]++;\n\n              const d = Math.sqrt(d2);\n              applyCohesionImpulse(p1, p2, dx, dy, d, dt);\n              applyHeatConduction(p1, p2, dt);\n            }\n          }\n          j = grid.next[j];\n        }\n      }\n    }\n  }\n\n  // Pass 3: heat source / cooling\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n    applyBottomHeatOrAirCooling(p, height, neighborCounts[i], dt);\n    p.heat = clamp01(p.heat);\n  }\n\n  clampAllToBounds(particles, width, height);\n}\n\nfunction applyBuoyancyAndGravity(p: Particle, dt: number) {\n  const buoyancy = p.heat * p.heat * SIM.BUOYANCY;\n  p.vy += (SIM.GRAVITY - buoyancy) * dt;\n}\n\nfunction applyFriction(p: Particle, dt: number) {\n  const f = Math.pow(SIM.FRICTION, dt);\n  p.vx *= f;\n  p.vy *= f;\n}\n\nfunction integrate(p: Particle, dt: number) {\n  p.x += p.vx * dt;\n  p.y += p.vy * dt;\n}\n\nfunction applyPointerHeat(p: Particle, pointerPos: Vec2, dt: number) {\n  const dx = p.x - pointerPos.x;\n  const dy = p.y - pointerPos.y;\n  const d2 = dx * dx + dy * dy;\n  const r = SIM.MOUSE_HEAT_RADIUS;\n  const r2 = r * r;\n\n  if (d2 < r2) {\n    const d = Math.sqrt(d2);\n    const intensity = 1 - d * (1 / r);\n    p.heat += SIM.HEAT_RATE * 2 * intensity * dt;\n  }\n}\n\nfunction applyCohesionImpulse(\n  p1: Particle,\n  p2: Particle,\n  dx: number,\n  dy: number,\n  d: number,\n  dt: number\n) {\n  const force = SIM.COHESION_STRENGTH * (1 - d * (1 / SIM.COHESION_RADIUS));\n  const invD = 1 / d;\n  const fx = dx * invD * force * dt;\n  const fy = dy * invD * force * dt;\n\n  p1.vx += fx;\n  p1.vy += fy;\n  p2.vx -= fx;\n  p2.vy -= fy;\n}\n\nfunction applyHeatConduction(p1: Particle, p2: Particle, dt: number) {\n  const heatDiff = p1.heat - p2.heat;\n  const conduction = heatDiff * SIM.HEAT_CONDUCTION * dt;\n  p1.heat -= conduction;\n  p2.heat += conduction;\n}\n\nfunction applyBottomHeatOrAirCooling(\n  p: Particle,\n  height: number,\n  neighborCount: number,\n  dt: number\n) {\n  const distanceFromBottom = height - p.y;\n\n  if (distanceFromBottom < SIM.HEAT_SOURCE_DISTANCE) {\n    const intensity = 1 - distanceFromBottom * (1 / SIM.HEAT_SOURCE_DISTANCE);\n    p.heat += SIM.HEAT_RATE * intensity * dt;\n    return;\n  }\n\n  const maxNeighbors = 8;\n  const neighbors = neighborCount < maxNeighbors ? neighborCount : maxNeighbors;\n  const airExposure = 1 - neighbors / maxNeighbors;\n\n  p.heat -= SIM.COOL_RATE * (0.2 + airExposure * 0.8) * dt;\n}\n\n// --- Render helpers ---\nfunction ensureImageData(\n  ctx: CanvasRenderingContext2D,\n  imageRef: React.MutableRefObject<ImageData | null>,\n  width: number,\n  height: number\n): ImageData {\n  const img = imageRef.current;\n  if (!img || img.width !== width || img.height !== height) {\n    imageRef.current = ctx.createImageData(width, height);\n  }\n  return imageRef.current!;\n}\n\nfunction drawMetaballs(\n  imageData: ImageData,\n  particles: Particle[],\n  canvasWidth: number,\n  canvasHeight: number,\n  heatLut256: Uint32Array\n) {\n  const pixelSize = RENDER.PIXEL_SIZE;\n  const threshold = RENDER.THRESHOLD;\n  const r2 = RENDER.PARTICLE_RADIUS * RENDER.PARTICLE_RADIUS;\n\n  const data32 = new Uint32Array(imageData.data.buffer);\n\n  // 7) Don’t clear twice: clear ONCE here to opaque black\n  const black = packRgba(0, 0, 0, 255);\n  data32.fill(black);\n\n  const w = canvasWidth;\n\n  for (let y = 0; y < canvasHeight; y += pixelSize) {\n    for (let x = 0; x < canvasWidth; x += pixelSize) {\n      let influenceSum = 0;\n      let heatWeightedSum = 0;\n\n      for (let i = 0; i < particles.length; i++) {\n        const p = particles[i];\n        const dx = x - p.x;\n        const dy = y - p.y;\n        const distSq = dx * dx + dy * dy;\n        const influence = r2 / (distSq + 1);\n\n        influenceSum += influence;\n        heatWeightedSum += influence * p.heat;\n      }\n\n      if (influenceSum <= threshold) continue;\n\n      const heat = heatWeightedSum / influenceSum;\n      const lutIdx = heat <= 0 ? 0 : heat >= 1 ? 255 : (heat * 255) | 0;\n      const rgba = heatLut256[lutIdx];\n\n      for (let py = 0; py < pixelSize; py++) {\n        const yy = y + py;\n        if (yy >= canvasHeight) break;\n\n        let idx = yy * w + x;\n        const rowEnd = Math.min(x + pixelSize, w);\n        for (let xx = x; xx < rowEnd; xx++) {\n          data32[idx++] = rgba;\n        }\n      }\n    }\n  }\n}\n\nfunction renderFrame(\n  ctx: CanvasRenderingContext2D,\n  canvas: HTMLCanvasElement,\n  particles: Particle[],\n  imageRef: React.MutableRefObject<ImageData | null>,\n  heatLut256: Uint32Array\n) {\n  const imageData = ensureImageData(ctx, imageRef, canvas.width, canvas.height);\n  drawMetaballs(imageData, particles, canvas.width, canvas.height, heatLut256);\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// --- Component ---\nexport default function LavaLamp(): ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const ctxRef = useRef<CanvasRenderingContext2D | null>(null);\n\n  const rafRef = useRef<number | null>(null);\n\n  const particlesRef = useRef<Particle[]>([]);\n  const imageRef = useRef<ImageData | null>(null);\n  const neighborCountsRef = useRef<Uint16Array>(new Uint16Array(0));\n  const particleCountRef = useRef<number | null>(null);\n\n  const gridRef = useRef<SpatialGrid | null>(null);\n\n  // 5) Cache dimensions ONCE (read only on page load)\n  const sizeRef = useRef<{ w: number; h: number }>({ w: 1, h: 1 });\n\n  const [audioSource, setAudioSource] = useState<AudioSource>(AUDIO_SOURCES.KEXP);\n\n  const gameMusic = useMemo(() => {\n    // Initialize directly with KEXP stream\n    const audio = new PersonalAudio(AUDIO_SOURCE_CONFIG[AUDIO_SOURCES.KEXP].url, true);\n    audio.preload = \"auto\";\n    return audio;\n  }, []);\n  const clickSound = useMemo(() => new PersonalAudio(clickAudioNoise, false), []);\n\n  const [hasStarted, setHasStarted] = useState(false);\n\n  const pointerDownRef = useRef(false);\n  const pointerPosRef = useRef<Vec2>({ x: 0, y: 0 });\n\n  // Speed slider state\n  const defaultSpeedIdx = useMemo(() => speedToNearestIndex(SPEED.DEFAULT), []);\n  const [speedIdx, setSpeedIdx] = useState<number>(defaultSpeedIdx);\n  const speedRef = useRef<number>(SPEED.DEFAULT);\n\n  useEffect(() => {\n    speedRef.current = indexToSpeed(speedIdx);\n  }, [speedIdx]);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n  const toggleMenu = useCallback(() => setMenuOpen((v) => !v), []);\n\n  const [volume, setVolume] = useState(1.0);\n  useEffect(() => {\n    gameMusic.volume = volume;\n  }, [volume, gameMusic]);\n  const [nowPlaying, setNowPlaying] = useState<{\n    song: string;\n    artist: string;\n    album: string;\n    isAirbreak: boolean;\n  } | null>(null);\n  const [nowPlayingExpanded, setNowPlayingExpanded] = useState(true);\n\n  const isFirstRender = useRef(true);\n\n  useEffect(() => {\n    // Skip on first render - audio is already initialized with KEXP\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    const config = AUDIO_SOURCE_CONFIG[audioSource];\n    const wasPlaying = gameMusic.isPlaying();\n\n    // Pause current audio before switching\n    if (wasPlaying) {\n      gameMusic.pause();\n    }\n\n    gameMusic.src = config.url;\n    gameMusic.load();\n\n    if (wasPlaying) {\n      const onCanPlay = () => {\n        gameMusic.play().catch(() => {\n          // ignore autoplay errors\n        });\n        gameMusic.removeEventListener('canplaythrough', onCanPlay);\n      };\n      gameMusic.addEventListener('canplaythrough', onCanPlay, { once: true });\n    }\n  }, [audioSource, gameMusic]);\n\n  // Fetch KEXP now playing info\n  useEffect(() => {\n    if (!hasStarted || audioSource !== AUDIO_SOURCES.KEXP) {\n      setNowPlaying(null);\n      return;\n    }\n\n    const fetchNowPlaying = async () => {\n      try {\n        const response = await fetch(\"https://api.kexp.org/v2/plays/?limit=5\");\n        const data = await response.json();\n\n        // Find the most recent trackplay (skip airbreaks which don't have song/artist/album)\n        const track = data.results?.find((play: any) => play.play_type === \"trackplay\");\n\n        if (track) {\n          const newTrack = {\n            song: (track.song || \"unknown track\").toLowerCase(),\n            artist: (track.artist || \"unknown artist\").toLowerCase(),\n            album: (track.album || \"unknown album\").toLowerCase(),\n            isAirbreak: false,\n          };\n          console.log('[KEXP] Updating now playing:', newTrack);\n          setNowPlaying(newTrack);\n        } else {\n          console.log('[KEXP] No trackplay found, showing airbreak message');\n          setNowPlaying({\n            song: \"station break\",\n            artist: \"\",\n            album: \"\",\n            isAirbreak: true,\n          });\n        }\n      } catch (err) {\n        console.log('[KEXP] Fetch error:', err);\n      }\n    };\n\n    fetchNowPlaying();\n    const interval = setInterval(fetchNowPlaying, 10000); // Poll every 10 seconds\n\n    return () => clearInterval(interval);\n  }, [hasStarted, audioSource]);\n\n  const lavaLowColorRef = useRef(DEFAULT_LOW);\n  const lavaHighColorRef = useRef(DEFAULT_HIGH);\n\n  const [lavaLowColor, setLavaLowColor] = useState(DEFAULT_LOW);\n  const [lavaHighColor, setLavaHighColor] = useState(DEFAULT_HIGH);\n\n  const heatLutRef = useRef<Uint32Array>(buildHeatLut256(DEFAULT_LOW, DEFAULT_HIGH));\n\n  // Rebuild LUT whenever colors change; redraw immediately if running.\n  useEffect(() => {\n    lavaLowColorRef.current = lavaLowColor;\n    lavaHighColorRef.current = lavaHighColor;\n    heatLutRef.current = buildHeatLut256(lavaLowColor, lavaHighColor);\n  }, [lavaLowColor, lavaHighColor, hasStarted]);\n\n  // 5) Cache canvas/context + dimensions (only read on initial mount)\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n    sizeRef.current = { w, h };\n\n    canvas.width = w;\n    canvas.height = h;\n\n    ctxRef.current = canvas.getContext(\"2d\");\n\n    // ensure image data matches cached size\n    imageRef.current = null;\n\n    // no resize listener by request\n  }, []);\n\n  const initializeParticlesOnce = useCallback(() => {\n    const { w, h } = sizeRef.current;\n\n    if (particleCountRef.current === null) {\n      particleCountRef.current = computeParticleCount(w, h);\n    }\n\n    const count = particleCountRef.current;\n    particlesRef.current = createParticles(w, h, count);\n    neighborCountsRef.current = new Uint16Array(count);\n\n    ensureGrid(gridRef, w, h, count, SIM.COHESION_RADIUS);\n  }, []);\n\n  const saveMusicPosition = useCallback(() => {\n    writeSavedMusicTimeSeconds(gameMusic.currentTime ?? 0);\n  }, [gameMusic]);\n\n  useEffect(() => {\n    if (!hasStarted) return;\n\n    const tick = () => saveMusicPosition();\n    const id = window.setInterval(tick, 1000);\n\n    const onPageHide = () => saveMusicPosition();\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"hidden\") saveMusicPosition();\n    };\n\n    window.addEventListener(\"pagehide\", onPageHide);\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n\n    return () => {\n      window.clearInterval(id);\n      window.removeEventListener(\"pagehide\", onPageHide);\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    };\n  }, [hasStarted, saveMusicPosition]);\n\n  useEffect(() => {\n    return () => {\n      saveMusicPosition();\n\n      gameMusic.pause();\n      gameMusic.volume = 0;\n      gameMusic.reset();\n\n      clickSound.pause();\n      clickSound.volume = 0;\n      clickSound.reset();\n    };\n  }, [gameMusic, clickSound, saveMusicPosition]);\n\n  const updateOnce = useCallback(() => {\n    const g = gridRef.current;\n    if (!g) return;\n\n    const { w, h } = sizeRef.current;\n\n    stepSimulationOnePairPass(\n      particlesRef.current,\n      w,\n      h,\n      pointerDownRef.current,\n      pointerPosRef.current,\n      neighborCountsRef.current,\n      speedRef.current,\n      g\n    );\n  }, []);\n\n  const draw = useCallback(() => {\n    const canvas = canvasRef.current;\n    const ctx = ctxRef.current;\n    if (!canvas || !ctx) return;\n\n    renderFrame(ctx, canvas, particlesRef.current, imageRef, heatLutRef.current);\n  }, []);\n\n  // 0) Fixed update cadence: updates happen at FIXED_FPS regardless of render speed.\n  const clockRef = useRef<{ last: number; acc: number }>({ last: 0, acc: 0 });\n\n  const animate = useCallback((now: number) => {\n    const clock = clockRef.current;\n\n    if (clock.last === 0) clock.last = now;\n    const delta = now - clock.last;\n    clock.last = now;\n\n    // Clamp massive deltas (tab-switch etc.)\n    clock.acc += Math.min(250, Math.max(0, delta));\n\n    let steps = 0;\n    while (clock.acc >= FIXED_MS && steps < MAX_CATCHUP_STEPS) {\n      updateOnce();\n      clock.acc -= FIXED_MS;\n      steps++;\n    }\n\n    // Drop extra backlog to avoid death spiral\n    if (clock.acc >= FIXED_MS) clock.acc = 0;\n\n    draw();\n    rafRef.current = requestAnimationFrame(animate);\n  }, [draw, updateOnce]);\n\n  // Pointer handling\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const toLocal = (e: PointerEvent): Vec2 => {\n      const rect = canvas.getBoundingClientRect();\n      return { x: e.clientX - rect.left, y: e.clientY - rect.top };\n    };\n\n    const onDown = (e: PointerEvent) => {\n      pointerDownRef.current = true;\n      pointerPosRef.current = toLocal(e);\n    };\n    const onMove = (e: PointerEvent) => {\n      pointerPosRef.current = toLocal(e);\n    };\n    const onUp = () => {\n      pointerDownRef.current = false;\n    };\n\n    canvas.addEventListener(\"pointerdown\", onDown);\n    window.addEventListener(\"pointermove\", onMove);\n    window.addEventListener(\"pointerup\", onUp);\n    window.addEventListener(\"pointercancel\", onUp);\n\n    return () => {\n      canvas.removeEventListener(\"pointerdown\", onDown);\n      window.removeEventListener(\"pointermove\", onMove);\n      window.removeEventListener(\"pointerup\", onUp);\n      window.removeEventListener(\"pointercancel\", onUp);\n    };\n  }, []);\n\n  const playClick = useCallback(() => {\n    try {\n      clickSound.volume = 1.0;\n      clickSound.currentTime = 0;\n      clickSound.reset();\n      clickSound.play();\n    } catch {\n      // ignore\n    }\n  }, [clickSound]);\n\n  const resumeMusicFromSavedTime = useCallback(() => {\n    const t = readSavedMusicTimeSeconds();\n    try {\n      const duration = (gameMusic as any).duration as number | undefined;\n      if (typeof duration === \"number\" && Number.isFinite(duration) && duration > 0) {\n        gameMusic.currentTime = t % duration;\n      } else {\n        gameMusic.currentTime = t;\n      }\n    } catch {\n      // ignore\n    }\n  }, [gameMusic]);\n\n  const startLamp = useCallback(async () => {\n    playClick();\n\n    if (!hasStarted) {\n      setHasStarted(true);\n      initializeParticlesOnce();\n\n      // reset fixed-timestep clock\n      clockRef.current = { last: 0, acc: 0 };\n\n      // draw a first frame immediately\n      requestAnimationFrame(() => draw());\n\n      // start RAF loop\n      rafRef.current = requestAnimationFrame(animate);\n    }\n\n    // Only resume from saved time for non-streaming sources (like Redwood)\n    if (audioSource !== AUDIO_SOURCES.KEXP) {\n      resumeMusicFromSavedTime();\n    }\n    gameMusic.volume = 1.0;\n\n    // Ensure audio is loaded before trying to play\n    if (gameMusic.readyState < 3) {\n      // If not enough data loaded, trigger load and wait\n      gameMusic.load();\n\n      const onCanPlay = async () => {\n        try {\n          await gameMusic.play();\n        } catch {\n          // ignore if still fails\n        }\n        gameMusic.removeEventListener('canplaythrough', onCanPlay);\n      };\n      gameMusic.addEventListener('canplaythrough', onCanPlay, { once: true });\n    } else {\n      // Audio already loaded, play immediately\n      try {\n        await gameMusic.play();\n      } catch {\n        // ignore autoplay errors\n      }\n    }\n  }, [\n    animate,\n    audioSource,\n    draw,\n    gameMusic,\n    hasStarted,\n    initializeParticlesOnce,\n    playClick,\n    resumeMusicFromSavedTime,\n  ]);\n\n  const initialCanvasSize = useMemo(\n    () => ({ w: window.innerWidth, h: window.innerHeight }),\n    []\n  );\n\n  const lastSpeedIdx = SPEED.STEPS - 1;\n\n  return (\n    <div className=\"lava-lamp-container\">\n      <canvas\n        ref={canvasRef}\n        className=\"lava-lamp-canvas\"\n        width={initialCanvasSize.w}\n        height={initialCanvasSize.h}\n      />\n\n      {nowPlaying && (\n        <div className={`lava-lamp-now-playing ${nowPlayingExpanded ? 'expanded' : 'collapsed'}`}>\n          <button\n            type=\"button\"\n            className=\"lava-lamp-now-playing-toggle\"\n            onClick={() => setNowPlayingExpanded(!nowPlayingExpanded)}\n            aria-label={nowPlayingExpanded ? \"Collapse now playing\" : \"Expand now playing\"}\n          >\n            {nowPlayingExpanded ? '›' : '‹'}\n          </button>\n          <div className=\"lava-lamp-now-playing-content\">\n            <div className=\"lava-lamp-now-playing-header\">\n              <div className=\"lava-lamp-now-playing-label\">kexp</div>\n              {!nowPlaying.isAirbreak && (\n                <div className=\"lava-lamp-soundwave\">\n                  <div className=\"lava-lamp-soundwave-bar\"></div>\n                  <div className=\"lava-lamp-soundwave-bar\"></div>\n                  <div className=\"lava-lamp-soundwave-bar\"></div>\n                  <div className=\"lava-lamp-soundwave-bar\"></div>\n                </div>\n              )}\n            </div>\n            <div className=\"lava-lamp-now-playing-song\">{nowPlaying.song}</div>\n            {!nowPlaying.isAirbreak && (\n              <>\n                <div className=\"lava-lamp-now-playing-artist\">{nowPlaying.artist}</div>\n                <div className=\"lava-lamp-now-playing-album\">{nowPlaying.album}</div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n\n      {!hasStarted ? (\n        <div className=\"lava-lamp-start-overlay\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-start\"\n            onClick={startLamp}\n            aria-label=\"Start lava lamp radio\"\n          >\n            <img src={powerIcon} alt=\"Power\" className=\"lava-lamp-start-icon\" />\n          </button>\n        </div>\n      ) : (\n        <div className=\"lava-lamp-controls\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-menu-toggle\"\n            onClick={toggleMenu}\n            aria-label={menuOpen ? \"Hide menu\" : \"Show menu\"}\n            aria-pressed={menuOpen}\n          >\n            {menuOpen ? \"✕\" : \"☰\"}\n          </button>\n\n          {menuOpen && (\n            <div className=\"lava-lamp-menu\">\n              {/* Speed */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">speed: {speedIdx}</div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={lastSpeedIdx}\n                    step={1}\n                    value={speedIdx}\n                    onChange={(e) =>\n                      setSpeedIdx(clampInt(Number(e.target.value), 0, lastSpeedIdx))\n                    }\n                    aria-label=\"Simulation speed\"\n                  />\n                </div>\n              </div>\n\n              {/* Volume */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">\n                    volume: {Math.round(volume * 100)}%\n                  </div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={1}\n                    step={0.01}\n                    value={volume}\n                    onChange={(e) => setVolume(Number(e.target.value))}\n                    aria-label=\"Music volume\"\n                  />\n                </div>\n              </div>\n\n              {/* Audio Source */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">audio source</div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <select\n                    className=\"lava-lamp-slider\"\n                    value={audioSource}\n                    onChange={(e) => setAudioSource(e.target.value as AudioSource)}\n                    aria-label=\"Audio source\"\n                  >\n                    {Object.entries(AUDIO_SOURCE_CONFIG).map(([key, config]) => (\n                      <option key={key} value={key}>\n                        {config.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Lava colors */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">lava colors</div>\n                </div>\n\n                <div className=\"lava-lamp-color-row\">\n\n                  <label className=\"lava-lamp-color-label\">\n                    hot\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaHighColor}\n                      onChange={(e) => setLavaHighColor(e.target.value)}\n                      aria-label=\"Lava high color\"\n                    />\n                  </label>\n\n                  <label className=\"lava-lamp-color-label\">\n                    cool\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaLowColor}\n                      onChange={(e) => setLavaLowColor(e.target.value)}\n                      aria-label=\"Lava low color\"\n                    />\n                  </label>\n\n                  <button\n                    type=\"button\"\n                    className=\"lava-lamp-color-reset\"\n                    onClick={() => {\n                      setLavaLowColor(DEFAULT_LOW);\n                      setLavaHighColor(DEFAULT_HIGH);\n                    }}\n                  >\n                    reset\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  isPlaying = () => {\n    return this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["AUDIO_SOURCES","REDWOOD","KEXP","AUDIO_SOURCE_CONFIG","label","url","musicAudioNoise","DEFAULT_HIGH","DEFAULT_LOW","SIM","GRAVITY","BUOYANCY","FRICTION","HEAT_RATE","COOL_RATE","HEAT_CONDUCTION","HEAT_SOURCE_DISTANCE","COHESION_RADIUS","COHESION_STRENGTH","MOUSE_HEAT_RADIUS","RENDER","PARTICLE_RADIUS","PIXEL_SIZE","THRESHOLD","CLUMPS","COUNT","RADIUS","TOP_HALF_PROB","BASELINE","WIDTH","HEIGHT","PARTICLES","SPEED","MIN","MAX","DEFAULT","STEPS","FIXED_MS","MAX_CATCHUP_STEPS","MUSIC_TIME_KEY","clamp01","v","lerpInt","a","b","t","Math","round","randInCircle","radius","angle","random","PI","r","x","cos","y","sin","bounceInBounds","p","width","height","vx","vy","clampAllToBounds","particles","i","length","indexToSpeed","idx","steps","minPositive","targetMidSpeed","minLog","log","maxLog","exp","lerp","hexToRgb","hex","h","trim","replace","parseInt","g","slice","packRgba","buildHeatLut256","lowHex","highHex","lo","hi","lut","Uint32Array","gridIndex","cx","cy","cols","stepSimulationOnePairPass","pointerDown","pointerPos","neighborCounts","timeScale","grid","dt","max","min","applyBuoyancyAndGravity","applyFriction","integrate","applyPointerHeat","heat","heads","fill","invCell","cellSize","rows","cell","next","r2","p1","x0","x1","y0","y1","ny","nx","j","p2","dx","dy","d2","applyCohesionImpulse","sqrt","applyHeatConduction","applyBottomHeatOrAirCooling","buoyancy","f","pow","intensity","d","force","invD","fx","fy","conduction","neighborCount","distanceFromBottom","airExposure","renderFrame","ctx","canvas","imageRef","heatLut256","imageData","img","current","createImageData","ensureImageData","canvasWidth","canvasHeight","pixelSize","threshold","data32","data","buffer","black","w","influenceSum","heatWeightedSum","influence","rgba","py","yy","rowEnd","xx","drawMetaballs","putImageData","LavaLamp","canvasRef","useRef","ctxRef","rafRef","particlesRef","neighborCountsRef","Uint16Array","particleCountRef","gridRef","sizeRef","audioSource","setAudioSource","useState","gameMusic","useMemo","audio","PersonalAudio","preload","clickSound","clickAudioNoise","hasStarted","setHasStarted","pointerDownRef","pointerPosRef","defaultSpeedIdx","speed","last","best","bestErr","Infinity","target","s","err","abs","speedToNearestIndex","speedIdx","setSpeedIdx","speedRef","useEffect","menuOpen","setMenuOpen","toggleMenu","useCallback","volume","setVolume","nowPlaying","setNowPlaying","nowPlayingExpanded","setNowPlayingExpanded","isFirstRender","config","wasPlaying","isPlaying","pause","src","load","onCanPlay","play","catch","removeEventListener","addEventListener","once","fetchNowPlaying","async","_data$results","response","fetch","track","json","results","find","play_type","newTrack","song","toLowerCase","artist","album","isAirbreak","console","interval","setInterval","clearInterval","lavaLowColorRef","lavaHighColorRef","lavaLowColor","setLavaLowColor","lavaHighColor","setLavaHighColor","heatLutRef","window","innerWidth","innerHeight","getContext","initializeParticlesOnce","baselineArea","currentArea","density","scaled","computeParticleCount","count","particlesPerClump","floor","centerX","centerY","clumpHeat","offset","push","createParticles","ceil","cells","Int32Array","ensureGrid","saveMusicPosition","_gameMusic$currentTim","seconds","Number","isFinite","localStorage","setItem","String","_unused2","writeSavedMusicTimeSeconds","currentTime","id","tick","onPageHide","onVisibilityChange","document","visibilityState","reset","updateOnce","draw","clockRef","acc","animate","now","clock","delta","requestAnimationFrame","toLocal","e","rect","getBoundingClientRect","clientX","left","clientY","top","onDown","onMove","onUp","playClick","_unused3","resumeMusicFromSavedTime","raw","getItem","_unused","readSavedMusicTimeSeconds","duration","_unused4","startLamp","readyState","_unused5","_unused6","initialCanvasSize","lastSpeedIdx","_jsxs","className","children","_jsx","ref","concat","type","onClick","_Fragment","step","value","onChange","Object","entries","map","_ref","key","powerIcon","alt","Audio","constructor","loop","arguments","undefined","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","timeLeft"],"sourceRoot":""}