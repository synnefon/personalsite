{"version":3,"file":"static/js/610.3d0a09ec.chunk.js","mappings":"qKACO,MAAMA,EAAuB,EACvBC,EAAmB,GACnBC,EAAY,GACZC,EAAW,GACXC,EAAW,EACXC,EAAoB,EAGpBC,EAAiB,IACjBC,EAAiB,IAMjBC,EAAe,SACfC,EAAiB,SAGjBC,EAAuB,EAGvBC,EAAkB,IAAlBA,EAA0B,IAA1BA,EAAkC,GAElCC,EAAmB,GACnBC,EAAqB,GACrBC,EAAqB,EACrBC,EAAa,E,aCxBnB,MAAMC,GAAOC,EAAAA,EAAAA,OAClBC,IAAA,IAAC,EAAEC,EAAC,EAAEC,EAAC,OAAEC,GAAmDH,EAAA,OAC1DI,EAAAA,EAAAA,KAAA,OACE,cAAaH,EACb,cAAaC,EACbG,UAAS,iBAAAC,OAAmBH,EAAS,UAAY,IACjDI,MACEJ,EACI,CACEK,gBAAgB,OAADF,OAASb,EAAY,MAAAa,OAAKb,EAAY,MAAAa,OAAKb,EAAY,WAExEgB,GAEN,ICIN,SAASC,EAAaC,GACpB,MAAMC,EAAQD,EAAIE,OAAOC,MAAM,MACzBC,EAAkB,GAYxB,OATAH,EAAMI,SAAQ,CAACC,EAAMf,KACnB,IAAK,IAAID,EAAI,EAAGA,EAAIgB,EAAKC,OAAQjB,IAAK,CAEvB,MADAgB,EAAKhB,IAEhBc,EAAOI,KAAK,CAAClB,EAAGC,GAEpB,KAGKa,CACT,CDhBAjB,EAAKsB,YAAc,OCkBnB,MAAMC,EAAiBX,EAAa,kBAK9BY,EAA0BZ,EAAa,iCAMvCa,EAAsBb,EAAa,8VAYnCc,EAAyBd,EAAa,kHA4D/Be,EAA4B,CACvC,CACEC,KAAM,iBACNC,QAASL,GAEX,CACEI,KAAM,oBACNC,QAASJ,GAEX,CACEG,KAAM,QACNC,QA1DmBjB,EAAa,mCA4DlC,CACEgB,KAAM,cACNC,QAvDyBjB,EAAa,sBAyDxC,CACEgB,KAAM,wBACNC,QApDkBjB,EAAa,kCAsDjC,CACEgB,KAAM,iBACNC,QAhD4BjB,EAAa,yDAkD3C,CACEgB,KAAM,UACNC,QAtCqBjB,EAAa,qCAwCpC,CACEgB,KAAM,gBACNC,QAASH,GAET,CACEE,KAAM,QACNC,QAASN,ICzJR,MAAMO,EAAUA,CAAC3B,EAAWC,KAChCD,EAAIX,GAAgBC,GAAkBW,EAAIZ,GAEhCuC,EAAYC,GAGhB,CAFGC,KAAKC,MAAMF,EAAIvC,GAAkBD,EAChCwC,EAAIvC,EAAkBD,GCkF5B,SAAS2C,EAAYC,GAOL,IAPM,aAC3BC,EAAY,YACZC,EAAW,YACXC,EAAW,cACXC,EAAa,aACbC,EAAY,WACZC,GACkBN,EAClB,MAAMO,GAAaC,EAAAA,EAAAA,SAAgB,GAC7BC,GAAoBD,EAAAA,EAAAA,QAAsB,MAC1CE,GAAkBF,EAAAA,EAAAA,QAAe,GACjCG,GAAiBH,EAAAA,EAAAA,QAAe,GAEhCI,GAAUC,EAAAA,EAAAA,cACd,WAA4C,IAA3CC,EAAiBC,UAAA/B,OAAA,QAAAT,IAAAwC,UAAA,GAAAA,UAAA,GAAGC,YAAYC,MAC/B,IAAKV,EAAWW,QAEd,YADAT,EAAkBS,QAAU,MAO9B,GAHgBJ,EAAYJ,EAAgBQ,QAC3B,IAAQf,EAAYe,QAInC,YADAT,EAAkBS,QAAUC,sBAAsBP,IAIpD,MAAMQ,EAAcnB,EAAaiB,QAAQG,KACzC,GArGN,SAAwBD,EAAqBb,EAA6CE,EAA0DL,GAClJ,QAAIgB,EAAclE,KAClBqD,EAAWW,SAAU,EACrBT,EAAkBS,QAAU,KAC5BI,MAAM,0CAADlD,OACuClB,EAAc,aAE1DkD,GAAemB,GAAMA,EAAI,KAClB,EACT,CA4FUC,CAAeJ,EAAab,EAAYE,EAAmBL,GAC7D,OAGF,MACMqB,EA/FZ,SAA+BC,GAK7B,MAAO,CAAEC,KAJI9B,KAAKC,MAAM4B,EAAgBE,OAAO7D,GAAKZ,EAIrC0E,KAHFhC,KAAKC,MAAM4B,EAAgBE,OAAO7D,GAAK2D,EAAgBI,WAAWC,KAAO5E,EAGjE6E,KAFRnC,KAAKC,MAAM4B,EAAgBE,OAAO5D,GAAKb,EAEzB8E,KADdpC,KAAKC,MAAM4B,EAAgBE,OAAO5D,GAAK0D,EAAgBI,WAAWI,KAAO/E,EAExF,CAyFqBgF,CADSjC,EAAYgB,SAK9BkB,EAzEZ,SACEC,EACAC,EAAsBxE,GAErB,IADD,KAAE6D,EAAI,KAAEE,EAAI,KAAEG,EAAI,KAAEC,GAAmEnE,EAEvF,MAAMsE,EAAU,IAAIG,IAapB,OAZAF,EAAiBvD,SAAQ,CAAC0D,EAAOC,KAC/B,MAAMC,EAAQJ,EAAUK,IAAIF,GAC5B,GACED,IAAUlF,GACToF,IAAoB,IAAVF,GAAyB,IAAVA,GAC1B,CACA,MAAOzE,EAAGC,GAAK2B,EAAS8C,GACpB1E,GAAK4D,GAAQ5D,GAAK8D,GAAQ7D,GAAKgE,GAAQhE,GAAKiE,GAC9CG,EAAQQ,IAAIH,EAEhB,KAEKL,CACT,CAsDsBS,CA3FtB,SAAyBP,GACvB,MAAMD,EAAmB,IAAIS,IAc7B,OAbAR,EAAUxD,SAAS2D,IACjB,MAAO1E,EAAGC,GAAK2B,EAAS8C,GACxB,IAAK,IAAIM,GAAM,EAAGA,GAAM,EAAGA,IACzB,IAAK,IAAIC,GAAM,EAAGA,GAAM,EAAGA,IAAM,CAC/B,GAAW,IAAPA,GAAmB,IAAPD,EAAU,SAC1B,MAAME,EAAWvD,EAAQ3B,EAAIiF,EAAIhF,EAAI+E,GACrCV,EAAiBa,IACfD,GACCZ,EAAiBc,IAAIF,IAAa,GAAK,EAE5C,CACF,IAEKZ,CACT,CAyE+Be,CAAgBnD,EAAaiB,SAETjB,EAAaiB,QAASO,GAEnE,GAAqB,IAAjBW,EAAQf,KAMV,OALAd,EAAWW,SAAU,EACrBZ,GAAW,GACXG,EAAkBS,QAAU,KAC5BjB,EAAaiB,QAAUkB,OACvBhC,GAAemB,GAAMA,EAAI,KA3DjC,SAAyB8B,EAAqBjC,EAAqBT,GAC7D0C,EAA4B,IAAdjC,GAChBT,EAAeO,UACXP,EAAeO,SAAW,KAC5BoC,QAAQC,KAAK,gCAADnF,OACsBgD,EAAW,YAAAhD,OAAMiF,EAAW,+BAE9D1C,EAAeO,QAAU,IAG3BP,EAAeO,QAAU,CAE7B,CAmDMsC,CAAgBpB,EAAQf,KAAMD,EAAaT,GAE3CV,EAAaiB,QAAUkB,EACvBhC,GAAemB,GAAMA,EAAI,IACzBlB,GAAcoD,GAAMA,EAAI,IACxB/C,EAAgBQ,QAAUJ,EAE1BL,EAAkBS,QAAUC,sBAAsBP,EACpD,GACA,CAACX,EAAcC,EAAaC,EAAaC,EAAeC,EAAcC,IAYxE,OARAoD,EAAAA,EAAAA,YAAU,IACD,KAC6B,OAA9BjD,EAAkBS,SACpByC,qBAAqBlD,EAAkBS,QACzC,GAED,IAEI,CACLX,aACAE,oBACAC,kBACAE,UAEJ,C,cCzIe,SAASgD,IAAoC,IAADC,EAIzD,MAAM1D,GAAcK,EAAAA,EAAAA,QAAesD,GAG7BC,EAAclE,KAAKmE,KACvBC,OAAOC,aAAeJ,EAAsBA,IAExCK,EAActE,KAAKmE,KACvBC,OAAOG,YAAcN,EAAsBA,MAMtC,YAAEO,EAAW,eAAEC,EAAc,eAAEC,EAAc,gBAAEC,KACpDC,EAAAA,EAAAA,WAAS,KACP,MAAMhF,EHmHL,WACL,MAAMiF,EAAc7E,KAAKC,MAAMD,KAAK8E,SAAWpF,EAASP,QAClDS,EAAUF,EAASmF,GAEzB,OADApB,QAAQsB,IAAI,qBAADxG,OAAsBqB,EAAQD,OAClCC,CACT,CGxHsBoF,GACVC,EAAO,IAAIvC,IACf9C,EAAQA,QAAQsF,KAAIjH,IAAA,IAAEC,EAAGC,GAAEF,EAAA,OAAK4B,EAAQ3B,EAAGC,EAAE,KAIzCgH,EACEnF,KAAKoF,OAAOxF,EAAQA,QAAQsF,KAAI/E,IAAA,IAAEjC,GAAEiC,EAAA,OAAKjC,CAAC,KAD5CiH,EAEEnF,KAAKqF,OAAOzF,EAAQA,QAAQsF,KAAII,IAAA,IAAEpH,GAAEoH,EAAA,OAAKpH,CAAC,KAF5CiH,EAGEnF,KAAKoF,OAAOxF,EAAQA,QAAQsF,KAAIK,IAAA,IAAE,CAAEpH,GAAEoH,EAAA,OAAKpH,CAAC,KAH9CgH,EAIEnF,KAAKqF,OAAOzF,EAAQA,QAAQsF,KAAIM,IAAA,IAAE,CAAErH,GAAEqH,EAAA,OAAKrH,CAAC,KAKpD,MAAO,CACLwG,gBAAiB/E,EACjB4E,YAAaS,EACbR,gBANeU,EAAqBA,GAAsB,EAO1DT,gBANeS,EAAqBA,GAAsB,EAO3D,KAIEM,EAAUC,IAAed,EAAAA,EAAAA,UAAmB,CACjDe,KAAM1B,EACNlC,OAAQ,CACN7D,EAAGuG,EAAiBH,EAAc,EAClCnG,EAAGuG,EAAiBR,EAAc,GAEpCjC,WAAY,CAAEI,KAAM6B,EAAahC,KAAMoC,KAInCjE,GAAcM,EAAAA,EAAAA,QAAO8E,IAC3B5B,EAAAA,EAAAA,YAAU,KACRxD,EAAYgB,QAAUoE,CAAQ,GAC7B,CAACA,IAEJ,MAAM,KAAEE,EAAI,OAAE5D,EAAM,WAAEE,GAAewD,EAC/BG,EAAW3D,EAAWI,KACtBwD,EAAW5D,EAAWC,MAG5B2B,EAAAA,EAAAA,YAAU,KACR,MAAMiC,EAAeA,KACnB,MAAMjE,EAAkBxB,EAAYgB,QACpCqE,GAAWK,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRlE,GAAe,IAClBI,WAAY,CACVI,KAAMrC,KAAKmE,KACTC,OAAOC,aAAeJ,EAAsBpC,EAAgB8D,OAE9DzD,KAAMlC,KAAKmE,KACTC,OAAOG,YAAcN,EAAsBpC,EAAgB8D,UAG/D,EAIJ,OADAvB,OAAO4B,iBAAiB,SAAUF,GAC3B,IAAM1B,OAAO6B,oBAAoB,SAAUH,EAAa,GAC9D,IAGH,MAAOI,EAAY3F,IAAiBqE,EAAAA,EAAAA,UAAiB,IAG9CuB,EAAW3F,IAAgBoE,EAAAA,EAAAA,UAAiB,GAC7CwB,GAAezF,EAAAA,EAAAA,QAAe,IAGpCkD,EAAAA,EAAAA,YAAU,KACRuC,EAAa/E,QAAU8E,CAAS,GAC/B,CAACA,IAGJ,MAAOE,EAAYC,IAAiB1B,EAAAA,EAAAA,WAAkB,IAC/C2B,EAAcC,IAAmB5B,EAAAA,EAAAA,WAAkB,IAGnD6B,EAAcC,IAAmB9B,EAAAA,EAAAA,WAAkB,IAGnD+B,EAAgBC,IACrBhC,EAAAA,EAAAA,UAAwCD,GAGpCkC,GAAgBlG,EAAAA,EAAAA,QAAoB,IAAI+B,IAAI8B,IAC5CsC,GAAiBnG,EAAAA,EAAAA,QAAiC,CACtDzC,EAAGuG,EAAiBH,EAAc,EAClCnG,EAAGuG,EAAiBR,EAAc,IAE9B6C,GAAoBpG,EAAAA,EAAAA,QAAe,IAGlCqG,EAAcC,IAAmBrC,EAAAA,EAAAA,WAAkB,IAGnDsC,EAAUC,IAAevC,EAAAA,EAAAA,WAAkB,GAC5CwC,IAA0BzG,EAAAA,EAAAA,SAAgB,IAGzC0G,GAAkBC,KAAuB1C,EAAAA,EAAAA,UAAiBR,OAAOG,YAClEgD,GAAWF,IAAoB,KAGrCxD,EAAAA,EAAAA,YAAU,KACR,MAAM2D,EAAwBA,KAC5BF,GAAoBlD,OAAOG,WAAW,EAGxC,OADAH,OAAO4B,iBAAiB,SAAUwB,GAC3B,IAAMpD,OAAO6B,oBAAoB,SAAUuB,EAAsB,GACvE,KAGH3D,EAAAA,EAAAA,YAAU,KACR,MAAM4D,EAAyBA,KAC7BR,IAAkBS,SAASC,kBAAkB,EAI/C,OADAD,SAAS1B,iBAAiB,mBAAoByB,GACvC,IACLC,SAASzB,oBAAoB,mBAAoBwB,EAAuB,GACzE,KAGH5D,EAAAA,EAAAA,YAAU,KACR,MAAM+D,EAAmBC,IACT,WAAVA,EAAEC,KAAoBZ,IACxBW,EAAEE,iBACFF,EAAEG,kBACFH,EAAEI,2BACFd,GAAY,GACd,EAGF,GAAID,EAEF,OADAQ,SAAS1B,iBAAiB,UAAW4B,EAAiB,CAAEM,SAAS,IAC1D,IAAMR,SAASzB,oBAAoB,UAAW2B,EAAiB,CAAEM,SAAS,GACnF,GACC,CAAChB,IAEJ,MAAMiB,IAAmBnH,EAAAA,EAAAA,cAAY,KAC9B0G,SAASC,kBAKZD,SAASU,iBAJTV,SAASW,gBAAgBC,oBAAoBC,OAAOC,IAClD/E,QAAQgF,MAAM,yCAA0CD,EAAI,GAIhE,GACC,KAGH3E,EAAAA,EAAAA,YAAU,KAER,MAAM6E,EAAYC,YAAW,KAC3BnC,GAAgB,EAAK,GACpB,KAGGoC,EAAcD,YAAW,KAC7BrC,GAAc,EAAM,GACnB,KAEH,MAAO,KACLuC,aAAaH,GACbG,aAAaD,EAAY,CAC1B,GACA,IAKH,MAAMxI,IAAeO,EAAAA,EAAAA,QAAoB6D,IAClCsE,GAASrI,KAAcmE,EAAAA,EAAAA,WAAkB,IAK1C,WAAElE,GAAU,kBAAEE,GAAiB,gBAAEC,GAAe,QAAEE,IACtDb,EAAa,CACXE,gBACAC,cACAC,cACAC,gBACAC,eACAC,gBAMEsI,IAAa/H,EAAAA,EAAAA,cAAY,CAAC9C,EAAWC,KACzC,GAAI6K,GAAc3H,QAAS,OAE3B,MAAMtB,EAAIF,EAAQ3B,EAAGC,GACfkF,EAAMjD,GAAaiB,QACzBgC,EAAIP,IAAI/C,GAAKsD,EAAI4F,OAAOlJ,GAAKsD,EAAIN,IAAIhD,GAErCQ,GAAemB,GAAMA,EAAI,GAAE,GAE1B,IAEGwH,IAAclI,EAAAA,EAAAA,cACjBpB,IAECc,GAAWW,SAAU,EACrBZ,IAAW,GACuB,OAA9BG,GAAkBS,UACpByC,qBAAqBlD,GAAkBS,SACvCT,GAAkBS,QAAU,MAI9Bb,EAAa,GAGb,MAAM2I,EAAUvJ,EACZ,IAAI8C,IAAY9C,EAAQA,QAAQsF,KAAIkE,IAAA,IAAElL,EAAGC,GAAEiL,EAAA,OAAKvJ,EAAQ3B,EAAGC,EAAE,KAC7D,IAAIuE,IAGRtC,GAAaiB,QAAU8H,EAGvB,MAAMtH,EAAkBxB,EAAYgB,QACpC,IAAIgI,EAAYxH,EAAgBE,OAEhC,GAAInC,EAAS,CACX,MAAMuF,EAAgB,CACpBrD,KAAM9B,KAAKoF,OAAOxF,EAAQA,QAAQsF,KAAIoE,IAAA,IAAEpL,GAAEoL,EAAA,OAAKpL,CAAC,KAChD8D,KAAMhC,KAAKqF,OAAOzF,EAAQA,QAAQsF,KAAIqE,IAAA,IAAErL,GAAEqL,EAAA,OAAKrL,CAAC,KAChDiE,KAAMnC,KAAKoF,OAAOxF,EAAQA,QAAQsF,KAAIsE,IAAA,IAAE,CAAErL,GAAEqL,EAAA,OAAKrL,CAAC,KAClDiE,KAAMpC,KAAKqF,OAAOzF,EAAQA,QAAQsF,KAAIuE,IAAA,IAAE,CAAEtL,GAAEsL,EAAA,OAAKtL,CAAC,MAE9CuL,GAAWvE,EAAcrD,KAAOqD,EAAcnD,MAAQ,EACtD2H,GAAWxE,EAAchD,KAAOgD,EAAc/C,MAAQ,EAE5DiH,EAAY,CACVnL,EAAGwL,EAAU7H,EAAgBI,WAAWC,KAAO,EAC/C/D,EAAGwL,EAAU9H,EAAgBI,WAAWI,KAAO,GAGjDqD,GAAWK,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRlE,GAAe,IAClBE,OAAQsH,IAEZ,CAGAxC,EAAcxF,QAAU,IAAIqB,IAAIyG,GAChCrC,EAAezF,QAAUgI,EACzBtC,EAAkB1F,QAAU,EAE5Bd,GAAemB,GAAMA,EAAI,GAAE,GAE7B,CAAChB,GAAYE,GAAmBP,IAG5BuJ,IAAa5I,EAAAA,EAAAA,cAAY,KAE7BN,GAAWW,SAAU,EACrBZ,IAAW,GACuB,OAA9BG,GAAkBS,UACpByC,qBAAqBlD,GAAkBS,SACvCT,GAAkBS,QAAU,MAI9Bb,EAAauG,EAAkB1F,SAG/BjB,GAAaiB,QAAU,IAAIqB,IAAImE,EAAcxF,SAG7C,MAAMQ,EAAkBxB,EAAYgB,QACpCqE,GAAWK,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRlE,GAAe,IAClBE,OAAQ+E,EAAezF,WAGzBd,GAAemB,GAAMA,EAAI,IAGzBgF,GAAgB,GAChBiC,YAAW,KACTjC,GAAgB,EAAM,GACrB,IAAI,GACN,CAAChG,GAAYE,GAAmBP,IAE7BwJ,IAAgB7I,EAAAA,EAAAA,cAAY,KAChC,MAAM8I,GAAcpJ,GAAWW,QAC/BX,GAAWW,QAAUyI,EACrBrJ,GAAWqJ,GAEPA,GAEFjD,EAAcxF,QAAU,IAAIqB,IAAItC,GAAaiB,SAC7CyF,EAAezF,QAAUhB,EAAYgB,QAAQU,OAC7CgF,EAAkB1F,QAAU+E,EAAa/E,QAEzCR,GAAgBQ,QAAUF,YAAYC,MACtCL,OAEkC,OAA9BH,GAAkBS,UACpByC,qBAAqBlD,GAAkBS,SACvCT,GAAkBS,QAAU,MAE9Bd,GAAemB,GAAMA,EAAI,IAC3B,GACC,CACDX,GACAL,GACAE,GACAC,GACAR,EACA+F,KAMI,cAAE4C,GAAa,WAAEe,GAAU,cAAEC,ICjW9B,SAAwB/L,GAKL,IALM,YAC9BoC,EAAW,YACXqF,EAAW,cACXmE,EAAa,iBACb1B,GACqBlK,EACrB,MAAM+K,GAAgBrI,EAAAA,EAAAA,SAAO,IACtBoJ,EAAYE,IAAiBrF,EAAAA,EAAAA,WAAS,IACtCoF,EAAeE,IAAoBtF,EAAAA,EAAAA,WAAS,GAuUnD,OApUAf,EAAAA,EAAAA,YAAU,KACR,MACMsG,EAAWtC,IACf,OAAQA,EAAEC,KACR,IAAK,YACHpC,GAAa0E,IAACrE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACTqE,GAAC,IACJrI,QAAMgE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOqE,EAAErI,QAAM,IAAE5D,EAAGiM,EAAErI,OAAO5D,EANnB,QAQlB,MACF,IAAK,UACHuH,GAAa0E,IAACrE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACTqE,GAAC,IACJrI,QAAMgE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOqE,EAAErI,QAAM,IAAE5D,EAAGiM,EAAErI,OAAO5D,EAZnB,QAclB,MACF,IAAK,aACHuH,GAAa0E,IAACrE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACTqE,GAAC,IACJrI,QAAMgE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOqE,EAAErI,QAAM,IAAE7D,EAAGkM,EAAErI,OAAO7D,EAlBnB,QAoBlB,MACF,IAAK,YACHwH,GAAa0E,IAACrE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACTqE,GAAC,IACJrI,QAAMgE,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOqE,EAAErI,QAAM,IAAE7D,EAAGkM,EAAErI,OAAO7D,EAxBnB,QA0BlB,MACF,IAAK,QACL,IAAK,IACH2J,EAAEE,iBACF8B,IACA,MACF,IAAK,IACL,IAAK,IACHhC,EAAEE,iBACFI,IAEJ,EAGF,OADA/D,OAAO4B,iBAAiB,UAAWmE,GAC5B,IAAM/F,OAAO6B,oBAAoB,UAAWkE,EAAQ,GAC1D,CAACN,EAAe1B,EAAkBzC,KAGrC7B,EAAAA,EAAAA,YAAU,KACR,MAAMsG,EAAWtC,IACfA,EAAEE,iBACF,MACMsC,EADQxC,EAAEyC,cACGC,wBAGbC,GAAe3C,EAAE4C,QAAUJ,EAAKK,MAAQL,EAAKM,MAC7CC,GAAe/C,EAAEgD,QAAUR,EAAKS,KAAOT,EAAKU,OAE5ClJ,EAAkBxB,EAAYgB,QAG9B2J,EAAYnD,EAAEoD,OAAS,EAAItN,GAAoBA,EAC/CuN,EAAUlL,KAAKqF,IACnBnI,EACA8C,KAAKoF,IAAIjI,EAAU0E,EAAgB8D,KAAOqF,IAItCG,EAAUnL,KAAKmE,KAAKC,OAAOC,aAAepH,EAAYiO,IACtDE,EAAUpL,KAAKmE,KAAKC,OAAOG,YAActH,EAAYiO,IAGrD7B,EAAY,CAChBnL,EACE2D,EAAgBE,OAAO7D,EACvBsM,GAAeY,EAAUvJ,EAAgBI,WAAWC,MACtD/D,EACE0D,EAAgBE,OAAO5D,EACvByM,GAAeO,EAAUtJ,EAAgBI,WAAWI,OAIxDqD,EAAY,CACVC,KAAMuF,EACNnJ,OAAQsH,EACRpH,WAAY,CAAEI,KAAM8I,EAASjJ,KAAMkJ,IACnC,EAEEC,EAAQ3D,SAAS4D,cAAc,cACrC,GAAID,EAAO,CACT,MAAME,EAAepB,EAErB,OADAkB,EAAMrF,iBAAiB,QAASuF,EAAc,CAAEC,SAAS,IAClD,IAAMH,EAAMpF,oBAAoB,QAASsF,EAClD,CACM,GACL,CAAClL,EAAaqF,KAGjB7B,EAAAA,EAAAA,YAAU,KACR,IAAI4H,GAAc,EACdC,GAAa,EACbC,EAAS,EACTC,EAAS,EACTC,EAAQ,EACRC,EAAQ,EAEZ,MAAMC,EAAmBlE,IAClBA,EAAEmE,OAAuBC,QAAQ,mBAEtCR,GAAc,EACdC,GAAa,EACbxB,GAAiB,GACjByB,EAAS9D,EAAE4C,QACXmB,EAAS/D,EAAEgD,QACXgB,EAAQhE,EAAE4C,QACVqB,EAAQjE,EAAEgD,QAAO,EAGbqB,EAAmBrE,IACvB,IAAK4D,EAAa,OAElB,MAAMtI,EAAK0E,EAAE4C,QAAUoB,EACjB3I,EAAK2E,EAAEgD,QAAUiB,EAEjBK,EAAUnM,KAAKoM,IAAIvE,EAAE4C,QAAUkB,GAC/BU,EAAUrM,KAAKoM,IAAIvE,EAAEgD,QAAUe,GAWrC,IARGF,IACAS,EAAU/O,GAAqBiP,EAAUjP,KAE1CsO,GAAa,EACb1C,EAAc3H,SAAU,EACxB4I,GAAc,IAGZyB,EAAY,CACd,MAAM7J,EAAkBxB,EAAYgB,QAC9BgK,EAAQ3D,SAAS4D,cAAc,cAC/BjB,EAAY,OAALgB,QAAK,IAALA,OAAK,EAALA,EAAOd,wBACpB,IAAKF,EAAM,OAEX,MAAMiC,EAAUnJ,EAAKkH,EAAKM,MAAS9I,EAAgBI,WAAWC,KACxDqK,EAAUrJ,EAAKmH,EAAKU,OAAUlJ,EAAgBI,WAAWI,KAE/DqD,GAAa8G,IAAIzG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACZyG,GAAI,IACPzK,OAAQ,CACN7D,EAAGsO,EAAKzK,OAAO7D,EAAIoO,EACnBnO,EAAGqO,EAAKzK,OAAO5D,EAAIoO,MAGzB,CAEAV,EAAQhE,EAAE4C,QACVqB,EAAQjE,EAAEgD,OAAO,EAGb4B,EAAgBA,KAChBf,GACFzB,GAAc,GAEhBwB,GAAc,EACdC,GAAa,EACbxB,GAAiB,GACjBvB,YAAW,KACTK,EAAc3H,SAAU,CAAK,GAC5B,EAAE,EAGDqL,EAAmBA,KACnBjB,IACFA,GAAc,EACdC,GAAa,EACbxB,GAAiB,GACjBD,GAAc,GACdjB,EAAc3H,SAAU,EAC1B,EAQF,OALA+C,OAAO4B,iBAAiB,YAAa+F,GACrC3H,OAAO4B,iBAAiB,YAAakG,GACrC9H,OAAO4B,iBAAiB,UAAWyG,GACnCrI,OAAO4B,iBAAiB,aAAc0G,GAE/B,KACLtI,OAAO6B,oBAAoB,YAAa8F,GACxC3H,OAAO6B,oBAAoB,YAAaiG,GACxC9H,OAAO6B,oBAAoB,UAAWwG,GACtCrI,OAAO6B,oBAAoB,aAAcyG,EAAiB,CAC3D,GACA,CAACrM,EAAaqF,KAGjB7B,EAAAA,EAAAA,YAAU,KACR,IAAI8I,EAAkB,EAClBC,GAAa,EACblB,GAAa,EACbC,EAAS,EACTC,EAAS,EACTC,EAAQ,EACRC,EAAQ,EAEZ,MAAMe,EAAoBhF,IACxB,GAAyB,IAArBA,EAAEiF,QAAQ3N,OAAc,CAC1ByN,GAAa,EACblB,GAAa,EACb,MAAMvI,EAAK0E,EAAEiF,QAAQ,GAAGrC,QAAU5C,EAAEiF,QAAQ,GAAGrC,QACzCvH,EAAK2E,EAAEiF,QAAQ,GAAGjC,QAAUhD,EAAEiF,QAAQ,GAAGjC,QAC/C8B,EAAkB3M,KAAK+M,KAAK5J,EAAKA,EAAKD,EAAKA,EAC7C,MAAgC,IAArB2E,EAAEiF,QAAQ3N,SACnByN,GAAa,EACblB,GAAa,EACbC,EAAS9D,EAAEiF,QAAQ,GAAGrC,QACtBmB,EAAS/D,EAAEiF,QAAQ,GAAGjC,QACtBgB,EAAQhE,EAAEiF,QAAQ,GAAGrC,QACrBqB,EAAQjE,EAAEiF,QAAQ,GAAGjC,QACvB,EAGImC,EAAmBnF,IACvB,GAAyB,IAArBA,EAAEiF,QAAQ3N,OAAc,CAC1B0I,EAAEE,iBACF6E,GAAa,EACblB,GAAa,EACb,MACMrB,EADQxC,EAAEyC,cACGC,wBAEbb,GAAW7B,EAAEiF,QAAQ,GAAGrC,QAAU5C,EAAEiF,QAAQ,GAAGrC,SAAW,EAC1Dd,GAAW9B,EAAEiF,QAAQ,GAAGjC,QAAUhD,EAAEiF,QAAQ,GAAGjC,SAAW,EAC1DoC,GAAgBvD,EAAUW,EAAKK,MAAQL,EAAKM,MAC5CuC,GAAgBvD,EAAUU,EAAKS,KAAOT,EAAKU,OAE3ClJ,EAAkBxB,EAAYgB,QAE9B8B,EAAK0E,EAAEiF,QAAQ,GAAGrC,QAAU5C,EAAEiF,QAAQ,GAAGrC,QACzCvH,EAAK2E,EAAEiF,QAAQ,GAAGjC,QAAUhD,EAAEiF,QAAQ,GAAGjC,QAKzCsC,EAAQ,GAJUnN,KAAK+M,KAAK5J,EAAKA,EAAKD,EAAKA,GAGdyJ,EACL,GAAK/O,EAC7BsN,EAAUlL,KAAKqF,IACnBnI,EACA8C,KAAKoF,IAAIjI,EAAU0E,EAAgB8D,KAAOwH,IAGtChC,EAAUnL,KAAKmE,KAAKC,OAAOC,aAAepH,EAAYiO,IACtDE,EAAUpL,KAAKmE,KAAKC,OAAOG,YAActH,EAAYiO,IAErD7B,EAAY,CAChBnL,EACE2D,EAAgBE,OAAO7D,EACvB+O,GAAgB7B,EAAUvJ,EAAgBI,WAAWC,MACvD/D,EACE0D,EAAgBE,OAAO5D,EACvB+O,GAAgB/B,EAAUtJ,EAAgBI,WAAWI,OAIzDqD,EAAY,CACVC,KAAMuF,EACNnJ,OAAQsH,EACRpH,WAAY,CAAEI,KAAM8I,EAASjJ,KAAMkJ,IAEvC,MAAO,GAAyB,IAArBvD,EAAEiF,QAAQ3N,QAAgByN,EAAY,CAC/C,MAAMzJ,EAAK0E,EAAEiF,QAAQ,GAAGrC,QAAUoB,EAC5B3I,EAAK2E,EAAEiF,QAAQ,GAAGjC,QAAUiB,EAE5BK,EAAUnM,KAAKoM,IAAIvE,EAAEiF,QAAQ,GAAGrC,QAAUkB,GAC1CU,EAAUrM,KAAKoM,IAAIvE,EAAEiF,QAAQ,GAAGjC,QAAUe,GAUhD,IAPGF,IACAS,EAAU/O,GAAqBiP,EAAUjP,KAE1CsO,GAAa,EACbzB,GAAc,IAGZyB,EAAY,CACd7D,EAAEE,iBACF,MAAMlG,EAAkBxB,EAAYgB,QAC9BgK,EAAQ3D,SAAS4D,cAAc,cAC/BjB,EAAY,OAALgB,QAAK,IAALA,OAAK,EAALA,EAAOd,wBACpB,IAAKF,EAAM,OAEX,MAAMiC,EAAUnJ,EAAKkH,EAAKM,MAAS9I,EAAgBI,WAAWC,KACxDqK,EAAUrJ,EAAKmH,EAAKU,OAAUlJ,EAAgBI,WAAWI,KAE/DqD,GAAa8G,IAAIzG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACZyG,GAAI,IACPzK,OAAQ,CACN7D,EAAGsO,EAAKzK,OAAO7D,EAAIoO,EACnBnO,EAAGqO,EAAKzK,OAAO5D,EAAIoO,MAGzB,CAEAV,EAAQhE,EAAEiF,QAAQ,GAAGrC,QACrBqB,EAAQjE,EAAEiF,QAAQ,GAAGjC,OACvB,GAGIuC,EAAiBA,KACrBR,GAAa,EACb3C,GAAc,EAAM,EAGhBoB,EAAQ3D,SAAS4D,cAAc,cACrC,GAAID,EAAO,CACT,MAAMgC,EAAeR,EACfS,EAAcN,EACdO,EAAaH,EAMnB,OAJA/B,EAAMrF,iBAAiB,aAAcqH,GACrChC,EAAMrF,iBAAiB,YAAasH,EAAa,CAAE9B,SAAS,IAC5DH,EAAMrF,iBAAiB,WAAYuH,GAE5B,KACLlC,EAAMpF,oBAAoB,aAAcoH,GACxChC,EAAMpF,oBAAoB,YAAaqH,GACvCjC,EAAMpF,oBAAoB,WAAYsH,EAAW,CAErD,IACC,CAAClN,EAAaqF,IAEV,CACLsD,gBACAe,aACAC,gBAEJ,CDauDwD,CAAgB,CACnEnN,cACAqF,cACAmE,iBACA1B,uBAOFtE,EAAAA,EAAAA,YAAU,KACJqD,GAEFE,GAAwB/F,QAAUX,GAAWW,QACzCX,GAAWW,UACbX,GAAWW,SAAU,EACrBZ,IAAW,GACuB,OAA9BG,GAAkBS,UACpByC,qBAAqBlD,GAAkBS,SACvCT,GAAkBS,QAAU,QAGvB+F,GAAwB/F,UAEjCX,GAAWW,SAAU,EACrBZ,IAAW,GACXI,GAAgBQ,QAAUF,YAAYC,MACtCL,KACF,GACC,CAACmG,EAAUxG,GAAYE,GAAmBC,GAAiBE,KAK9D,MAAM0M,GAAUzN,KAAKC,MAAM8B,EAAO7D,GAC5BwP,GAAU1N,KAAKC,MAAM8B,EAAO5D,GAE5BwP,GAAc5L,EAAO7D,EAAIuP,GACzBG,GAAc7L,EAAO5D,EAAIuP,GAGzBG,IAAmB7M,EAAAA,EAAAA,cACtB6G,IACC,MAAMmE,EAASnE,EAAEmE,OACjB,IAAKA,EAAO8B,UAAUC,SAAS,kBAAmB,OAElD,MAAM7P,EAAI8N,EAAOgC,aAAa,eACxB7P,EAAI6N,EAAOgC,aAAa,eAC1B9P,GAAKC,GACP4K,GAAWkF,OAAO/P,GAAI+P,OAAO9P,GAC/B,GAEF,CAAC4K,KAMG1G,IAAO6L,EAAAA,EAAAA,UAAQ,KACnB,MAAMC,EAAyB,GAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIxI,EAAW3B,EAAsBmK,IAAK,CACxD,MAAMC,EAAwB,GAC9B,IAAK,IAAIC,EAAI,EAAGA,EAAIzI,EAAW5B,EAAsBqK,IAAK,CACxD,MAAMC,EAAQD,EAAIb,GACZe,EAAQJ,EAAIV,GACZtP,EAASgC,GAAaiB,QAAQyB,IAAIjD,EAAQ0O,EAAOC,IAEvDH,EAAMjP,MACJf,EAAAA,EAAAA,KAACN,EAAI,CAEHG,EAAGqQ,EACHpQ,EAAGqQ,EACHpQ,OAAQA,GAAO,QAAAG,OAHFgQ,EAAK,KAAAhQ,OAAIiQ,IAM5B,CACAL,EAAO/O,MACLf,EAAAA,EAAAA,KAAA,OAAgCC,UAAU,gBAAemQ,SACtDJ,GAAK,OAAA9P,OADS6P,EAAIV,KAIzB,CACA,OAAOS,CAAM,GAEZ,CAACV,GAASC,GAAS9H,EAAUC,EAAUK,IAQ1C,OAAIqB,IACKlJ,EAAAA,EAAAA,KAACqQ,EAAAA,QAAG,KAIXC,EAAAA,EAAAA,MAAA,OAAKC,GAAG,eAAetQ,UAAU,gBAAemQ,SAAA,CAE7CpI,IACChI,EAAAA,EAAAA,KAAA,OAAKC,UAAS,aAAAC,OAAegI,EAAe,UAAY,IAAKkI,UAC3DE,EAAAA,EAAAA,MAAA,OAAKrQ,UAAU,kBAAiBmQ,SAAA,CAAC,YAE/BpQ,EAAAA,EAAAA,KAAA,SAAM,qBAOZA,EAAAA,EAAAA,KAAA,OACEC,UAAS,YAAAC,OACPyL,KAAkBD,GAAa,cAAgB,IAAExL,OAChDwL,GAAa,YAAc,IAAExL,OAAGuK,GAAU,WAAa,IAAEvK,OAC1DoH,GAAQ,EAAI,aAAe,IAE7BnH,MACE,CACE,SAAUoH,EACV,SAAUC,EACV,SAAUF,GAEb8I,UAEDpQ,EAAAA,EAAAA,KAAA,OACEC,UAAU,oBACVuQ,QAAShB,GACTrP,MAAO,CACLsQ,UAAU,aAADvQ,OAA+B,IAAMsH,GAArB8H,GAA8B,OAAApP,OACrC,IAAMqH,GAArBgI,GAA8B,OAEjCa,SAEDpM,QAKLsM,EAAAA,EAAAA,MAAA,SAAOrQ,UAAU,eAAcmQ,SAAA,EAE7BpQ,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBmQ,UAChCE,EAAAA,EAAAA,MAAA,SAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,OAAAoQ,SAAK,aACLE,EAAAA,EAAAA,MAAA,UACErQ,UAAU,qBACVyQ,MAA2B,QAAtB/K,EAAgB,OAAd2C,QAAc,IAAdA,OAAc,EAAdA,EAAgBhH,YAAI,IAAAqE,EAAAA,EAAI,QAC/BgL,SAAWnH,IACT,MAAMkH,EAAQlH,EAAEmE,OAAO+C,MACvB,GAAc,UAAVA,EACFnI,EAAkB,MAClBsC,GAAY,UACP,CACL,MAAMtJ,EAAUoF,EAAkBiK,MAC/BC,GAAMA,EAAEvP,OAASoP,IAEhBnP,IACFgH,EAAkBhH,GAClBsJ,GAAYtJ,GAEhB,GACA6O,SAAA,EAEFpQ,EAAAA,EAAAA,KAAA,UAAQ0Q,MAAM,QAAON,SAAC,UACrBzJ,EAAkBE,KAAKtF,IACtBvB,EAAAA,EAAAA,KAAA,UAA2B0Q,MAAOnP,EAAQD,KAAK8O,SAC5C7O,EAAQD,MADEC,EAAQD,iBAS7BtB,EAAAA,EAAAA,KAAA,OACEC,UAAS,mBAAAC,OAAqBuK,GAAU,WAAa,IACrD+F,QAAShF,GAAc4E,SAEtB3F,GAAU,SAAM,YAEnBzK,EAAAA,EAAAA,KAAA,OACEC,UAAS,mBAAAC,OAAqBkI,EAAe,YAAc,IAC3DoI,QAASjF,GAAW6E,SACrB,YAKDpQ,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBmQ,UAChCE,EAAAA,EAAAA,MAAA,SAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,OAAAoQ,SAAK,oBACLpQ,EAAAA,EAAAA,KAAA,SACE8Q,KAAK,SACL/J,IAAK,EACLC,IAAKpB,EACLmL,KAAM,EACNL,OA1GQ3E,GA0GU9J,EAAYe,QA1GgB,IAAN+I,GAAU,GAAKA,IA2GvD4E,SAAWnH,IACT,MAAMwH,EAAMxH,EAAEmE,OAAO+C,MACrB,GAAY,KAARM,EACF/O,EAAYe,QAAU,MACjB,CACL,MAAMiO,EAAItP,KAAKqF,IACb,EACArF,KAAKoF,IAAInB,EAA4BgK,OAAOoB,KAE9C/O,EAAYe,QAAUiO,CACxB,CACA/O,GAAemB,GAAMA,EAAI,GAAE,aAUrCrD,EAAAA,EAAAA,KAAA,OACEC,UAAU,kBACVuQ,QAASA,IAAM1H,GAAY,GAC3BoI,MAAM,QAAOd,SACd,WAKAvH,IACC7I,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAmBuQ,QAASA,IAAM1H,GAAY,GAAOsH,UAClEE,EAAAA,EAAAA,MAAA,OAAKrQ,UAAU,iBAAiBuQ,QAAUhH,GAAMA,EAAEG,kBAAkByG,SAAA,EAClEpQ,EAAAA,EAAAA,KAAA,UACEC,UAAU,iBACVuQ,QAASA,IAAM1H,GAAY,GAC3BoI,MAAM,cAAad,SACpB,YAGDpQ,EAAAA,EAAAA,KAAA,MAAAoQ,SAAI,2BACJE,EAAAA,EAAAA,MAAA,OAAKrQ,UAAU,mBAAkBmQ,SAAA,EAC/BpQ,EAAAA,EAAAA,KAAA,KAAAoQ,SAAG,wFAIHE,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEE,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,UAAAoQ,SAAQ,qBAAyB,yDAGnCE,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,UAAAoQ,SAAQ,cAAkB,uDAG5BE,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,UAAAoQ,SAAQ,kBAAsB,+DAGhCE,EAAAA,EAAAA,MAAA,MAAAF,SAAA,EACEpQ,EAAAA,EAAAA,KAAA,UAAAoQ,SAAQ,oBAAwB,2DAIpCE,EAAAA,EAAAA,MAAA,KAAGrQ,UAAU,oBAAmBmQ,SAAA,EAC9BpQ,EAAAA,EAAAA,KAAA,UAAAoQ,SAAQ,eACRpQ,EAAAA,EAAAA,KAAA,SAAM,8HAUhBA,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mBAAkBmQ,SAAEtI,KAGnC9H,EAAAA,EAAAA,KAAA,OACEC,UAAU,wBACVuQ,QAAS1G,GACToH,MAAOvI,EAAe,sBAAwB,iBAAiByH,UAE/DE,EAAAA,EAAAA,MAAA,OACEnQ,MAAO,CACLgR,QAAS,OACTC,cAAe,SACfC,WAAW,GAADnR,OAAKyI,EAAe,EAAI,IAClC2I,SAAU,UACVlB,SAAA,EAEFpQ,EAAAA,EAAAA,KAAA,OAAAoQ,SAAMzH,EAAe,eAAO,kBAC5B3I,EAAAA,EAAAA,KAAA,OAAAoQ,SAAMzH,EAAe,eAAO,yBAxMhBoD,MA6MtB,C,6DExpBgBwF,OAAOC,eACND,OAAOE,iBACAF,OAAOG,0BACLH,OAAOI,sBACdJ,OAAOK,UAAUC,eACjBN,OAAOK,UAAUE,qBA6BpC,SAASC,EAAkBC,GACzB,MAAQ1F,MAAO2F,GAhBjB,WACE,MAAMC,EAAUA,KAAA,CACd5F,MAAOvG,OAAOG,WACdwG,OAAQ3G,OAAOC,eAEVmM,EAAYC,GAAiBC,EAAAA,SAAeH,GAMnD,OALAG,EAAAA,iBAAsB,KACpB,MAAMC,EAAWA,IAAMF,EAAcF,GAErC,OADAnM,OAAO4B,iBAAiB,SAAU2K,GAC3B,IAAMvM,OAAO6B,oBAAoB,SAAU0K,EAAS,GAC1D,IACIH,CACT,CAIiCI,GACzBC,GAAelQ,EAAAA,EAAAA,QAAO,CAC1BmQ,iBAAkB,EAClBC,gBAAiB,EACjBC,eAAgB,EAChBC,YAAa,EACbC,iBAAiB,EACjBC,iBAAiB,EACjBC,UAAWpR,KAAK8E,SAAWwL,EAC3Be,UAAWrR,KAAK8E,SAAWwL,IAEvBgB,GAAa3Q,EAAAA,EAAAA,QAAO,MACpB4Q,GAAe5Q,EAAAA,EAAAA,QAAO,OACrBsQ,EAAaO,IAAkB5M,EAAAA,EAAAA,UAAS,IACxC6M,EAASC,IAAc9M,EAAAA,EAAAA,WAAS,GACvC,SAAS+M,EAAeC,EAAeC,EAAOC,EAAaC,EAASC,GAClE,MAAMC,EAAiBL,EAAgBE,EACvC,IAAII,EAASH,GAAWlB,EAAaxP,QAAQ2Q,GAAgBH,GAASA,GAOtE,OANIK,GAAU,GAAKA,GAAUD,KAC3BpB,EAAaxP,QAAQ2Q,IAAiBnB,EAAaxP,QAAQ2Q,GAC3DnB,EAAaxP,QAAQ4P,aAAe,EACpCO,EAAeX,EAAaxP,QAAQ4P,aACpCiB,EAASA,GAAU,EAAI,EAAID,GAEtBC,CACT,CACA,SAASC,IACP,GAAIb,EAAWjQ,SAAWiQ,EAAWjQ,QAAQ+Q,cAAe,CAC1D,MAAMrB,EAAkBO,EAAWjQ,QAAQ+Q,cAAcC,aACnDrB,EAAiBM,EAAWjQ,QAAQ+Q,cAAcE,YAClDC,EAAgBjB,EAAWjQ,QAAQgR,aACnCG,EAAelB,EAAWjQ,QAAQiR,YAClCT,GAAoB,MAAXxB,OAAkB,EAASA,EAAQoC,QAAU,EACtDC,EAAOf,EACXX,EACAa,EACAW,EACA3B,EAAaxP,QAAQ+P,UACrB,mBAEIuB,EAAOhB,EACXZ,EACAc,EACAU,EACA1B,EAAaxP,QAAQgQ,UACrB,mBAEFC,EAAWjQ,QAAQ7C,MAAMsQ,UAAY,eAAHvQ,OAAkBmU,EAAI,QAAAnU,OAAOoU,EAAI,UACnE9B,EAAaxP,QAAQ+P,UAAYsB,EACjC7B,EAAaxP,QAAQgQ,UAAYsB,CACnC,CACA9B,EAAaxP,QAAQyP,iBAAmBxP,sBAAsB6Q,EAChE,CAiCA,OAhCAtO,EAAAA,EAAAA,YAAU,MACO,MAAXwM,OAAkB,EAASA,EAAQuC,iBACjCnB,IACF3N,qBAAqB+M,EAAaxP,QAAQyP,kBAC1CD,EAAaxP,QAAQyP,iBAAmB,GAErCW,GAAYZ,EAAaxP,QAAQyP,mBACpCD,EAAaxP,QAAQyP,iBAAmBxP,sBAAsB6Q,MAGnD,MAAX9B,OAAkB,EAASA,EAAQwC,gBACrCxC,EAAQwC,eACV,GACC,CAACpB,EAASpB,KACbyC,EAAAA,EAAAA,kBAAgB,KACd,MAAMC,EAAUzB,EAAWjQ,QACrB2R,EAAkBA,IAAMtB,GAAW,GACnCuB,EAAiBA,IAAMvB,GAAW,GAOxC,OANIqB,IACFA,EAAQvU,MAAM0U,WAAa,YAC3BH,EAAQ/M,iBAAiB,YAAagN,GACtCD,EAAQ/M,iBAAiB,WAAYiN,GACrCpC,EAAaxP,QAAQyP,iBAAmBxP,sBAAsB6Q,IAEzD,KACDY,IACFA,EAAQ9M,oBAAoB,YAAa+M,GACzCD,EAAQ9M,oBAAoB,WAAYgN,IAE1CnP,qBAAqB+M,EAAaxP,QAAQyP,iBAAiB,CAC5D,GACA,IACI,CACLS,eACAD,aACAG,UACAR,cAEJ,C,aC9HO,MAAMkC,EACXC,WAAAA,CAAYC,EAAKC,EAAOC,GACtBC,KAAKH,IAAMA,EACXG,KAAKF,MAAQA,EACbE,KAAKD,KAAOA,EACZC,KAAKC,IAAG,OAAAlV,OAAU8U,EAAG,MAAA9U,OAAK+U,EAAK,MAAA/U,OAAKgV,EAAI,IAC1C,EAGK,SAASG,EAAYC,GAC1B,MAAMN,EAAM,IAAMM,EAAMN,IAClBC,EAAQ,IAAMK,EAAML,MACpBC,EAAO,IAAMI,EAAMJ,KACzB,OAAO,IAAIJ,EAAME,EAAKC,EAAOC,EAC/B,CAEO,MAAMK,EAAiB,WAAqB,IAApBxO,EAAGlE,UAAA/B,OAAA,QAAAT,IAAAwC,UAAA,GAAAA,UAAA,GAAC,EAAGmE,EAAGnE,UAAA/B,OAAA,QAAAT,IAAAwC,UAAA,GAAAA,UAAA,GAAC,IACxC,MAAM2S,EAAYC,MAAMC,KAAK,CAAE5U,OAASkG,EAAMD,EAAO,IAAI,CAAC4O,EAAGC,IAAMA,EAAI7O,IACjEiO,GAAMa,EAAAA,EAAAA,GAAaL,GACnBP,GAAQY,EAAAA,EAAAA,GAAaL,GACrBN,GAAOW,EAAAA,EAAAA,GAAaL,GAC1B,OAAO,IAAIV,EAAME,EAAKC,EAAOC,EAC/B,E,aClBe,SAAS7E,IACtB,MAAOiF,EAAOQ,IAAYvP,EAAAA,EAAAA,UAASgP,MAC7B,aAAErC,EAAY,WAAED,EAAU,YAAEL,GAAgBb,EAAkB,CAACqC,MAAQrO,OAAOG,WAAa,IAAS,IACpG6P,GAAqBzT,EAAAA,EAAAA,QAAO,GAUlC,OARAkD,EAAAA,EAAAA,YAAU,KACR,MAAMzC,EAAMiT,KAAKjT,MACbA,EAAMgT,EAAmB/S,SAAW,MACtC8S,EAASP,KACTQ,EAAmB/S,QAAUD,EAC/B,GACC,CAAC6P,KAGA5S,EAAAA,EAAAA,KAAA,OACEiW,IAAK/C,EACL3C,GAAG,cACHpQ,MAAO,CACLmV,MAAOA,EAAMF,IACbhV,gBAAiBiV,EAAYC,GAAOF,KACpChF,UAEFpQ,EAAAA,EAAAA,KAAA,OAAKiW,IAAKhD,EAAY1C,GAAG,gBAAeH,SAAC,kBAKjD,C,yCCjCO,MAAMyF,EAAgBK,GAAQA,EAAIvU,KAAKC,MAAMD,KAAK8E,SAAWyP,EAAIpV,SAE3DqV,EAAUvW,IAAe,OAAVsW,GAAItW,EAC1BwW,EAAIF,EAAIpV,OACZ,KAAOsV,GAAG,CACR,MAAMR,EAAIjU,KAAKC,MAAMD,KAAK8E,SAAW2P,MACpCF,EAAIE,GAAIF,EAAIN,IAAM,CAACM,EAAIN,GAAIM,EAAIE,GAClC,CACA,OAAOF,CAAG,C","sources":["game_of_life/constants.ts","game_of_life/Cell.tsx","game_of_life/patterns.ts","game_of_life/utils.ts","game_of_life/useGameLogic.ts","game_of_life/GameOfLife.tsx","game_of_life/useInteractions.ts","../node_modules/react-dvd-screensaver/dist/index.js","util/Color.js","projects/Wip.js","util/Random.js"],"sourcesContent":["// General-purpose constants (no magic numbers)\nexport const DEFAULT_TICK_PER_SEC = 4;\nexport const MAX_TICK_PER_SEC = 15;\nexport const CELL_SIZE = 20; // px - fixed cell size\nexport const MIN_ZOOM = 0.3;\nexport const MAX_ZOOM = 4;\nexport const DRAG_THRESHOLD_PX = 5;\n\n// Memory management constants\nexport const MAX_LIVE_CELLS = 50000; // Maximum cells before pausing simulation\nexport const CULLING_MARGIN = 100; // Cells beyond viewport to keep\n\n// Key encoding constants - using offset encoding to handle negative coordinates\n// JavaScript numbers have 53 bits of integer precision, so we can safely use:\n// - 26 bits for x (range: -33M to +33M)\n// - 26 bits for y (range: -33M to +33M)\nexport const COORD_OFFSET = 33554432; // 2^25 - offset to ensure coordinates are always positive\nexport const KEY_MULTIPLIER = 67108864; // 2^26 - multiplier for x coordinate\n\n// Game of Life rules\nexport const LIFE_NEIGHBORS_BIRTH = 3;\n\n// Gold: #d9a60e\nexport const COLOR_GOLD = { r: 217, g: 166, b: 14 };\n\nexport const WHEEL_ZOOM_DELTA = 0.1;\nexport const PINCH_ZOOM_DAMPING = 0.5;\nexport const ZOOM_DEFAULT_LEVEL = 1;\nexport const EXTRA_ROWS = 1; // for rendering extra padding\n","import React, { memo } from \"react\";\nimport { COLOR_GOLD } from \"./constants.ts\";\n\n// Memoized cell component - only re-renders when filled state changes\nexport const Cell = memo(\n  ({ x, y, filled }: { x: number; y: number; filled: boolean }) => (\n    <div\n      data-cell-x={x}\n      data-cell-y={y}\n      className={`gol-board-cell${filled ? \" filled\" : \"\"}`}\n      style={\n        filled\n          ? {\n              backgroundColor: `rgb(${COLOR_GOLD.r}, ${COLOR_GOLD.g}, ${COLOR_GOLD.b})`,\n            }\n          : undefined\n      }\n    />\n  )\n);\nCell.displayName = \"Cell\";\n","/**\n * Conway's Game of Life - Starting Patterns\n *\n * Patterns are defined in ASCII art format for readability:\n * - '*' = live cell\n * - '.' or ' ' = dead cell\n *\n * Patterns are defined starting from (0, 0). The game will auto-center them.\n */\n\nexport type Pattern = [number, number][];\n\nexport interface PatternConfig {\n  name: string;\n  pattern: Pattern;\n}\n\n/**\n * Parse ASCII art pattern into coordinate array\n * @param art - ASCII art string where '*' = live, '.' = dead\n */\nfunction parsePattern(art: string): Pattern {\n  const lines = art.trim().split(\"\\n\");\n  const coords: Pattern = [];\n\n  // Parse each cell\n  lines.forEach((line, y) => {\n    for (let x = 0; x < line.length; x++) {\n      const char = line[x];\n      if (char === \"*\") {\n        coords.push([x, y]);\n      }\n    }\n  });\n\n  return coords;\n}\n\nconst TABLE: Pattern = parsePattern(`\n****\n*..*\n`);\n\nconst HOLLOW_SQUARES: Pattern = parsePattern(`\n***.***\n*.*.*.*\n***.***\n`);\n\nconst GLIDER_GUN: Pattern = parsePattern(`\n........................*...........\n......................*.*..........*\n............**......**............**\n...........*...*....**..............*\n**........*.....*...**..............*\n**........*...*.**....*.*..........*\n..........*.....*.......*...........\n...........*...*....................\n............**......................\n`);\n\nconst ONE_TWO_THREE: Pattern = parsePattern(`\n..**......\n*..*......\n**.*.**...\n.*.*..*...\n.*....*.**\n..***.*.**\n.....*....\n....*.....\n....**....\n`);\n\n// Evolves for 5,206 generations before stabilizing\nconst ACORN: Pattern = parsePattern(`\n.*.....\n...*...\n**..***.\n`);\n\n// Evolves for 1,103 generations\nconst R_PENTOMINO: Pattern = parsePattern(`\n.**\n**.\n.*.\n`);\n\n// Lightweight Spaceship - travels horizontally\nconst LWSS: Pattern = parsePattern(`\n*..*\n....*\n*...*\n.****\n`);\n\n// Period-15 oscillator\nconst PENTADECATHLON: Pattern = parsePattern(`\n.*.\n.*.\n*.*\n.*.\n.*.\n.*.\n.*.\n*.*\n.*.\n.*.\n`);\n\n// Methuselah - 17,331 generations before stabilizing\nconst RABBITS: Pattern = parsePattern(`\n..*....*\n**......\n.**.***.\n`);\n\n\n/**\n * All available starting patterns\n * Add new patterns here to include them in random selection\n */\nexport const PATTERNS: PatternConfig[] = [\n  {\n    name: \"hollow squares\",\n    pattern: HOLLOW_SQUARES,\n  },\n  {\n    name: \"gosper glider gun\",\n    pattern: GLIDER_GUN,\n  },\n  {\n    name: \"acorn\",\n    pattern: ACORN,\n  },\n  {\n    name: \"r-pentomino\",\n    pattern: R_PENTOMINO,\n  },\n  {\n    name: \"lightweight spaceship\",\n    pattern: LWSS,\n  },\n  {\n    name: \"pentadecathlon\",\n    pattern: PENTADECATHLON,\n  },\n  {\n    name: \"rabbits\",\n    pattern: RABBITS,\n  },\n  {\n    name: \"one two three\",\n    pattern: ONE_TWO_THREE,\n  },\n    {\n      name: \"table\",\n      pattern: TABLE,\n    },\n];\n\n/**\n * Select a random pattern from the available patterns\n */\nexport function getRandomPattern(): PatternConfig {\n  const randomIndex = Math.floor(Math.random() * PATTERNS.length);\n  const pattern = PATTERNS[randomIndex];\n  console.log(`Starting pattern: ${pattern.name}`);\n  return pattern;\n}\n","import { COORD_OFFSET, KEY_MULTIPLIER } from \"./constants.ts\";\n\n// helpers for Set keys - using offset encoding to correctly handle negative coordinates\nexport const makeKey = (x: number, y: number): number =>\n  (x + COORD_OFFSET) * KEY_MULTIPLIER + (y + COORD_OFFSET);\n\nexport const parseKey = (k: number): [number, number] => {\n  const x = Math.floor(k / KEY_MULTIPLIER) - COORD_OFFSET;\n  const y = (k % KEY_MULTIPLIER) - COORD_OFFSET;\n  return [x, y];\n};\n","import { useCallback, useEffect, useRef } from \"react\";\nimport {\n  MAX_LIVE_CELLS,\n  CULLING_MARGIN,\n  LIFE_NEIGHBORS_BIRTH,\n} from \"./constants.ts\";\nimport { makeKey, parseKey } from \"./utils.ts\";\nimport { type Viewport } from \"./types.ts\";\n\ninterface UseGameLogicProps {\n  liveCellsRef: React.MutableRefObject<Set<number>>;\n  viewportRef: React.MutableRefObject<Viewport>;\n  ticksPerSec: React.MutableRefObject<number>;\n  setGeneration: React.Dispatch<React.SetStateAction<number>>;\n  setTickCount: React.Dispatch<React.SetStateAction<number>>;\n  setRunning: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nfunction checkCellLimit(currentSize: number, runningRef: React.MutableRefObject<boolean>, animationFrameRef: React.MutableRefObject<number | null>, setGeneration: React.Dispatch<React.SetStateAction<number>>): boolean {\n  if (currentSize < MAX_LIVE_CELLS) return false;\n  runningRef.current = false;\n  animationFrameRef.current = null;\n  alert(\n    `Simulation paused: cell limit reached (${MAX_LIVE_CELLS} cells).`\n  );\n  setGeneration((g) => g + 1);\n  return true;\n}\n\nfunction computeViewportBounds(currentViewport: Viewport) {\n  const minX = Math.floor(currentViewport.offset.x) - CULLING_MARGIN;\n  const maxX = Math.floor(currentViewport.offset.x) + currentViewport.dimensions.cols + CULLING_MARGIN;\n  const minY = Math.floor(currentViewport.offset.y) - CULLING_MARGIN;\n  const maxY = Math.floor(currentViewport.offset.y) + currentViewport.dimensions.rows + CULLING_MARGIN;\n  return { minX, maxX, minY, maxY };\n}\n\nfunction countNeighbours(liveCells: Set<number>) {\n  const neighbourCounter = new Map<number, number>();\n  liveCells.forEach((cellKey) => {\n    const [x, y] = parseKey(cellKey);\n    for (let dy = -1; dy <= 1; dy++) {\n      for (let dx = -1; dx <= 1; dx++) {\n        if (dx === 0 && dy === 0) continue;\n        const neighKey = makeKey(x + dx, y + dy);\n        neighbourCounter.set(\n          neighKey,\n          (neighbourCounter.get(neighKey) || 0) + 1\n        );\n      }\n    }\n  });\n  return neighbourCounter;\n}\n\nfunction applyRules(\n  neighbourCounter: Map<number, number>,\n  liveCells: Set<number>,\n  { minX, maxX, minY, maxY }: { minX: number; maxX: number; minY: number; maxY: number; }\n) {\n  const nextGen = new Set<number>();\n  neighbourCounter.forEach((count, cellKey) => {\n    const alive = liveCells.has(cellKey);\n    if (\n      count === LIFE_NEIGHBORS_BIRTH ||\n      (alive && (count === 2 || count === 3))\n    ) {\n      const [x, y] = parseKey(cellKey);\n      if (x >= minX && x <= maxX && y >= minY && y <= maxY) {\n        nextGen.add(cellKey);\n      }\n    }\n  });\n  return nextGen;\n}\n\nfunction growthDetection(nextGenSize: number, currentSize: number, growthCountRef: React.MutableRefObject<number>) {\n  if (nextGenSize > currentSize * 1.5) {\n    growthCountRef.current++;\n    if (growthCountRef.current >= 10) {\n      console.warn(\n        `Exponential growth detected: ${currentSize} → ${nextGenSize} cells over 10 generations`\n      );\n      growthCountRef.current = 0;\n    }\n  } else {\n    growthCountRef.current = 0;\n  }\n}\n\nexport function useGameLogic({\n  liveCellsRef,\n  viewportRef,\n  ticksPerSec,\n  setGeneration,\n  setTickCount,\n  setRunning,\n}: UseGameLogicProps) {\n  const runningRef = useRef<boolean>(false);\n  const animationFrameRef = useRef<number | null>(null);\n  const lastTickTimeRef = useRef<number>(0);\n  const growthCountRef = useRef<number>(0);\n\n  const runTick = useCallback(\n    (timestamp: number = performance.now()) => {\n      if (!runningRef.current) {\n        animationFrameRef.current = null;\n        return;\n      }\n\n      const elapsed = timestamp - lastTickTimeRef.current;\n      const interval = 1_000 / ticksPerSec.current;\n\n      if (elapsed < interval) {\n        animationFrameRef.current = requestAnimationFrame(runTick);\n        return;\n      }\n\n      const currentSize = liveCellsRef.current.size;\n      if (checkCellLimit(currentSize, runningRef, animationFrameRef, setGeneration)) {\n        return;\n      }\n\n      const currentViewport = viewportRef.current;\n      const bounds = computeViewportBounds(currentViewport);\n\n      const neighbourCounter = countNeighbours(liveCellsRef.current);\n\n      const nextGen = applyRules(neighbourCounter, liveCellsRef.current, bounds);\n\n      if (nextGen.size === 0) {\n        runningRef.current = false;\n        setRunning(false);\n        animationFrameRef.current = null;\n        liveCellsRef.current = nextGen;\n        setGeneration((g) => g + 1);\n        return;\n      }\n\n      growthDetection(nextGen.size, currentSize, growthCountRef);\n\n      liveCellsRef.current = nextGen;\n      setGeneration((g) => g + 1);\n      setTickCount((t) => t + 1);\n      lastTickTimeRef.current = timestamp;\n\n      animationFrameRef.current = requestAnimationFrame(runTick);\n    },\n    [liveCellsRef, viewportRef, ticksPerSec, setGeneration, setTickCount, setRunning]\n  );\n\n  // Cleanup animation frame on unmount\n  useEffect(() => {\n    return () => {\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    runningRef,\n    animationFrameRef,\n    lastTickTimeRef,\n    runTick,\n  };\n}\n","import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  type CSSProperties,\n} from \"react\";\nimport { Cell } from \"./Cell.tsx\";\nimport * as CONSTANTS from \"./constants.ts\";\nimport * as patterns from \"./patterns.ts\";\nimport type { Viewport } from \"./types.ts\";\nimport { useGameLogic } from \"./useGameLogic.ts\";\nimport { useInteractions } from \"./useInteractions.ts\";\nimport { makeKey } from \"./utils.ts\";\nimport Wip from \"../projects/Wip\";\n\nimport \"../styles/gameoflife.css\";\n\n/*\n  Infinite Game of Life with a square viewport size selector.\n  – A single \"size\" input controls both rows and columns (rows = cols).\n  – Live cells stored sparsely in a Set keyed by \"x,y\".\n  – Arrow keys pan; click toggles cells; start/pause runs generations every 250 ms.\n  – Sidebar elements are neatly stacked, with the rules in an ordered list so\n    they never overlap the start/pause button.\n*/\n\nexport default function GameOfLifeInfinite(): ReactElement {\n  /* --------------------------------------------------------------------- */\n  /*  State                                                                */\n  /* --------------------------------------------------------------------- */\n  const ticksPerSec = useRef<number>(CONSTANTS.DEFAULT_TICK_PER_SEC);\n\n  // Calculate grid dimensions based on window size and zoom\n  const initialRows = Math.ceil(\n    window.innerHeight / (CONSTANTS.CELL_SIZE * CONSTANTS.ZOOM_DEFAULT_LEVEL)\n  );\n  const initialCols = Math.ceil(\n    window.innerWidth / (CONSTANTS.CELL_SIZE * CONSTANTS.ZOOM_DEFAULT_LEVEL)\n  );\n\n  /* ------------------------------------------------------------------ */\n  /*  Starting pattern                                                  */\n  /* ------------------------------------------------------------------ */\n  const [{ initialLive, patternCenterX, patternCenterY, selectedPattern }] =\n    useState(() => {\n      const pattern = patterns.getRandomPattern();\n      const live = new Set<number>(\n        pattern.pattern.map(([x, y]) => makeKey(x, y))\n      );\n\n      // Calculate pattern bounds to center it in viewport\n      const patternBounds = {\n        minX: Math.min(...pattern.pattern.map(([x]) => x)),\n        maxX: Math.max(...pattern.pattern.map(([x]) => x)),\n        minY: Math.min(...pattern.pattern.map(([, y]) => y)),\n        maxY: Math.max(...pattern.pattern.map(([, y]) => y)),\n      };\n      const centerX = (patternBounds.minX + patternBounds.maxX) / 2;\n      const centerY = (patternBounds.minY + patternBounds.maxY) / 2;\n\n      return {\n        selectedPattern: pattern,\n        initialLive: live,\n        patternCenterX: centerX,\n        patternCenterY: centerY,\n      };\n    });\n\n  // Batched viewport state to prevent race conditions during zoom/pan\n  const [viewport, setViewport] = useState<Viewport>({\n    zoom: CONSTANTS.ZOOM_DEFAULT_LEVEL,\n    offset: {\n      x: patternCenterX - initialCols / 2,\n      y: patternCenterY - initialRows / 2,\n    },\n    dimensions: { rows: initialRows, cols: initialCols },\n  });\n\n  // Keep ref in sync for runTick to access without triggering re-renders\n  const viewportRef = useRef(viewport);\n  useEffect(() => {\n    viewportRef.current = viewport;\n  }, [viewport]);\n\n  const { zoom, offset, dimensions } = viewport;\n  const viewRows = dimensions.rows;\n  const viewCols = dimensions.cols;\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = (): void => {\n      const currentViewport = viewportRef.current;\n      setViewport({\n        ...currentViewport,\n        dimensions: {\n          rows: Math.ceil(\n            window.innerHeight / (CONSTANTS.CELL_SIZE * currentViewport.zoom)\n          ),\n          cols: Math.ceil(\n            window.innerWidth / (CONSTANTS.CELL_SIZE * currentViewport.zoom)\n          ),\n        },\n      });\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  // Generation counter for triggering re-renders when cells change\n  const [generation, setGeneration] = useState<number>(0);\n\n  // Tick counter for display\n  const [tickCount, setTickCount] = useState<number>(0);\n  const tickCountRef = useRef<number>(0);\n\n  // Keep tickCountRef in sync with tickCount\n  useEffect(() => {\n    tickCountRef.current = tickCount;\n  }, [tickCount]);\n\n  // Splash screen state\n  const [showSplash, setShowSplash] = useState<boolean>(true);\n  const [fadingSplash, setFadingSplash] = useState<boolean>(false);\n\n  // Reset button animation state\n  const [resetClicked, setResetClicked] = useState<boolean>(false);\n\n  // Pattern selection state\n  const [currentPattern, setCurrentPattern] =\n    useState<patterns.PatternConfig | null>(selectedPattern);\n\n  // Reset state - stores the cell state to reset to (make a copy of initialLive)\n  const resetStateRef = useRef<Set<number>>(new Set(initialLive));\n  const resetOffsetRef = useRef<{ x: number; y: number }>({\n    x: patternCenterX - initialCols / 2,\n    y: patternCenterY - initialRows / 2,\n  });\n  const resetTickCountRef = useRef<number>(0);\n\n  // Fullscreen state\n  const [isFullscreen, setIsFullscreen] = useState<boolean>(false);\n\n  // Info popup state\n  const [showInfo, setShowInfo] = useState<boolean>(false);\n  const wasRunningBeforeInfoRef = useRef<boolean>(false);\n\n  // Mobile detection\n  const [windowWidthState, setWindowWidthState] = useState<number>(window.innerWidth);\n  const isMobile = windowWidthState <= 768;\n\n  // Update mobile detection on resize\n  useEffect(() => {\n    const handleResizeForMobile = (): void => {\n      setWindowWidthState(window.innerWidth);\n    };\n    window.addEventListener(\"resize\", handleResizeForMobile);\n    return () => window.removeEventListener(\"resize\", handleResizeForMobile);\n  }, []);\n\n  // Handle fullscreen changes\n  useEffect(() => {\n    const handleFullscreenChange = (): void => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n    return () =>\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n  }, []);\n\n  // Handle escape key to close info popup (prevent exiting fullscreen)\n  useEffect(() => {\n    const handleEscapeKey = (e: KeyboardEvent): void => {\n      if (e.key === \"Escape\" && showInfo) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        setShowInfo(false);\n      }\n    };\n\n    if (showInfo) {\n      document.addEventListener(\"keydown\", handleEscapeKey, { capture: true });\n      return () => document.removeEventListener(\"keydown\", handleEscapeKey, { capture: true });\n    }\n  }, [showInfo]);\n\n  const toggleFullscreen = useCallback((): void => {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen().catch((err) => {\n        console.error(\"Error attempting to enable fullscreen:\", err);\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  }, []);\n\n  // Handle splash screen timing\n  useEffect(() => {\n    // Start fade out after 2 seconds\n    const fadeTimer = setTimeout(() => {\n      setFadingSplash(true);\n    }, 2000);\n\n    // Remove splash completely after 3 seconds (2s display + 1s fade)\n    const removeTimer = setTimeout(() => {\n      setShowSplash(false);\n    }, 3000);\n\n    return () => {\n      clearTimeout(fadeTimer);\n      clearTimeout(removeTimer);\n    };\n  }, []);\n\n  /* ------------------------------------------------------------------ */\n  /*  State                                                             */\n  /* ------------------------------------------------------------------ */\n  const liveCellsRef = useRef<Set<number>>(initialLive);\n  const [running, setRunning] = useState<boolean>(false);\n\n  /* --------------------------------------------------------------------- */\n  /*  Core Life Logic                                                      */\n  /* --------------------------------------------------------------------- */\n  const { runningRef, animationFrameRef, lastTickTimeRef, runTick } =\n    useGameLogic({\n      liveCellsRef,\n      viewportRef,\n      ticksPerSec,\n      setGeneration,\n      setTickCount,\n      setRunning,\n    });\n\n  /* --------------------------------------------------------------------- */\n  /*  Interaction Helpers                                                  */\n  /* --------------------------------------------------------------------- */\n  const toggleCell = useCallback((x: number, y: number): void => {\n    if (isDraggingRef.current) return;\n\n    const k = makeKey(x, y);\n    const set = liveCellsRef.current;\n    set.has(k) ? set.delete(k) : set.add(k);\n\n    setGeneration((g) => g + 1);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const loadPattern = useCallback(\n    (pattern: patterns.PatternConfig | null): void => {\n      // Pause the simulation\n      runningRef.current = false;\n      setRunning(false);\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n\n      // Reset tick counter\n      setTickCount(0);\n\n      // Load the pattern (or empty if null)\n      const newLive = pattern\n        ? new Set<number>(pattern.pattern.map(([x, y]) => makeKey(x, y)))\n        : new Set<number>();\n\n      // Update cells\n      liveCellsRef.current = newLive;\n\n      // Calculate center and update viewport\n      const currentViewport = viewportRef.current;\n      let newOffset = currentViewport.offset;\n\n      if (pattern) {\n        const patternBounds = {\n          minX: Math.min(...pattern.pattern.map(([x]) => x)),\n          maxX: Math.max(...pattern.pattern.map(([x]) => x)),\n          minY: Math.min(...pattern.pattern.map(([, y]) => y)),\n          maxY: Math.max(...pattern.pattern.map(([, y]) => y)),\n        };\n        const centerX = (patternBounds.minX + patternBounds.maxX) / 2;\n        const centerY = (patternBounds.minY + patternBounds.maxY) / 2;\n\n        newOffset = {\n          x: centerX - currentViewport.dimensions.cols / 2,\n          y: centerY - currentViewport.dimensions.rows / 2,\n        };\n\n        setViewport({\n          ...currentViewport,\n          offset: newOffset,\n        });\n      }\n\n      // Save as reset state\n      resetStateRef.current = new Set(newLive);\n      resetOffsetRef.current = newOffset;\n      resetTickCountRef.current = 0;\n\n      setGeneration((g) => g + 1);\n    },\n    [runningRef, animationFrameRef, viewportRef]\n  );\n\n  const resetBoard = useCallback((): void => {\n    // Pause the simulation\n    runningRef.current = false;\n    setRunning(false);\n    if (animationFrameRef.current !== null) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n\n    // Reset tick counter to saved value\n    setTickCount(resetTickCountRef.current);\n\n    // Load from saved reset state\n    liveCellsRef.current = new Set(resetStateRef.current);\n\n    // Restore saved viewport offset\n    const currentViewport = viewportRef.current;\n    setViewport({\n      ...currentViewport,\n      offset: resetOffsetRef.current,\n    });\n\n    setGeneration((g) => g + 1);\n\n    // Trigger animation\n    setResetClicked(true);\n    setTimeout(() => {\n      setResetClicked(false);\n    }, 900);\n  }, [runningRef, animationFrameRef, viewportRef]);\n\n  const onToggleStart = useCallback((): void => {\n    const newRunning = !runningRef.current;\n    runningRef.current = newRunning;\n    setRunning(newRunning); // Update state immediately for UI\n\n    if (newRunning) {\n      // Save current state as reset state when starting\n      resetStateRef.current = new Set(liveCellsRef.current);\n      resetOffsetRef.current = viewportRef.current.offset;\n      resetTickCountRef.current = tickCountRef.current;\n\n      lastTickTimeRef.current = performance.now();\n      runTick();\n    } else {\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n      setGeneration((g) => g + 1);\n    }\n  }, [\n    runTick,\n    runningRef,\n    animationFrameRef,\n    lastTickTimeRef,\n    viewportRef,\n    tickCountRef,\n  ]);\n\n  /* --------------------------------------------------------------------- */\n  /*  Interaction Handlers                                                 */\n  /* --------------------------------------------------------------------- */\n  const { isDraggingRef, isDragging, isPointerDown } = useInteractions({\n    viewportRef,\n    setViewport,\n    onToggleStart,\n    toggleFullscreen,\n  });\n\n  /* --------------------------------------------------------------------- */\n  /*  Info Popup Pause/Resume Logic                                        */\n  /* --------------------------------------------------------------------- */\n  // Pause game when info popup opens, resume if it was running\n  useEffect(() => {\n    if (showInfo) {\n      // Opening popup - save running state and pause\n      wasRunningBeforeInfoRef.current = runningRef.current;\n      if (runningRef.current) {\n        runningRef.current = false;\n        setRunning(false);\n        if (animationFrameRef.current !== null) {\n          cancelAnimationFrame(animationFrameRef.current);\n          animationFrameRef.current = null;\n        }\n      }\n    } else if (wasRunningBeforeInfoRef.current) {\n      // Closing popup - resume if it was running before\n      runningRef.current = true;\n      setRunning(true);\n      lastTickTimeRef.current = performance.now();\n      runTick();\n    }\n  }, [showInfo, runningRef, animationFrameRef, lastTickTimeRef, runTick]);\n\n  /* --------------------------------------------------------------------- */\n  /*  Render Board                                                         */\n  /* --------------------------------------------------------------------- */\n  const offsetX = Math.floor(offset.x);\n  const offsetY = Math.floor(offset.y);\n\n  const fractionalX = offset.x - offsetX;\n  const fractionalY = offset.y - offsetY;\n\n  // Event delegation handler for cell clicks\n  const handleBoardClick = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      const target = e.target as HTMLElement;\n      if (!target.classList.contains(\"gol-board-cell\")) return;\n\n      const x = target.getAttribute(\"data-cell-x\");\n      const y = target.getAttribute(\"data-cell-y\");\n      if (x && y) {\n        toggleCell(Number(x), Number(y));\n      }\n    },\n    [toggleCell]\n  );\n\n  // Memoized grid rendering - only recalculates when dependencies change\n  // generation is needed to trigger re-render when cells change\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const rows = useMemo(() => {\n    const result: ReactElement[] = [];\n    for (let r = 0; r < viewRows + CONSTANTS.EXTRA_ROWS; r++) {\n      const cells: ReactElement[] = [];\n      for (let c = 0; c < viewCols + CONSTANTS.EXTRA_ROWS; c++) {\n        const cellX = c + offsetX;\n        const cellY = r + offsetY;\n        const filled = liveCellsRef.current.has(makeKey(cellX, cellY));\n\n        cells.push(\n          <Cell\n            key={`cell-${cellX},${cellY}`}\n            x={cellX}\n            y={cellY}\n            filled={filled}\n          />\n        );\n      }\n      result.push(\n        <div key={`row-${r + offsetY}`} className=\"gol-board-row\">\n          {cells}\n        </div>\n      );\n    }\n    return result;\n    // eslint-disable-next-line\n  }, [offsetX, offsetY, viewRows, viewCols, generation]);\n\n  /* --------------------------------------------------------------------- */\n  /*  Helpers                                                              */\n  /* --------------------------------------------------------------------- */\n  const displayVal = (v: number): string | number => (v === 0 ? \"\" : v);\n\n  // Show \"desktop only\" message on mobile\n  if (isMobile) {\n    return <Wip />;\n  }\n\n  return (\n    <div id=\"game-of-life\" className=\"gol-container\">\n      {/* SPLASH SCREEN */}\n      {showSplash && (\n        <div className={`gol-splash${fadingSplash ? \" fading\" : \"\"}`}>\n          <div className=\"gol-splash-text\">\n            conway's\n            <br />\n            game of life\n          </div>\n        </div>\n      )}\n\n      {/* BOARD */}\n      <div\n        className={`gol-board${\n          isPointerDown && !isDragging ? \" mouse-down\" : \"\"\n        }${isDragging ? \" dragging\" : \"\"}${running ? \" running\" : \"\"}${\n          zoom >= 2 ? \" zoomed-in\" : \"\"\n        }`}\n        style={\n          {\n            \"--rows\": viewRows,\n            \"--cols\": viewCols,\n            \"--zoom\": zoom,\n          } as CSSProperties\n        }\n      >\n        <div\n          className=\"gol-board-content\"\n          onClick={handleBoardClick}\n          style={{\n            transform: `translate(${-fractionalX * (100 / viewCols)}%, ${\n              -fractionalY * (100 / viewRows)\n            }%)`,\n          }}\n        >\n          {rows}\n        </div>\n      </div>\n\n      {/* CONTROLS */}\n      <aside className=\"gol-controls\">\n        {/* pattern selector */}\n        <div className=\"gol-control-group\">\n          <label>\n            <div>pattern</div>\n            <select\n              className=\"gol-pattern-select\"\n              value={currentPattern?.name ?? \"empty\"}\n              onChange={(e) => {\n                const value = e.target.value;\n                if (value === \"empty\") {\n                  setCurrentPattern(null);\n                  loadPattern(null);\n                } else {\n                  const pattern = patterns.PATTERNS.find(\n                    (p) => p.name === value\n                  );\n                  if (pattern) {\n                    setCurrentPattern(pattern);\n                    loadPattern(pattern);\n                  }\n                }\n              }}\n            >\n              <option value=\"empty\">empty</option>\n              {patterns.PATTERNS.map((pattern) => (\n                <option key={pattern.name} value={pattern.name}>\n                  {pattern.name}\n                </option>\n              ))}\n            </select>\n          </label>\n        </div>\n\n        {/* start / pause */}\n        <div\n          className={`gol-start-button${running ? \" running\" : \"\"}`}\n          onClick={onToggleStart}\n        >\n          {running ? \"⏸\" : \"▶\"}\n        </div>\n        <div\n          className={`gol-start-button${resetClicked ? \" clearing\" : \"\"}`}\n          onClick={resetBoard}\n        >\n          ⟲\n        </div>\n\n        {/* speed selector */}\n        <div className=\"gol-control-group\">\n          <label>\n            <div>ticks / second</div>\n            <input\n              type=\"number\"\n              min={1}\n              max={CONSTANTS.MAX_TICK_PER_SEC}\n              step={1}\n              value={displayVal(ticksPerSec.current)}\n              onChange={(e) => {\n                const raw = e.target.value;\n                if (raw === \"\") {\n                  ticksPerSec.current = 0;\n                } else {\n                  const n = Math.max(\n                    0,\n                    Math.min(CONSTANTS.MAX_TICK_PER_SEC, Number(raw))\n                  );\n                  ticksPerSec.current = n;\n                }\n                setGeneration((g) => g + 1);\n              }}\n            />\n          </label>\n        </div>\n\n        {/* reset button */}\n      </aside>\n\n      {/* INFO BUTTON */}\n      <div\n        className=\"gol-info-button\"\n        onClick={() => setShowInfo(true)}\n        title=\"Rules\"\n      >\n        ⚙\n      </div>\n\n      {/* INFO POPUP */}\n      {showInfo && (\n        <div className=\"gol-info-overlay\" onClick={() => setShowInfo(false)}>\n          <div className=\"gol-info-popup\" onClick={(e) => e.stopPropagation()}>\n            <button\n              className=\"gol-info-close\"\n              onClick={() => setShowInfo(false)}\n              title=\"Close (Esc)\"\n            >\n              ✕\n            </button>\n            <h2>conway's game of life</h2>\n            <div className=\"gol-info-content\">\n              <p>\n                a cellular automaton in which cells live, die, or reproduce\n                based on simple rules:\n              </p>\n              <ol>\n                <li>\n                  <strong>underpopulation:</strong> a live cell with fewer than\n                  2 live neighbors dies\n                </li>\n                <li>\n                  <strong>survival:</strong> a live cell with 2 or 3 live\n                  neighbors survives\n                </li>\n                <li>\n                  <strong>reproduction:</strong> a dead cell with exactly 3 live\n                  neighbors becomes alive\n                </li>\n                <li>\n                  <strong>overpopulation:</strong> a live cell with more than 3\n                  live neighbors dies\n                </li>\n              </ol>\n              <p className=\"gol-info-controls\">\n                <strong>controls:</strong>\n                <br />\n                click cells to toggle • arrow keys to pan • scroll to zoom •\n                drag to pan • f for fullscreen\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* TICK COUNTER */}\n      <div className=\"gol-tick-counter\">{tickCount}</div>\n\n      {/* FULLSCREEN BUTTON */}\n      <div\n        className=\"gol-fullscreen-button\"\n        onClick={toggleFullscreen}\n        title={isFullscreen ? \"Exit fullscreen (F)\" : \"Fullscreen (F)\"}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            lineHeight: `${isFullscreen ? 1 : 0.3}`,\n            fontSize: \"2.4rem\",\n          }}\n        >\n          <div>{isFullscreen ? \"⌟⌞\" : \"⌜⌝\"}</div>\n          <div>{isFullscreen ? \"⌝⌜\" : \"⌞⌟\"}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport {\n  DRAG_THRESHOLD_PX,\n  MIN_ZOOM,\n  MAX_ZOOM,\n  CELL_SIZE,\n  WHEEL_ZOOM_DELTA,\n  PINCH_ZOOM_DAMPING,\n} from \"./constants.ts\";\nimport { type Viewport } from \"./types.ts\";\n\ninterface UseInteractionsProps {\n  viewportRef: React.MutableRefObject<Viewport>;\n  setViewport: React.Dispatch<React.SetStateAction<Viewport>>;\n  onToggleStart: () => void;\n  toggleFullscreen: () => void;\n}\n\nexport function useInteractions({\n  viewportRef,\n  setViewport,\n  onToggleStart,\n  toggleFullscreen,\n}: UseInteractionsProps) {\n  const isDraggingRef = useRef(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isPointerDown, setIsPointerDown] = useState(false);\n\n  // arrow-key panning and Enter/Space for play/pause\n  useEffect(() => {\n    const KEY_MOVE_AMOUNT = 1;\n    const handler = (e: KeyboardEvent): void => {\n      switch (e.key) {\n        case \"ArrowDown\":\n          setViewport((v) => ({\n            ...v,\n            offset: { ...v.offset, y: v.offset.y - KEY_MOVE_AMOUNT },\n          }));\n          break;\n        case \"ArrowUp\":\n          setViewport((v) => ({\n            ...v,\n            offset: { ...v.offset, y: v.offset.y + KEY_MOVE_AMOUNT },\n          }));\n          break;\n        case \"ArrowRight\":\n          setViewport((v) => ({\n            ...v,\n            offset: { ...v.offset, x: v.offset.x - KEY_MOVE_AMOUNT },\n          }));\n          break;\n        case \"ArrowLeft\":\n          setViewport((v) => ({\n            ...v,\n            offset: { ...v.offset, x: v.offset.x + KEY_MOVE_AMOUNT },\n          }));\n          break;\n        case \"Enter\":\n        case \" \":\n          e.preventDefault();\n          onToggleStart();\n          break;\n        case \"f\":\n        case \"F\":\n          e.preventDefault();\n          toggleFullscreen();\n          break;\n      }\n    };\n    window.addEventListener(\"keydown\", handler);\n    return () => window.removeEventListener(\"keydown\", handler);\n  }, [onToggleStart, toggleFullscreen, setViewport]);\n\n  // wheel zoom\n  useEffect(() => {\n    const handler = (e: WheelEvent): void => {\n      e.preventDefault();\n      const board = e.currentTarget as HTMLElement;\n      const rect = board.getBoundingClientRect();\n\n      // Mouse position relative to board (0 to 1)\n      const mouseXRatio = (e.clientX - rect.left) / rect.width;\n      const mouseYRatio = (e.clientY - rect.top) / rect.height;\n\n      const currentViewport = viewportRef.current;\n\n      // Adjust zoom (scroll down = zoom in, scroll up = zoom out)\n      const zoomDelta = e.deltaY > 0 ? WHEEL_ZOOM_DELTA : -WHEEL_ZOOM_DELTA;\n      const newZoom = Math.max(\n        MIN_ZOOM,\n        Math.min(MAX_ZOOM, currentViewport.zoom + zoomDelta)\n      );\n\n      // Calculate new dimensions based on new zoom\n      const newRows = Math.ceil(window.innerHeight / (CELL_SIZE * newZoom));\n      const newCols = Math.ceil(window.innerWidth / (CELL_SIZE * newZoom));\n\n      // Adjust offset to keep the same visual point fixed\n      const newOffset = {\n        x:\n          currentViewport.offset.x -\n          mouseXRatio * (newCols - currentViewport.dimensions.cols),\n        y:\n          currentViewport.offset.y -\n          mouseYRatio * (newRows - currentViewport.dimensions.rows),\n      };\n\n      // Batched update to prevent race conditions\n      setViewport({\n        zoom: newZoom,\n        offset: newOffset,\n        dimensions: { rows: newRows, cols: newCols },\n      });\n    };\n    const board = document.querySelector(\".gol-board\") as HTMLElement | null;\n    if (board) {\n      const eventHandler = handler as EventListener;\n      board.addEventListener(\"wheel\", eventHandler, { passive: false });\n      return () => board.removeEventListener(\"wheel\", eventHandler);\n    }\n    return;\n  }, [viewportRef, setViewport]);\n\n  // drag/click detection (mouse)\n  useEffect(() => {\n    let isMouseDown = false;\n    let hasDragged = false;\n    let startX = 0;\n    let startY = 0;\n    let lastX = 0;\n    let lastY = 0;\n\n    const handleMouseDown = (e: MouseEvent): void => {\n      if ((e.target as HTMLElement).closest(\".gol-controls\")) return;\n\n      isMouseDown = true;\n      hasDragged = false;\n      setIsPointerDown(true);\n      startX = e.clientX;\n      startY = e.clientY;\n      lastX = e.clientX;\n      lastY = e.clientY;\n    };\n\n    const handleMouseMove = (e: MouseEvent): void => {\n      if (!isMouseDown) return;\n\n      const dx = e.clientX - lastX;\n      const dy = e.clientY - lastY;\n\n      const totalDx = Math.abs(e.clientX - startX);\n      const totalDy = Math.abs(e.clientY - startY);\n\n      if (\n        !hasDragged &&\n        (totalDx > DRAG_THRESHOLD_PX || totalDy > DRAG_THRESHOLD_PX)\n      ) {\n        hasDragged = true;\n        isDraggingRef.current = true;\n        setIsDragging(true);\n      }\n\n      if (hasDragged) {\n        const currentViewport = viewportRef.current;\n        const board = document.querySelector(\".gol-board\") as HTMLElement;\n        const rect = board?.getBoundingClientRect();\n        if (!rect) return;\n\n        const cellDx = (dx / rect.width) * currentViewport.dimensions.cols;\n        const cellDy = (dy / rect.height) * currentViewport.dimensions.rows;\n\n        setViewport((prev) => ({\n          ...prev,\n          offset: {\n            x: prev.offset.x - cellDx,\n            y: prev.offset.y - cellDy,\n          },\n        }));\n      }\n\n      lastX = e.clientX;\n      lastY = e.clientY;\n    };\n\n    const handleMouseUp = (): void => {\n      if (hasDragged) {\n        setIsDragging(false);\n      }\n      isMouseDown = false;\n      hasDragged = false;\n      setIsPointerDown(false);\n      setTimeout(() => {\n        isDraggingRef.current = false;\n      }, 0);\n    };\n\n    const handleMouseLeave = (): void => {\n      if (isMouseDown) {\n        isMouseDown = false;\n        hasDragged = false;\n        setIsPointerDown(false);\n        setIsDragging(false);\n        isDraggingRef.current = false;\n      }\n    };\n\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    window.addEventListener(\"mouseleave\", handleMouseLeave);\n\n    return () => {\n      window.removeEventListener(\"mousedown\", handleMouseDown);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n      window.removeEventListener(\"mouseleave\", handleMouseLeave);\n    };\n  }, [viewportRef, setViewport]);\n\n  // drag/tap detection (touch) & pinch zoom\n  useEffect(() => {\n    let initialDistance = 0;\n    let isTouching = false;\n    let hasDragged = false;\n    let startX = 0;\n    let startY = 0;\n    let lastX = 0;\n    let lastY = 0;\n\n    const handleTouchStart = (e: TouchEvent): void => {\n      if (e.touches.length === 2) {\n        isTouching = false;\n        hasDragged = false;\n        const dx = e.touches[0].clientX - e.touches[1].clientX;\n        const dy = e.touches[0].clientY - e.touches[1].clientY;\n        initialDistance = Math.sqrt(dx * dx + dy * dy);\n      } else if (e.touches.length === 1) {\n        isTouching = true;\n        hasDragged = false;\n        startX = e.touches[0].clientX;\n        startY = e.touches[0].clientY;\n        lastX = e.touches[0].clientX;\n        lastY = e.touches[0].clientY;\n      }\n    };\n\n    const handleTouchMove = (e: TouchEvent): void => {\n      if (e.touches.length === 2) {\n        e.preventDefault();\n        isTouching = false;\n        hasDragged = false;\n        const board = e.currentTarget as HTMLElement;\n        const rect = board.getBoundingClientRect();\n\n        const centerX = (e.touches[0].clientX + e.touches[1].clientX) / 2;\n        const centerY = (e.touches[0].clientY + e.touches[1].clientY) / 2;\n        const centerXRatio = (centerX - rect.left) / rect.width;\n        const centerYRatio = (centerY - rect.top) / rect.height;\n\n        const currentViewport = viewportRef.current;\n\n        const dx = e.touches[0].clientX - e.touches[1].clientX;\n        const dy = e.touches[0].clientY - e.touches[1].clientY;\n        const currentDistance = Math.sqrt(dx * dx + dy * dy);\n\n        // Pinch-zoom with 50% damping\n        const rawScale = currentDistance / initialDistance;\n        const scale = 1 + (rawScale - 1) * PINCH_ZOOM_DAMPING;\n        const newZoom = Math.max(\n          MIN_ZOOM,\n          Math.min(MAX_ZOOM, currentViewport.zoom * scale)\n        );\n\n        const newRows = Math.ceil(window.innerHeight / (CELL_SIZE * newZoom));\n        const newCols = Math.ceil(window.innerWidth / (CELL_SIZE * newZoom));\n\n        const newOffset = {\n          x:\n            currentViewport.offset.x -\n            centerXRatio * (newCols - currentViewport.dimensions.cols),\n          y:\n            currentViewport.offset.y -\n            centerYRatio * (newRows - currentViewport.dimensions.rows),\n        };\n\n        // Batched update to prevent race conditions\n        setViewport({\n          zoom: newZoom,\n          offset: newOffset,\n          dimensions: { rows: newRows, cols: newCols },\n        });\n      } else if (e.touches.length === 1 && isTouching) {\n        const dx = e.touches[0].clientX - lastX;\n        const dy = e.touches[0].clientY - lastY;\n\n        const totalDx = Math.abs(e.touches[0].clientX - startX);\n        const totalDy = Math.abs(e.touches[0].clientY - startY);\n\n        if (\n          !hasDragged &&\n          (totalDx > DRAG_THRESHOLD_PX || totalDy > DRAG_THRESHOLD_PX)\n        ) {\n          hasDragged = true;\n          setIsDragging(true);\n        }\n\n        if (hasDragged) {\n          e.preventDefault();\n          const currentViewport = viewportRef.current;\n          const board = document.querySelector(\".gol-board\") as HTMLElement;\n          const rect = board?.getBoundingClientRect();\n          if (!rect) return;\n\n          const cellDx = (dx / rect.width) * currentViewport.dimensions.cols;\n          const cellDy = (dy / rect.height) * currentViewport.dimensions.rows;\n\n          setViewport((prev) => ({\n            ...prev,\n            offset: {\n              x: prev.offset.x - cellDx,\n              y: prev.offset.y - cellDy,\n            },\n          }));\n        }\n\n        lastX = e.touches[0].clientX;\n        lastY = e.touches[0].clientY;\n      }\n    };\n\n    const handleTouchEnd = (): void => {\n      isTouching = false;\n      setIsDragging(false);\n    };\n\n    const board = document.querySelector(\".gol-board\");\n    if (board) {\n      const startHandler = handleTouchStart as EventListener;\n      const moveHandler = handleTouchMove as EventListener;\n      const endHandler = handleTouchEnd as EventListener;\n\n      board.addEventListener(\"touchstart\", startHandler);\n      board.addEventListener(\"touchmove\", moveHandler, { passive: false });\n      board.addEventListener(\"touchend\", endHandler);\n\n      return () => {\n        board.removeEventListener(\"touchstart\", startHandler);\n        board.removeEventListener(\"touchmove\", moveHandler);\n        board.removeEventListener(\"touchend\", endHandler);\n      };\n    }\n  }, [viewportRef, setViewport]);\n\n  return {\n    isDraggingRef,\n    isDragging,\n    isPointerDown,\n  };\n}\n","import React, { useRef, useState, useEffect, useLayoutEffect, cloneElement } from 'react';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction useWindowSize() {\n  const getSize = () => ({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [windowSize, setWindowSize] = React.useState(getSize);\n  React.useLayoutEffect(() => {\n    const onResize = () => setWindowSize(getSize);\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n  }, []);\n  return windowSize;\n}\n\n// src/useDvdScreensaver.ts\nfunction useDvdScreensaver(options) {\n  const { width: windowWidth } = useWindowSize();\n  const animationRef = useRef({\n    animationFrameId: 0,\n    containerHeight: 0,\n    containerWidth: 0,\n    impactCount: 0,\n    isPosXIncrement: true,\n    isPosYIncrement: true,\n    positionX: Math.random() * windowWidth,\n    positionY: Math.random() * windowWidth\n  });\n  const elementRef = useRef(null);\n  const containerRef = useRef(null);\n  const [impactCount, setImpactCount] = useState(0);\n  const [hovered, setHovered] = useState(false);\n  function updatePosition(containerSpan, delta, elementSpan, prevPos, toggleRefKey) {\n    const parentBoundary = containerSpan - elementSpan;\n    let newPos = prevPos + (animationRef.current[toggleRefKey] ? delta : -delta);\n    if (newPos <= 0 || newPos >= parentBoundary) {\n      animationRef.current[toggleRefKey] = !animationRef.current[toggleRefKey];\n      animationRef.current.impactCount += 1;\n      setImpactCount(animationRef.current.impactCount);\n      newPos = newPos <= 0 ? 0 : parentBoundary;\n    }\n    return newPos;\n  }\n  function animate() {\n    if (elementRef.current && elementRef.current.parentElement) {\n      const containerHeight = elementRef.current.parentElement.clientHeight;\n      const containerWidth = elementRef.current.parentElement.clientWidth;\n      const elementHeight = elementRef.current.clientHeight;\n      const elementWidth = elementRef.current.clientWidth;\n      const delta = (options == null ? void 0 : options.speed) || 2;\n      const posX = updatePosition(\n        containerWidth,\n        delta,\n        elementWidth,\n        animationRef.current.positionX,\n        \"isPosXIncrement\"\n      );\n      const posY = updatePosition(\n        containerHeight,\n        delta,\n        elementHeight,\n        animationRef.current.positionY,\n        \"isPosYIncrement\"\n      );\n      elementRef.current.style.transform = `translate3d(${posX}px, ${posY}px, 0)`;\n      animationRef.current.positionX = posX;\n      animationRef.current.positionY = posY;\n    }\n    animationRef.current.animationFrameId = requestAnimationFrame(animate);\n  }\n  useEffect(() => {\n    if (options == null ? void 0 : options.freezeOnHover) {\n      if (hovered) {\n        cancelAnimationFrame(animationRef.current.animationFrameId);\n        animationRef.current.animationFrameId = 0;\n      }\n      if (!hovered && !animationRef.current.animationFrameId) {\n        animationRef.current.animationFrameId = requestAnimationFrame(animate);\n      }\n    }\n    if (options == null ? void 0 : options.hoverCallback) {\n      options.hoverCallback();\n    }\n  }, [hovered, options]);\n  useLayoutEffect(() => {\n    const element = elementRef.current;\n    const handleMouseOver = () => setHovered(true);\n    const handleMouseOut = () => setHovered(false);\n    if (element) {\n      element.style.willChange = \"transform\";\n      element.addEventListener(\"mouseover\", handleMouseOver);\n      element.addEventListener(\"mouseout\", handleMouseOut);\n      animationRef.current.animationFrameId = requestAnimationFrame(animate);\n    }\n    return () => {\n      if (element) {\n        element.removeEventListener(\"mouseover\", handleMouseOver);\n        element.removeEventListener(\"mouseout\", handleMouseOut);\n      }\n      cancelAnimationFrame(animationRef.current.animationFrameId);\n    };\n  }, []);\n  return {\n    containerRef,\n    elementRef,\n    hovered,\n    impactCount\n  };\n}\n\n// src/DvdScreensaver.tsx\nfunction DvdScreensaver(props) {\n  const { elementRef, impactCount } = useDvdScreensaver({\n    freezeOnHover: props.freezeOnHover,\n    hoverCallback: props.hoverCallback,\n    speed: props.speed\n  });\n  useEffect(() => {\n    if (props.impactCallback) {\n      props.impactCallback(impactCount);\n    }\n  }, [impactCount, props.impactCallback]);\n  const enhancedStyle = __spreadProps(__spreadValues({}, props.style), {\n    width: (props == null ? void 0 : props.width) || \"100%\",\n    height: (props == null ? void 0 : props.height) || \"100%\"\n  });\n  const childWithRef = cloneElement(props.children, { ref: elementRef });\n  return /* @__PURE__ */ React.createElement(\"div\", { className: props.className, style: enhancedStyle }, childWithRef);\n}\n\nexport { DvdScreensaver, useDvdScreensaver };\n","import { randomChoice } from \"./Random\";\n\nexport class Color {\n  constructor(red, green, blue) {\n    this.red = red;\n    this.green = green;\n    this.blue = blue;\n    this.rgb = `rgb(${red}, ${green}, ${blue})`;\n  }\n}\n\nexport function invertColor(color) {\n  const red = 255 - color.red;\n  const green = 255 - color.green;\n  const blue = 255 - color.blue;\n  return new Color(red, green, blue);\n}\n\nexport const getRandomColor = (min=0, max=255) => {\n  const colorVals = Array.from({ length: (max - min) + 1}, (_, i) => i + min);\n  const red = randomChoice(colorVals);\n  const green = randomChoice(colorVals);\n  const blue = randomChoice(colorVals);\n  return new Color(red, green, blue);\n}","import React, { useState, useEffect, useRef } from 'react';\nimport { useDvdScreensaver } from 'react-dvd-screensaver'\nimport { getRandomColor, invertColor } from '../util/Color';\n\nimport '../styles/wip.css'\n\nexport default function Wip() {\n  const [color, setColor] = useState(getRandomColor());\n  const { containerRef, elementRef, impactCount } = useDvdScreensaver({speed: (window.innerWidth / 2_000) * 3});\n  const lastColorChangeRef = useRef(0);\n\n  useEffect(() => {\n    const now = Date.now();\n    if (now - lastColorChangeRef.current >= 300) {\n      setColor(getRandomColor());\n      lastColorChangeRef.current = now;\n    }\n  }, [impactCount]);\n\n  return (\n      <div\n        ref={containerRef}\n        id=\"bounce-room\"\n        style={{\n          color: color.rgb,\n          backgroundColor: invertColor(color).rgb,\n        }}\n      >\n        <div ref={elementRef} id=\"bouncing-text\">\n          desktop only\n        </div>\n      </div>\n  );\n}","export const randomChoice = (arr) => arr[Math.floor(Math.random() * arr.length)];\n\nexport const shuffle = ([...arr]) => {\n  let m = arr.length;\n  while (m) {\n    const i = Math.floor(Math.random() * m--);\n    [arr[m], arr[i]] = [arr[i], arr[m]];\n  }\n  return arr;\n};"],"names":["DEFAULT_TICK_PER_SEC","MAX_TICK_PER_SEC","CELL_SIZE","MIN_ZOOM","MAX_ZOOM","DRAG_THRESHOLD_PX","MAX_LIVE_CELLS","CULLING_MARGIN","COORD_OFFSET","KEY_MULTIPLIER","LIFE_NEIGHBORS_BIRTH","COLOR_GOLD","WHEEL_ZOOM_DELTA","PINCH_ZOOM_DAMPING","ZOOM_DEFAULT_LEVEL","EXTRA_ROWS","Cell","memo","_ref","x","y","filled","_jsx","className","concat","style","backgroundColor","undefined","parsePattern","art","lines","trim","split","coords","forEach","line","length","push","displayName","TABLE","HOLLOW_SQUARES","GLIDER_GUN","ONE_TWO_THREE","PATTERNS","name","pattern","makeKey","parseKey","k","Math","floor","useGameLogic","_ref2","liveCellsRef","viewportRef","ticksPerSec","setGeneration","setTickCount","setRunning","runningRef","useRef","animationFrameRef","lastTickTimeRef","growthCountRef","runTick","useCallback","timestamp","arguments","performance","now","current","requestAnimationFrame","currentSize","size","alert","g","checkCellLimit","bounds","currentViewport","minX","offset","maxX","dimensions","cols","minY","maxY","rows","computeViewportBounds","nextGen","neighbourCounter","liveCells","Set","count","cellKey","alive","has","add","applyRules","Map","dy","dx","neighKey","set","get","countNeighbours","nextGenSize","console","warn","growthDetection","t","useEffect","cancelAnimationFrame","GameOfLifeInfinite","_currentPattern$name","CONSTANTS","initialRows","ceil","window","innerHeight","initialCols","innerWidth","initialLive","patternCenterX","patternCenterY","selectedPattern","useState","randomIndex","random","log","patterns","live","map","patternBounds","min","max","_ref3","_ref4","_ref5","viewport","setViewport","zoom","viewRows","viewCols","handleResize","_objectSpread","addEventListener","removeEventListener","generation","tickCount","tickCountRef","showSplash","setShowSplash","fadingSplash","setFadingSplash","resetClicked","setResetClicked","currentPattern","setCurrentPattern","resetStateRef","resetOffsetRef","resetTickCountRef","isFullscreen","setIsFullscreen","showInfo","setShowInfo","wasRunningBeforeInfoRef","windowWidthState","setWindowWidthState","isMobile","handleResizeForMobile","handleFullscreenChange","document","fullscreenElement","handleEscapeKey","e","key","preventDefault","stopPropagation","stopImmediatePropagation","capture","toggleFullscreen","exitFullscreen","documentElement","requestFullscreen","catch","err","error","fadeTimer","setTimeout","removeTimer","clearTimeout","running","toggleCell","isDraggingRef","delete","loadPattern","newLive","_ref6","newOffset","_ref7","_ref8","_ref9","_ref0","centerX","centerY","resetBoard","onToggleStart","newRunning","isDragging","isPointerDown","setIsDragging","setIsPointerDown","handler","v","rect","currentTarget","getBoundingClientRect","mouseXRatio","clientX","left","width","mouseYRatio","clientY","top","height","zoomDelta","deltaY","newZoom","newRows","newCols","board","querySelector","eventHandler","passive","isMouseDown","hasDragged","startX","startY","lastX","lastY","handleMouseDown","target","closest","handleMouseMove","totalDx","abs","totalDy","cellDx","cellDy","prev","handleMouseUp","handleMouseLeave","initialDistance","isTouching","handleTouchStart","touches","sqrt","handleTouchMove","centerXRatio","centerYRatio","scale","handleTouchEnd","startHandler","moveHandler","endHandler","useInteractions","offsetX","offsetY","fractionalX","fractionalY","handleBoardClick","classList","contains","getAttribute","Number","useMemo","result","r","cells","c","cellX","cellY","children","Wip","_jsxs","id","onClick","transform","value","onChange","find","p","type","step","raw","n","title","display","flexDirection","lineHeight","fontSize","Object","defineProperty","defineProperties","getOwnPropertyDescriptors","getOwnPropertySymbols","prototype","hasOwnProperty","propertyIsEnumerable","useDvdScreensaver","options","windowWidth","getSize","windowSize","setWindowSize","React","onResize","useWindowSize","animationRef","animationFrameId","containerHeight","containerWidth","impactCount","isPosXIncrement","isPosYIncrement","positionX","positionY","elementRef","containerRef","setImpactCount","hovered","setHovered","updatePosition","containerSpan","delta","elementSpan","prevPos","toggleRefKey","parentBoundary","newPos","animate","parentElement","clientHeight","clientWidth","elementHeight","elementWidth","speed","posX","posY","freezeOnHover","hoverCallback","useLayoutEffect","element","handleMouseOver","handleMouseOut","willChange","Color","constructor","red","green","blue","this","rgb","invertColor","color","getRandomColor","colorVals","Array","from","_","i","randomChoice","setColor","lastColorChangeRef","Date","ref","arr","shuffle","m"],"sourceRoot":""}