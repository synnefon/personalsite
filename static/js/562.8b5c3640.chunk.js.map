{"version":3,"file":"static/js/562.8b5c3640.chunk.js","mappings":"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","sources":["shavianator/shavianating.js","shavianator/Shavianator.js"],"sourcesContent":["// Token types enum\nexport const TokenType = {\n  WORD: \"word\",\n  PUNCTUATION: \"punctuation\",\n  WHITESPACE: \"whitespace\",\n  NEWLINE: \"newline\",\n};\n\n// Global reference to toShavian function, set externally\nlet toShavian = null;\n\nexport const setToShavian = (fn) => {\n  toShavian = fn;\n};\n\n// Shavian shorthand words (single character representations)\nconst SHAVIAN_SHORTHAND = {\n  \"ğ‘\": \"the\",\n  \"ğ‘\": \"of\",\n  \"ğ‘¯\": \"and\",\n  \"ğ‘‘\": \"to\",\n  \"ğ‘©\": \"a\",\n};\n\n// Shavian to ARPABET mapping\nconst SHAVIAN_TO_ARPABET = {\n  // Shavian-Only Punctuation\n  \"Â·\": \"\",\n\n  // Consonants\n  \"ğ‘\": \"P\",\n  \"ğ‘š\": \"B\",\n  \"ğ‘‘\": \"T\",\n  \"ğ‘›\": \"D\",\n  \"ğ‘’\": \"K\",\n  \"ğ‘œ\": \"G\",\n  \"ğ‘“\": \"F\",\n  \"ğ‘\": \"V\",\n  \"ğ‘”\": \"TH\",\n  \"ğ‘\": \"DH\",\n  \"ğ‘•\": \"S\",\n  \"ğ‘Ÿ\": \"Z\",\n  \"ğ‘–\": \"SH\",\n  \"ğ‘ \": \"ZH\",\n  \"ğ‘—\": \"CH\",\n  \"ğ‘¡\": \"JH\",\n  \"ğ‘£\": \"HH\",\n  \"ğ‘¢\": \"W\",\n  \"ğ‘˜\": \"Y\",\n  \"ğ‘®\": \"R\",\n  \"ğ‘¤\": \"L\",\n  \"ğ‘¥\": \"M\",\n  \"ğ‘¯\": \"N\",\n  \"ğ‘™\": \"NG\",\n\n  // Vowels\n  \"ğ‘°\": \"IY\", // eat\n  \"ğ‘¦\": \"IH\", // if\n  \"ğ‘±\": \"EY\", // age\n  \"ğ‘§\": \"EH\", // egg\n  \"ğ‘¨\": \"AE\", // ash\n  \"ğ‘­\": \"AA\", // ah\n  \"ğ‘·\": \"AO\", // awe\n  \"ğ‘´\": \"OW\", // oak\n  \"ğ‘«\": \"UH\", // wool\n  \"ğ‘µ\": \"UW\", // ooze\n  \"ğ‘³\": \"AH\", // up\n  \"ğ‘©\": \"AX\", // schwa\n  \"ğ‘²\": \"AY\", // ice\n  \"ğ‘¬\": \"AW\", // out\n  \"ğ‘¶\": \"OY\", // oil\n\n  // Rhotic Vowels (compound)\n  \"ğ‘»\": \"ER\", // err\n  \"ğ‘¸\": \"AA+R\", // are\n  \"ğ‘¹\": \"AO+R\", // or\n  \"ğ‘º\": \"EH+R\", // air\n  \"ğ‘½\": \"IH+R\", // ear\n  \"ğ‘¼\": \"AX+R\", // schwa + r\n  \"ğ‘¾\": \"IY+AX\", // IY + schwa\n  \"ğ‘¿\": \"Y+UW\", // Y + UW\n};\n\nconst ARPABET_TO_SHAVIAN = Object.fromEntries(\n  Object.entries(SHAVIAN_TO_ARPABET).map(([shavian, arpabet]) => [\n    arpabet,\n    shavian,\n  ])\n);\n\nexport const shavianateParagraphs = (paragraphs) =>\n  paragraphs.split(\"\\n\").map(toShavian).join(\"\\n\");\n\nexport const getArpabetFromShavian = (word) => {\n  const clean = word.replace(/[^\\u{10450}-\\u{1047F}]/gu, \"\");\n  const chars = [...clean];\n  const arpabet = chars.map((c) => SHAVIAN_TO_ARPABET[c] ?? c).join(\" \");\n  return chars.length === 1 && SHAVIAN_SHORTHAND[clean]\n    ? `${arpabet} (${SHAVIAN_SHORTHAND[clean]})`\n    : arpabet;\n};\n\n// Convert quotes to guillemets - keep other punctuation as-is\nconst convertQuotesToGuillemets = (text, quoteState) =>\n  text.replace(/[\"\\u201C\\u201D]/g, () => {\n    const g = quoteState.isOpen ? \"Â«\" : \"Â»\";\n    quoteState.isOpen = !quoteState.isOpen;\n    return g;\n  });\n\nconst makeWhitespaceToken = (str) => ({\n  type: TokenType.WHITESPACE,\n  english: str,\n  shavian: str,\n  index: null,\n});\n\nconst makePunctuationToken = (str, quoteState) => ({\n  type: TokenType.PUNCTUATION,\n  english: str,\n  shavian: convertQuotesToGuillemets(str, quoteState),\n  index: null,\n});\n\nconst makeWordToken = (word, wordCount) => ({\n  type: TokenType.WORD,\n  english: word,\n  shavian:\n    word.toLowerCase() === \"a\" ? ARPABET_TO_SHAVIAN[\"AX\"] : toShavian(word),\n  index: wordCount,\n});\n\n// Helper: Tokenize a single segment, either whitespace, punctuation, or word (with pre/post)\nfunction tokenizeSegment(part, quoteState, wordCountRef) {\n  const tokens = [];\n  if (/^\\s+$/.test(part)) {\n    tokens.push(makeWhitespaceToken(part));\n    return tokens;\n  }\n  const match = part.match(/^([^\\w]*)(\\w[\\w'\\u2019'-]*\\w|\\w)?([^\\w]*)$/);\n  if (!match || !match[2]) {\n    tokens.push(makePunctuationToken(part, quoteState));\n    return tokens;\n  }\n  const [, pre, word, post] = match;\n  if (pre) tokens.push(makePunctuationToken(pre, quoteState));\n  tokens.push(makeWordToken(word, wordCountRef.value++));\n  if (post) tokens.push(makePunctuationToken(post, quoteState));\n  return tokens;\n}\n\n// Tokenize a single line into a flat array of tokens.\nconst tokenizeLine = (line, quoteState, existingWordCount = 0) => {\n  const tokens = [];\n  let wordCountRef = { value: existingWordCount };\n  // split including whitespace as separate tokens\n  for (const part of line.split(/(\\s+)/)) {\n    if (!part) continue;\n    const segTokens = tokenizeSegment(part, quoteState, wordCountRef);\n    tokens.push(...segTokens);\n  }\n  return { tokens, wordCount: wordCountRef.value };\n};\n\nexport const tokenizeText = (text) => {\n  const lines = text.split(\"\\n\");\n  const quoteState = { isOpen: true };\n  let tokens = [];\n  let wordCount = 0;\n  lines.forEach((line, i) => {\n    if (i > 0) {\n      tokens.push({\n        type: TokenType.NEWLINE,\n        english: \"\\n\",\n        shavian: \"\\n\",\n        index: null,\n      });\n    }\n    const result = tokenizeLine(line, quoteState, wordCount);\n    tokens = tokens.concat(result.tokens);\n    wordCount = result.wordCount;\n  });\n  return tokens;\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport \"../styles/shavianator.css\";\nimport { getArpabetFromShavian, tokenizeText, TokenType, setToShavian } from \"./shavianating\";\n\nexport default function Shavianator() {\n  const [text, setText] = useState(\"\");\n  const [copied, setCopied] = useState(false);\n  const [hovered, setHovered] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [tooltip, setTooltip] = useState({\n    show: false,\n    word: \"\",\n    arpabet: \"\",\n    x: 0,\n    y: 0,\n  });\n\n  // Load to-shavian module on mount\n  useEffect(() => {\n    const loadToShavian = async () => {\n      const { default: toShavianFn } = await import(\"to-shavian\");\n      setToShavian(toShavianFn);\n      setIsLoading(false);\n    };\n    loadToShavian();\n  }, []);\n\n  const textareaRef = useRef(),\n    inputOverlayRef = useRef(),\n    outputRef = useRef(),\n    tooltipRef = useRef();\n  const tokens = tokenizeText(text);\n\n  // Sync scroll between textareas\n  useEffect(() => {\n    const textarea = textareaRef.current,\n      inputOverlay = inputOverlayRef.current,\n      outputArea = outputRef.current;\n    if (!textarea || !inputOverlay || !outputArea) return;\n\n    const handleTextareaScroll = () => {\n      inputOverlay.scrollTop = textarea.scrollTop;\n      inputOverlay.scrollLeft = textarea.scrollLeft;\n      outputArea.scrollTop =\n        (textarea.scrollTop / (textarea.scrollHeight - textarea.clientHeight || 1)) *\n        (outputArea.scrollHeight - outputArea.clientHeight);\n    };\n\n    const handleOverlayScroll = () => {\n      textarea.scrollTop = inputOverlay.scrollTop;\n      textarea.scrollLeft = inputOverlay.scrollLeft;\n      outputArea.scrollTop =\n        (textarea.scrollTop / (textarea.scrollHeight - textarea.clientHeight || 1)) *\n        (outputArea.scrollHeight - outputArea.clientHeight);\n    };\n\n    const handleOutputScroll = () => {\n      textarea.scrollTop =\n        (outputArea.scrollTop / (outputArea.scrollHeight - outputArea.clientHeight || 1)) *\n        (textarea.scrollHeight - textarea.clientHeight);\n      inputOverlay.scrollTop = textarea.scrollTop;\n    };\n\n    textarea.addEventListener(\"scroll\", handleTextareaScroll);\n    inputOverlay.addEventListener(\"scroll\", handleOverlayScroll);\n    outputArea.addEventListener(\"scroll\", handleOutputScroll);\n\n    return () => {\n      textarea.removeEventListener(\"scroll\", handleTextareaScroll);\n      inputOverlay.removeEventListener(\"scroll\", handleOverlayScroll);\n      outputArea.removeEventListener(\"scroll\", handleOutputScroll);\n    };\n  }, []);\n\n  // Copy output to clipboard\n  const handleCopy = () => {\n    navigator.clipboard.writeText(tokens.map((t) => t.shavian).join(\"\"));\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Place caret on word click\n  const handleWordClick = (e, token) => {\n    if (!textareaRef.current) return;\n    textareaRef.current.focus();\n    let pos = 0;\n    for (const t of tokens) {\n      if (t === token) break;\n      pos += t.type === TokenType.NEWLINE ? 1 : t.english.length;\n    }\n    textareaRef.current.setSelectionRange(pos, pos);\n    e.stopPropagation();\n  };\n\n  // Tooltip position correction\n  useEffect(() => {\n    if (!tooltip.show || !tooltipRef.current) return;\n    const rect = tooltipRef.current.getBoundingClientRect(),\n      w = window.innerWidth;\n    let x = tooltip.x;\n    if (rect.left < 10) x += 10 - rect.left;\n    else if (rect.right > w - 10) x -= rect.right - (w - 10);\n    if (x !== tooltip.x) setTooltip((t) => ({ ...t, x }));\n  }, [tooltip.show, tooltip.x]);\n\n  // Tooltip display events\n  const handleMouseEnter = (e, shavian, idx, isShavian) => {\n    setHovered(idx);\n    const arpabet = getArpabetFromShavian(shavian);\n    const shavianChars = [...shavian.replace(/[^\\u{10450}-\\u{1047F}]/gu, \"\")];\n    if (!shavianChars.length || !arpabet.split(\" \").filter(Boolean).length)\n      return;\n    let rect;\n    if (isShavian) rect = e.target.getBoundingClientRect();\n    else\n      rect = document\n        .querySelector(\n          `.shavianator-output .shavian-word[data-word-index=\"${idx}\"]`\n        )\n        ?.getBoundingClientRect();\n    if (rect)\n      setTooltip({\n        show: true,\n        word: shavian,\n        arpabet,\n        x: rect.left + rect.width / 2,\n        y: rect.top,\n      });\n  };\n  const handleMouseLeave = () => {\n    setHovered(null);\n    setTooltip({ show: false, word: \"\", arpabet: \"\", x: 0, y: 0 });\n  };\n\n  // Token renderer\n  const renderTokens = (isShavian) =>\n    tokens.map((token, i) => {\n      const text = isShavian ? token.shavian : token.english;\n      if (token.type === TokenType.NEWLINE) return <br key={i} />;\n      if (token.type !== TokenType.WORD) return <span key={i}>{text}</span>;\n      return (\n        <span\n          key={i}\n          className={`shavian-word${\n            hovered === token.index ? \" highlighted\" : \"\"\n          } ${isShavian ? \"shavian-text\" : \"english-text\"}`}\n          data-word-index={token.index}\n          onMouseEnter={(e) =>\n            handleMouseEnter(e, token.shavian, token.index, isShavian)\n          }\n          onMouseLeave={handleMouseLeave}\n          onClick={(e) => !isShavian && handleWordClick(e, token)}\n        >\n          {text}\n        </span>\n      );\n    });\n\n  // Tooltip grid component\n  const TooltipGrid = ({ word, arpabet }) => {\n    const shavianChars = [...word.replace(/[^\\u{10450}-\\u{1047F}]/gu, \"\")];\n    const phonemes = arpabet.split(\" \").filter(Boolean);\n    return (\n      <div className=\"shavian-tooltip-grid\">\n        <div className=\"shavian-tooltip-row shavian-tooltip-word\">\n          {shavianChars.map((c, i) => (\n            <div key={i} className=\"shavian-tooltip-cell shavian-text\">\n              {c}\n            </div>\n          ))}\n        </div>\n        <div className=\"shavian-tooltip-row shavian-tooltip-pronunciation\">\n          {phonemes.map((p, i) => (\n            <div key={i} className=\"shavian-tooltip-cell\">\n              {p}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div id=\"app-base\" className=\"shavianator-colors\">\n        <div className=\"content-wrapper shavianator-colors\">\n          <div className=\"shavianator-loading\">\n            <div className=\"shavianator-spinner\"></div>\n            <p>Loading Shavian...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div id=\"app-base\" className=\"shavianator-colors\">\n      <div className=\"content-wrapper shavianator-colors\">\n        <div className=\"shavianator-header\">\n          <h2 className=\"title shavianator-colors\">shavianator</h2>\n          <p className=\"shavianator-description\">\n            a tool for transliterating english to{\" \"}\n            <a\n              href=\"https://en.wikipedia.org/wiki/Shavian_alphabet\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              shavian\n            </a>\n            .\n            <br />\n            <span className=\"shavian-text\">\n              ğ‘± ğ‘‘ğ‘µğ‘¤ ğ‘“ğ‘¸ ğ‘‘ğ‘®ğ‘¨ğ‘¯ğ‘Ÿğ‘¤ğ‘¦ğ‘‘ğ‘©ğ‘®ğ‘±ğ‘‘ğ‘¦ğ‘™ ğ‘¦ğ‘™ğ‘œğ‘¤ğ‘¦ğ‘– ğ‘‘{\" \"}\n            </span>\n            <a\n              href=\"https://en.wikipedia.org/wiki/Shavian_alphabet\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"shavian-text\"\n            >\n              ğ‘–ğ‘±ğ‘ğ‘°ğ‘©ğ‘¯\n            </a>\n            <span className=\"shavian-text\">.</span>\n          </p>\n        </div>\n        <div className=\"shavianator-layout\">\n          <div className=\"shavianator-input-container\">\n            <label className=\"shavianator-label\">english</label>\n            <div className=\"shavianator-input-wrapper\">\n              <textarea\n                ref={textareaRef}\n                className=\"shavianator-input shavianator-textarea\"\n                placeholder=\"Enter text to shavianate\"\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                rows={5}\n              />\n              <div\n                ref={inputOverlayRef}\n                className=\"shavianator-input shavianator-input-overlay\"\n              >\n                {renderTokens(false)}\n              </div>\n            </div>\n          </div>\n          <div className=\"shavianator-output-container\">\n            <label className=\"shavianator-label\">shavian</label>\n            <div className=\"shavianator-output\" ref={outputRef}>\n              <button\n                className=\"copy-button\"\n                onClick={handleCopy}\n                title={copied ? \"Copied!\" : \"Copy to clipboard\"}\n              >\n                <svg\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  {copied ? (\n                    <path d=\"M20 6L9 17l-5-5\" />\n                  ) : (\n                    <>\n                      <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\" />\n                      <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\" />\n                    </>\n                  )}\n                </svg>\n              </button>\n              {renderTokens(true)}\n              {tooltip.show && (\n                <div\n                  ref={tooltipRef}\n                  className=\"shavian-tooltip\"\n                  style={{\n                    position: \"fixed\",\n                    left: `${tooltip.x}px`,\n                    top: `${tooltip.y}px`,\n                    transform: \"translate(-50%, -100%)\",\n                    marginTop: \"-8px\",\n                  }}\n                >\n                  <TooltipGrid word={tooltip.word} arpabet={tooltip.arpabet} />\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["TokenType","WORD","PUNCTUATION","WHITESPACE","NEWLINE","toShavian","setToShavian","fn","SHAVIAN_SHORTHAND","SHAVIAN_TO_ARPABET","ARPABET_TO_SHAVIAN","Object","fromEntries","entries","map","_ref","shavian","arpabet","getArpabetFromShavian","word","clean","replace","chars","c","_SHAVIAN_TO_ARPABET$c","join","length","concat","convertQuotesToGuillemets","text","quoteState","g","isOpen","makePunctuationToken","str","type","english","index","tokenizeSegment","part","wordCountRef","tokens","test","push","match","pre","post","makeWordToken","wordCount","toLowerCase","value","tokenizeText","lines","split","forEach","line","i","result","arguments","undefined","segTokens","tokenizeLine","Shavianator","setText","useState","copied","setCopied","hovered","setHovered","isLoading","setIsLoading","tooltip","setTooltip","show","x","y","useEffect","async","default","toShavianFn","loadToShavian","textareaRef","useRef","inputOverlayRef","outputRef","tooltipRef","textarea","current","inputOverlay","outputArea","handleTextareaScroll","scrollTop","scrollLeft","scrollHeight","clientHeight","handleOverlayScroll","handleOutputScroll","addEventListener","removeEventListener","rect","getBoundingClientRect","w","window","innerWidth","left","right","t","_objectSpread","handleMouseLeave","renderTokens","isShavian","token","_jsx","children","className","onMouseEnter","e","handleMouseEnter","idx","_document$querySelect","filter","Boolean","target","document","querySelector","width","top","onMouseLeave","onClick","handleWordClick","focus","pos","setSelectionRange","stopPropagation","TooltipGrid","shavianChars","phonemes","_jsxs","p","id","href","rel","ref","placeholder","onChange","rows","handleCopy","navigator","clipboard","writeText","setTimeout","title","height","viewBox","fill","stroke","strokeWidth","d","_Fragment","rx","ry","style","position","transform","marginTop"],"sourceRoot":""}