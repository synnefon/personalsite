{"version":3,"file":"static/js/200.e05decf2.chunk.js","mappings":"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","sources":["lava_lamp/LavaLamp.tsx","util/Audio.js"],"sourcesContent":["import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport \"../styles/lavalamp.css\";\n\nimport musicAudioNoise from \"../assets/lavaLamp/guitar.mp3\";\nimport clickAudioNoise from \"../assets/lavaLamp/click.mp3\";\nimport { PersonalAudio } from \"../util/Audio\";\n\n// --- Types ---\ninterface Particle {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  heat: number; // [0..1]\n}\n\ntype Vec2 = { x: number; y: number };\n\n// --- Constants ---\nconst SIM = {\n  GRAVITY: 0.01,\n  BUOYANCY: 0.04,\n  FRICTION: 0.98,\n\n  HEAT_RATE: 0.005,\n  COOL_RATE: 0.0017,\n  HEAT_CONDUCTION: 0.002,\n\n  HEAT_SOURCE_DISTANCE: 45,\n\n  COHESION_RADIUS: 25,\n  COHESION_STRENGTH: 0.0035,\n\n  MOUSE_HEAT_RADIUS: 100,\n} as const;\n\nconst RENDER = {\n  PARTICLE_RADIUS: 10,\n  PIXEL_SIZE: 6,\n  THRESHOLD: 0.8,\n} as const;\n\nconst CLUMPS = {\n  COUNT: 15,\n  RADIUS: 50,\n  TOP_HALF_PROB: 0.3,\n} as const;\n\n// Baseline density: preserves \"look\" across screens, computed once per page load.\nconst BASELINE = {\n  WIDTH: 1920,\n  HEIGHT: 1080,\n  PARTICLES: 1200,\n} as const;\n\n// --- Speed control (indexed slider) ---\nconst SPEED = {\n  MIN: 0.0, // per request\n  MAX: 5,\n  DEFAULT: 1.0,\n  STEPS: 10, // odd => default lands centered\n} as const;\n\n// --- replace heatToRGB with this (outside component) ---\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } {\n  const h = hex.trim().replace(\"#\", \"\");\n  if (h.length === 3) {\n    const r = parseInt(h[0] + h[0], 16);\n    const g = parseInt(h[1] + h[1], 16);\n    const b = parseInt(h[2] + h[2], 16);\n    return { r, g, b };\n  }\n  if (h.length === 6) {\n    const r = parseInt(h.slice(0, 2), 16);\n    const g = parseInt(h.slice(2, 4), 16);\n    const b = parseInt(h.slice(4, 6), 16);\n    return { r, g, b };\n  }\n  return { r: 255, g: 221, b: 0 };\n}\n\n\nfunction lerpInt(a: number, b: number, t: number): number {\n  const v = a + (b - a) * t;\n  return v < 0 ? 0 : v > 255 ? 255 : Math.round(v);\n}\n\nfunction heatToRGBFromPalette(\n  heat: number,\n  lowHex: string,\n  highHex: string\n): { r: number; g: number; b: number } {\n  const t = clamp01(heat);\n  const lo = hexToRgb(lowHex);\n  const hi = hexToRgb(highHex);\n  return {\n    r: lerpInt(lo.r, hi.r, t),\n    g: lerpInt(lo.g, hi.g, t),\n    b: lerpInt(lo.b, hi.b, t),\n  };\n}\n\nfunction computeParticleCount(width: number, height: number): number {\n  const baselineArea = BASELINE.WIDTH * BASELINE.HEIGHT;\n  const currentArea = width * height;\n\n  const density = BASELINE.PARTICLES / baselineArea;\n  const scaled = Math.round(currentArea * density);\n\n  return Math.max(200, Math.min(2000, scaled));\n}\n\n// --- Persisted audio position ---\nconst MUSIC_TIME_KEY = \"lavaLamp.musicTimeSeconds\";\n\nfunction readSavedMusicTimeSeconds(): number {\n  try {\n    const raw = localStorage.getItem(MUSIC_TIME_KEY);\n    if (!raw) return 0;\n    const v = Number(raw);\n    return Number.isFinite(v) && v >= 0 ? v : 0;\n  } catch {\n    return 0;\n  }\n}\n\nfunction writeSavedMusicTimeSeconds(seconds: number) {\n  try {\n    if (!Number.isFinite(seconds) || seconds < 0) return;\n    localStorage.setItem(MUSIC_TIME_KEY, String(seconds));\n  } catch {\n    // ignore\n  }\n}\n\nfunction lerp(a: number, b: number, t: number) {\n  return a + (b - a) * t;\n}\n\nfunction clampInt(v: number, lo: number, hi: number) {\n  return v < lo ? lo : v > hi ? hi : v;\n}\n\n// Note: MIN=0 is special; we treat index 0 as \"paused-ish\" (dt=0) and\n// map indices 1..STEPS-1 into (0..MAX] smoothly in log space.\nfunction indexToSpeed(idx: number): number {\n  if (idx <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  if (steps <= 1) return SPEED.DEFAULT;\n\n  const t = (idx - 1) / (steps - 2); // idx=1 => t=0, idx=steps-1 => t=1\n  const minPositive = 0.25; // feel-good floor for nonzero speeds\n  const minLog = Math.log(minPositive);\n  const maxLog = Math.log(SPEED.MAX);\n  return Math.exp(lerp(minLog, maxLog, t));\n}\n\nfunction speedToNearestIndex(speed: number): number {\n  if (speed <= 0) return 0;\n\n  const steps = SPEED.STEPS;\n  let best = 1;\n  let bestErr = Infinity;\n  const target = Math.log(speed);\n\n  for (let i = 1; i < steps; i++) {\n    const s = indexToSpeed(i);\n    const err = Math.abs(Math.log(s) - target);\n    if (err < bestErr) {\n      bestErr = err;\n      best = i;\n    }\n  }\n  return best;\n}\n\n// --- Utils ---\nfunction clamp01(v: number): number {\n  return v < 0 ? 0 : v > 1 ? 1 : v;\n}\n\nfunction hypot2(dx: number, dy: number): number {\n  return Math.hypot(dx, dy);\n}\n\nfunction randInCircle(radius: number): Vec2 {\n  const angle = Math.random() * Math.PI * 2;\n  const r = Math.random() * radius;\n  return { x: Math.cos(angle) * r, y: Math.sin(angle) * r };\n}\n\nfunction setCanvasToWindow(canvas: HTMLCanvasElement) {\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n}\n\nfunction bounceInBounds(p: Particle, width: number, height: number) {\n  if (p.x < 0) {\n    p.x = 0;\n    p.vx *= -0.5;\n  } else if (p.x > width) {\n    p.x = width;\n    p.vx *= -0.5;\n  }\n\n  if (p.y < 0) {\n    p.y = 0;\n    p.vy *= -0.5;\n  } else if (p.y > height) {\n    p.y = height;\n    p.vy *= -0.5;\n  }\n}\n\nfunction clampAllToBounds(particles: Particle[], width: number, height: number) {\n  for (let i = 0; i < particles.length; i++) {\n    bounceInBounds(particles[i], width, height);\n  }\n}\n\n// --- Init ---\nfunction createParticles(width: number, height: number, count: number): Particle[] {\n  const particles: Particle[] = [];\n  const particlesPerClump = Math.floor(count / CLUMPS.COUNT);\n\n  for (let i = 0; i < CLUMPS.COUNT; i++) {\n    const centerX = Math.random() * width;\n    const centerY =\n      Math.random() < CLUMPS.TOP_HALF_PROB\n        ? Math.random() * height * 0.5\n        : height * 0.5 + Math.random() * height * 0.5;\n\n    const clumpHeat = Math.random();\n    for (let j = 0; j < particlesPerClump; j++) {\n      const offset = randInCircle(CLUMPS.RADIUS);\n      particles.push({\n        x: centerX + offset.x,\n        y: centerY + offset.y,\n        vx: 0,\n        vy: 0,\n        heat: clumpHeat,\n      });\n    }\n  }\n\n  while (particles.length < count) {\n    particles.push({\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: 0,\n      vy: 0,\n      heat: 0,\n    });\n  }\n\n  return particles;\n}\n\n// --- Physics (single pair-pass on post-move positions, time-scaled) ---\nexport function stepSimulationOnePairPass(\n  particles: Particle[],\n  width: number,\n  height: number,\n  pointerDown: boolean,\n  pointerPos: Vec2,\n  neighborCounts: Uint16Array,\n  timeScale: number\n) {\n  // dt=0 => frozen (but still renders)\n  const dt = Math.max(0, Math.min(4.0, timeScale));\n\n  // Pass 1: integrate + pointer heat + reset neighbors\n  for (let i = 0; i < particles.length; i++) {\n    const p = particles[i];\n\n    applyBuoyancyAndGravity(p, dt);\n    applyFriction(p, dt);\n    integrate(p, dt);\n\n    if (pointerDown) applyPointerHeat(p, pointerPos, dt);\n\n    neighborCounts[i] = 0;\n    bounceInBounds(p, width, height);\n  }\n\n  // Pass 2: pairwise forces + conduction (scaled)\n  if (dt > 0) {\n    for (let i = 0; i < particles.length; i++) {\n      const p1 = particles[i];\n      for (let j = i + 1; j < particles.length; j++) {\n        const p2 = particles[j];\n\n        const dx = p2.x - p1.x;\n        const dy = p2.y - p1.y;\n        const d = hypot2(dx, dy);\n\n        if (d > 0 && d < SIM.COHESION_RADIUS) {\n          neighborCounts[i]++;\n          neighborCounts[j]++;\n\n          applyCohesionImpulse(p1, p2, dx, dy, d, dt);\n          applyHeatConduction(p1, p2, dt);\n        }\n      }\n    }\n\n    // Pass 3: heat source / cooling (scaled)\n    for (let i = 0; i < particles.length; i++) {\n      const p = particles[i];\n      applyBottomHeatOrAirCooling(p, height, neighborCounts[i], dt);\n      p.heat = clamp01(p.heat);\n    }\n  } else {\n    // dt == 0: still clamp heat into [0,1] to avoid drift from other callers\n    for (let i = 0; i < particles.length; i++) {\n      particles[i].heat = clamp01(particles[i].heat);\n    }\n  }\n\n  clampAllToBounds(particles, width, height);\n}\n\nfunction applyBuoyancyAndGravity(p: Particle, dt: number) {\n  if (dt === 0) return;\n  const buoyancy = p.heat * p.heat * SIM.BUOYANCY;\n  p.vy += (SIM.GRAVITY - buoyancy) * dt;\n}\n\nfunction applyFriction(p: Particle, dt: number) {\n  if (dt === 0) return;\n  const f = Math.pow(SIM.FRICTION, dt);\n  p.vx *= f;\n  p.vy *= f;\n}\n\nfunction integrate(p: Particle, dt: number) {\n  if (dt === 0) return;\n  p.x += p.vx * dt;\n  p.y += p.vy * dt;\n}\n\nfunction applyPointerHeat(p: Particle, pointerPos: Vec2, dt: number) {\n  const dx = p.x - pointerPos.x;\n  const dy = p.y - pointerPos.y;\n  const d = hypot2(dx, dy);\n\n  if (d < SIM.MOUSE_HEAT_RADIUS) {\n    const intensity = 1 - d * (1 / SIM.MOUSE_HEAT_RADIUS);\n    p.heat += SIM.HEAT_RATE * 2 * intensity * (dt === 0 ? 1 : dt);\n  }\n}\n\nfunction applyCohesionImpulse(\n  p1: Particle,\n  p2: Particle,\n  dx: number,\n  dy: number,\n  d: number,\n  dt: number\n) {\n  const force =\n    SIM.COHESION_STRENGTH * (1 - d * (1 / SIM.COHESION_RADIUS));\n\n  const invD = 1 / d;\n  const fx = dx * invD * force * dt;\n  const fy = dy * invD * force * dt;\n\n  p1.vx += fx;\n  p1.vy += fy;\n  p2.vx -= fx;\n  p2.vy -= fy;\n}\n\nfunction applyHeatConduction(p1: Particle, p2: Particle, dt: number) {\n  const heatDiff = p1.heat - p2.heat;\n  const conduction = heatDiff * SIM.HEAT_CONDUCTION * dt;\n  p1.heat -= conduction;\n  p2.heat += conduction;\n}\n\nfunction applyBottomHeatOrAirCooling(\n  p: Particle,\n  height: number,\n  neighborCount: number,\n  dt: number\n) {\n  const distanceFromBottom = height - p.y;\n\n  if (distanceFromBottom < SIM.HEAT_SOURCE_DISTANCE) {\n    const intensity =\n      1 - distanceFromBottom * (1 / SIM.HEAT_SOURCE_DISTANCE);\n    p.heat += SIM.HEAT_RATE * intensity * dt;\n    return;\n  }\n\n  const maxNeighbors = 8;\n  const neighbors = neighborCount < maxNeighbors ? neighborCount : maxNeighbors;\n  const airExposure = 1 - neighbors / maxNeighbors;\n\n  p.heat -= SIM.COOL_RATE * (0.2 + airExposure * 0.8) * dt;\n}\n\n// --- Render helpers ---\nfunction ensureImageData(\n  ctx: CanvasRenderingContext2D,\n  imageRef: React.MutableRefObject<ImageData | null>,\n  width: number,\n  height: number\n): ImageData {\n  const img = imageRef.current;\n  if (!img || img.width !== width || img.height !== height) {\n    imageRef.current = ctx.createImageData(width, height);\n  }\n  return imageRef.current!;\n}\n\nfunction setPixelBlock(\n  data: Uint8ClampedArray,\n  canvasWidth: number,\n  canvasHeight: number,\n  x: number,\n  y: number,\n  size: number,\n  r: number,\n  g: number,\n  b: number\n) {\n  for (let py = 0; py < size; py++) {\n    const yy = y + py;\n    if (yy >= canvasHeight) continue;\n\n    const rowBase = yy * canvasWidth * 4;\n    for (let px = 0; px < size; px++) {\n      const xx = x + px;\n      if (xx >= canvasWidth) continue;\n\n      const idx = rowBase + xx * 4;\n      data[idx + 0] = r;\n      data[idx + 1] = g;\n      data[idx + 2] = b;\n      data[idx + 3] = 255;\n    }\n  }\n}\n\nfunction influenceAtPoint(p: Particle, x: number, y: number, r2: number): number {\n  const dx = x - p.x;\n  const dy = y - p.y;\n  const distSq = dx * dx + dy * dy;\n  return r2 / (distSq + 1);\n}\n\nfunction drawMetaballs(\n  imageData: ImageData,\n  particles: Particle[],\n  canvasWidth: number,\n  canvasHeight: number,\n  lowColorHex: string,\n  highColorHex: string\n) {\n\n  const data = imageData.data;\n  data.fill(0);\n\n  const pixelSize = RENDER.PIXEL_SIZE;\n  const threshold = RENDER.THRESHOLD;\n  const r2 = RENDER.PARTICLE_RADIUS * RENDER.PARTICLE_RADIUS;\n\n  for (let y = 0; y < canvasHeight; y += pixelSize) {\n    for (let x = 0; x < canvasWidth; x += pixelSize) {\n      let influenceSum = 0;\n      let heatWeightedSum = 0;\n\n      for (let i = 0; i < particles.length; i++) {\n        const p = particles[i];\n        const influence = influenceAtPoint(p, x, y, r2);\n        influenceSum += influence;\n        heatWeightedSum += influence * p.heat;\n      }\n\n      if (influenceSum <= threshold) continue;\n\n      const heat = heatWeightedSum / influenceSum;\n      const { r, g, b } = heatToRGBFromPalette(heat, lowColorHex, highColorHex);\n\n      setPixelBlock(data, canvasWidth, canvasHeight, x, y, pixelSize, r, g, b);\n    }\n  }\n}\n\nfunction renderFrame(\n  canvas: HTMLCanvasElement,\n  particles: Particle[],\n  imageRef: React.MutableRefObject<ImageData | null>,\n  lowColorHex: string,\n  highColorHex: string\n) {\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) return;\n\n  ctx.fillStyle = \"#000\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  const imageData = ensureImageData(ctx, imageRef, canvas.width, canvas.height);\n  drawMetaballs(imageData, particles, canvas.width, canvas.height, lowColorHex, highColorHex);\n  ctx.putImageData(imageData, 0, 0);\n}\n\n// --- Component ---\nexport default function LavaLamp(): ReactElement {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const rafRef = useRef<number | null>(null);\n\n  const particlesRef = useRef<Particle[]>([]);\n  const imageRef = useRef<ImageData | null>(null);\n  const neighborCountsRef = useRef<Uint16Array>(new Uint16Array(0));\n  const particleCountRef = useRef<number | null>(null);\n\n  const gameMusic = useMemo(() => new PersonalAudio(musicAudioNoise, true), []);\n  const clickSound = useMemo(() => new PersonalAudio(clickAudioNoise, false), []);\n\n  const [hasStarted, setHasStarted] = useState(false);\n\n  const pointerDownRef = useRef(false);\n  const pointerPosRef = useRef<Vec2>({ x: 0, y: 0 });\n\n  // Speed slider state\n  const defaultSpeedIdx = useMemo(\n    () => speedToNearestIndex(SPEED.DEFAULT),\n    []\n  );\n  const [speedIdx, setSpeedIdx] = useState<number>(defaultSpeedIdx);\n  const speedRef = useRef<number>(SPEED.DEFAULT);\n\n  useEffect(() => {\n    speedRef.current = indexToSpeed(speedIdx);\n  }, [speedIdx]);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  // add near your other callbacks (uses your existing click sound)\n  const toggleMenu = useCallback(() => {\n    setMenuOpen((v) => !v);\n  }, []);\n\n  const [volume, setVolume] = useState(1.0);\n\n  useEffect(() => {\n    gameMusic.volume = volume;\n  }, [volume, gameMusic]);\n\n  // --- add state (in component) ---\n  const lavaLowColor = useRef(\"#ffdd00\");\n  const lavaHighColor = useRef(\"#ff5500\");\n\n  const initializeParticlesOnce = useCallback(() => {\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n\n    if (particleCountRef.current === null) {\n      particleCountRef.current = computeParticleCount(w, h);\n    }\n\n    const count = particleCountRef.current;\n    particlesRef.current = createParticles(w, h, count);\n    neighborCountsRef.current = new Uint16Array(count);\n  }, []);\n\n  const saveMusicPosition = useCallback(() => {\n    writeSavedMusicTimeSeconds(gameMusic.currentTime ?? 0);\n  }, [gameMusic]);\n\n  useEffect(() => {\n    if (!hasStarted) return;\n\n    const tick = () => saveMusicPosition();\n    const id = window.setInterval(tick, 1000);\n\n    const onPageHide = () => saveMusicPosition();\n    const onVisibilityChange = () => {\n      if (document.visibilityState === \"hidden\") saveMusicPosition();\n    };\n\n    window.addEventListener(\"pagehide\", onPageHide);\n    document.addEventListener(\"visibilitychange\", onVisibilityChange);\n\n    return () => {\n      window.clearInterval(id);\n      window.removeEventListener(\"pagehide\", onPageHide);\n      document.removeEventListener(\"visibilitychange\", onVisibilityChange);\n    };\n  }, [hasStarted, saveMusicPosition]);\n\n  useEffect(() => {\n    return () => {\n      saveMusicPosition();\n\n      gameMusic.pause();\n      gameMusic.volume = 0;\n      gameMusic.reset();\n\n      clickSound.pause();\n      clickSound.volume = 0;\n      clickSound.reset();\n    };\n  }, [gameMusic, clickSound, saveMusicPosition]);\n\n  const update = useCallback(() => {\n    stepSimulationOnePairPass(\n      particlesRef.current,\n      window.innerWidth,\n      window.innerHeight,\n      pointerDownRef.current,\n      pointerPosRef.current,\n      neighborCountsRef.current,\n      speedRef.current\n    );\n  }, []);\n\n  const draw = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    renderFrame(\n      canvas,\n      particlesRef.current,\n      imageRef,\n      lavaLowColor.current,\n      lavaHighColor.current\n    );\n  }, []);\n\n  const animate = useCallback(() => {\n    // runs forever after Start (speed 0 freezes motion)\n    update();\n    draw();\n    rafRef.current = requestAnimationFrame(animate);\n  }, [update, draw]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      const canvas = canvasRef.current;\n      if (!canvas) return;\n      setCanvasToWindow(canvas);\n      imageRef.current = null;\n\n      if (hasStarted) draw();\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [draw, hasStarted]);\n\n  // Pointer handling\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const toLocal = (e: PointerEvent): Vec2 => {\n      const rect = canvas.getBoundingClientRect();\n      return { x: e.clientX - rect.left, y: e.clientY - rect.top };\n    };\n\n    const onDown = (e: PointerEvent) => {\n      pointerDownRef.current = true;\n      pointerPosRef.current = toLocal(e);\n    };\n    const onMove = (e: PointerEvent) => {\n      pointerPosRef.current = toLocal(e);\n    };\n    const onUp = () => {\n      pointerDownRef.current = false;\n    };\n\n    canvas.addEventListener(\"pointerdown\", onDown);\n    window.addEventListener(\"pointermove\", onMove);\n    window.addEventListener(\"pointerup\", onUp);\n    window.addEventListener(\"pointercancel\", onUp);\n\n    return () => {\n      canvas.removeEventListener(\"pointerdown\", onDown);\n      window.removeEventListener(\"pointermove\", onMove);\n      window.removeEventListener(\"pointerup\", onUp);\n      window.removeEventListener(\"pointercancel\", onUp);\n    };\n  }, []);\n\n  const playClick = useCallback(() => {\n    try {\n      clickSound.volume = 1.0;\n      clickSound.currentTime = 0;\n      clickSound.reset();\n      clickSound.play();\n    } catch {\n      // ignore\n    }\n  }, [clickSound]);\n\n  const resumeMusicFromSavedTime = useCallback(() => {\n    const t = readSavedMusicTimeSeconds();\n    try {\n      const duration = (gameMusic as any).duration as number | undefined;\n      if (typeof duration === \"number\" && Number.isFinite(duration) && duration > 0) {\n        gameMusic.currentTime = t % duration;\n      } else {\n        gameMusic.currentTime = t;\n      }\n    } catch {\n      // ignore\n    }\n  }, [gameMusic]);\n\n  const startLamp = useCallback(() => {\n    playClick();\n\n    if (!hasStarted) {\n      setHasStarted(true);\n      initializeParticlesOnce();\n      requestAnimationFrame(() => draw());\n\n      // start RAF\n      rafRef.current = requestAnimationFrame(animate);\n    }\n\n    // gesture-driven: resume from last saved time, then play\n    resumeMusicFromSavedTime();\n    gameMusic.volume = 1.0;\n    gameMusic.play();\n  }, [\n    animate,\n    draw,\n    gameMusic,\n    hasStarted,\n    initializeParticlesOnce,\n    playClick,\n    resumeMusicFromSavedTime,\n  ]);\n\n  const initialCanvasSize = useMemo(\n    () => ({ w: window.innerWidth, h: window.innerHeight }),\n    []\n  );\n\n  // Labels aligned by pixel position, not grid cells (fixes mismatch)\n  const sliderWrapRef = useRef<HTMLDivElement | null>(null);\n\n  return (\n    <div\n      className=\"lava-lamp-container\"\n    >\n      <canvas\n        ref={canvasRef}\n        className=\"lava-lamp-canvas\"\n        width={initialCanvasSize.w}\n        height={initialCanvasSize.h}\n      />\n\n      {!hasStarted ? (\n        <div className=\"lava-lamp-start-overlay\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-start\"\n            onClick={startLamp}\n            aria-label=\"Start lava lamp\"\n          >\n            START\n          </button>\n        </div>\n      ) : (\n        <div className=\"lava-lamp-controls\">\n          <button\n            type=\"button\"\n            className=\"lava-lamp-menu-toggle\"\n            onClick={toggleMenu}\n            aria-label={menuOpen ? \"Hide menu\" : \"Show menu\"}\n            aria-pressed={menuOpen}\n          >\n            {menuOpen ? \"✕\" : \"☰\"}\n          </button>\n\n          {menuOpen && (\n            <div className=\"lava-lamp-menu\">\n              {/* Speed */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">speed: {speedIdx}</div>\n                </div>\n\n                <div ref={sliderWrapRef} className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={SPEED.STEPS}\n                    step={1}\n                    value={speedIdx}\n                    onChange={(e) =>\n                      setSpeedIdx(clampInt(Number(e.target.value), 0, SPEED.STEPS))\n                    }\n                    aria-label=\"Simulation speed\"\n                  />\n                </div>\n              </div>\n\n              {/* Volume */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">\n                    volume: {Math.round(volume * 100)}%\n                  </div>\n                </div>\n\n                <div className=\"lava-lamp-slider-wrap\">\n                  <input\n                    className=\"lava-lamp-slider\"\n                    type=\"range\"\n                    min={0}\n                    max={1}\n                    step={0.01}\n                    value={volume}\n                    onChange={(e) => setVolume(Number(e.target.value))}\n                    aria-label=\"Music volume\"\n                  />\n                </div>\n              </div>\n\n              {/* Theme color */}\n              <div className=\"lava-lamp-control-block\">\n                <div className=\"lava-lamp-control-header\">\n                  <div className=\"lava-lamp-control-title\">lava colors</div>\n                </div>\n\n                <div className=\"lava-lamp-color-row\">\n                  <label className=\"lava-lamp-color-label\">\n                    low\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaLowColor.current}\n                      onChange={(e) => lavaLowColor.current = e.target.value}\n                      aria-label=\"Lava low color\"\n                    />\n                  </label>\n\n                  <label className=\"lava-lamp-color-label\">\n                    high\n                    <input\n                      className=\"lava-lamp-color-input\"\n                      type=\"color\"\n                      value={lavaHighColor.current}\n                      onChange={(e) => lavaHighColor.current = e.target.value}\n                      aria-label=\"Lava high color\"\n                    />\n                  </label>\n\n                  <button\n                    type=\"button\"\n                    className=\"lava-lamp-color-reset\"\n                    onClick={() => {\n                      lavaLowColor.current = \"#ffdd00\";\n                      lavaHighColor.current = \"#ff5500\";\n                    }}\n                  >\n                    reset\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  isPlaying = () => {\n    return this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["SIM","GRAVITY","BUOYANCY","FRICTION","HEAT_RATE","COOL_RATE","HEAT_CONDUCTION","HEAT_SOURCE_DISTANCE","COHESION_RADIUS","COHESION_STRENGTH","MOUSE_HEAT_RADIUS","RENDER","PARTICLE_RADIUS","PIXEL_SIZE","THRESHOLD","CLUMPS","COUNT","RADIUS","TOP_HALF_PROB","BASELINE","WIDTH","HEIGHT","PARTICLES","SPEED","MIN","MAX","DEFAULT","STEPS","hexToRgb","hex","h","trim","replace","length","r","parseInt","g","b","slice","lerpInt","a","t","v","Math","round","heatToRGBFromPalette","heat","lowHex","highHex","clamp01","lo","hi","MUSIC_TIME_KEY","indexToSpeed","idx","steps","minLog","log","maxLog","exp","lerp","hypot2","dx","dy","hypot","randInCircle","radius","angle","random","PI","x","cos","y","sin","bounceInBounds","p","width","height","vx","vy","stepSimulationOnePairPass","particles","pointerDown","pointerPos","neighborCounts","timeScale","dt","max","min","i","applyBuoyancyAndGravity","applyFriction","integrate","applyPointerHeat","p1","j","p2","d","applyCohesionImpulse","applyHeatConduction","applyBottomHeatOrAirCooling","clampAllToBounds","buoyancy","f","pow","intensity","force","invD","fx","fy","conduction","neighborCount","distanceFromBottom","airExposure","setPixelBlock","data","canvasWidth","canvasHeight","size","py","yy","rowBase","px","xx","influenceAtPoint","r2","renderFrame","canvas","imageRef","lowColorHex","highColorHex","ctx","getContext","fillStyle","fillRect","imageData","img","current","createImageData","ensureImageData","fill","pixelSize","threshold","influenceSum","heatWeightedSum","influence","drawMetaballs","putImageData","LavaLamp","canvasRef","useRef","rafRef","particlesRef","neighborCountsRef","Uint16Array","particleCountRef","gameMusic","useMemo","PersonalAudio","musicAudioNoise","clickSound","clickAudioNoise","hasStarted","setHasStarted","useState","pointerDownRef","pointerPosRef","defaultSpeedIdx","speed","best","bestErr","Infinity","target","s","err","abs","speedToNearestIndex","speedIdx","setSpeedIdx","speedRef","useEffect","menuOpen","setMenuOpen","toggleMenu","useCallback","volume","setVolume","lavaLowColor","lavaHighColor","initializeParticlesOnce","w","window","innerWidth","innerHeight","baselineArea","currentArea","density","scaled","computeParticleCount","count","particlesPerClump","floor","centerX","centerY","clumpHeat","offset","push","createParticles","saveMusicPosition","_gameMusic$currentTim","seconds","Number","isFinite","localStorage","setItem","String","_unused2","writeSavedMusicTimeSeconds","currentTime","id","setInterval","tick","onPageHide","onVisibilityChange","document","visibilityState","addEventListener","clearInterval","removeEventListener","pause","reset","update","draw","animate","requestAnimationFrame","handleResize","setCanvasToWindow","toLocal","e","rect","getBoundingClientRect","clientX","left","clientY","top","onDown","onMove","onUp","playClick","play","_unused3","resumeMusicFromSavedTime","raw","getItem","_unused","readSavedMusicTimeSeconds","duration","_unused4","startLamp","initialCanvasSize","sliderWrapRef","_jsxs","className","children","_jsx","ref","type","onClick","step","value","onChange","Audio","constructor","src","loop","arguments","undefined","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","readyState","isPlaying","timeLeft"],"sourceRoot":""}