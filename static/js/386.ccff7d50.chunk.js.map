{"version":3,"file":"static/js/386.ccff7d50.chunk.js","mappings":"oLAGO,MAAMA,EAAmBC,IAAqB,IAApB,aAACC,GAAaD,EAC7C,MAAOE,EAAkBC,IAAuBC,EAAAA,EAAAA,YAchD,OAJAC,EAAAA,EAAAA,YAAU,KACRC,SAASC,iBAAiB,aAAcC,IAAQA,EAAEC,gBAAgB,GAAK,CAAEC,SAAQ,GAAQ,GACxF,KAEIC,EAAAA,EAAAA,KAACC,EAAAA,GAAQ,CAACC,UAAU,WAAWC,SAZtBC,IACVb,IAAqBa,EAAMC,WAC3BD,EAAMC,YAAcC,EAAAA,GAAUC,SAElCf,EAAoBY,EAAMC,WAC1Bf,EAAac,EAAMC,WAAU,GAO0B,E,+KCPrDG,EAAO,GACPC,EAAO,GACPC,EAAsB,EAC5B,IAAIC,EAAgB,IAGpB,MAAMC,EAAK,EAAGC,EAAQ,EAAGC,EAAO,EAAGC,EAAO,EACpCC,EAAmB,EACnBC,EAAO,GAEE,SAASC,IACtB,MAAOC,EAAQC,IAAa3B,EAAAA,EAAAA,UAAS,IAC9B4B,EAAUC,IAAe7B,EAAAA,EAAAA,WAAS,IAClC8B,EAAWC,IAAc/B,EAAAA,EAAAA,UAAS,IAClCgC,EAAQC,IAAajC,EAAAA,EAAAA,UAAS,eAC9BkC,EAAaC,IAAkBnC,EAAAA,EAAAA,UAAS,IACxCoC,EAAcC,IAAmBrC,EAAAA,EAAAA,UAAS,GAG3CsC,GAAQC,EAAAA,EAAAA,QAAO,MACfC,GAASD,EAAAA,EAAAA,QAAOrB,GAChBuB,GAAcF,EAAAA,EAAAA,SAAO,GAGrB3B,GAAY2B,EAAAA,EAAAA,QAAOnB,GACnBsB,GAAgBH,EAAAA,EAAAA,QAAOnB,GACvBuB,GAAOJ,EAAAA,EAAAA,QAAO,IACdK,GAAUL,EAAAA,EAAAA,QAAO,IAAIM,KACrBC,GAAaP,EAAAA,EAAAA,QAAO,CAAEQ,KAAM,EAAGC,KAAM,IACrCC,GAAaV,EAAAA,EAAAA,SAAO,GACpBW,GAAcX,EAAAA,EAAAA,SAAO,GAGrBY,GAAYZ,EAAAA,EAAAA,QAAO,IACnBa,GAAcb,EAAAA,EAAAA,QAAO,IAAIM,KACzBQ,GAAcd,EAAAA,EAAAA,QAAO,IAAIe,WAAWtC,EAAOD,IAG3CwC,GAAahB,EAAAA,EAAAA,QAAO,IAGpBiB,GAAWjB,EAAAA,EAAAA,UAEXkB,GAAWC,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcC,IAAa,IACxDC,GAAcH,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcG,IAAgB,IAC9DC,GAAYL,EAAAA,EAAAA,UAAQ,IAAM,IAAIC,EAAAA,EAAcK,GAAgB,IAAO,IAEnEC,EAAW/B,GAAe,IAG1BgC,EAAQA,CAACC,EAAGC,IAAMD,EAAIpD,EAAOqD,EAE7BC,EAAYC,IAAOA,EAAI,GAAK,EAE5BC,EAAe,SAACC,EAAIC,EAAIC,EAAIC,GAAE,IAAEC,EAACC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAC,MADrBG,EAACR,EAAIC,EAAIC,EAAIC,IAAOM,KAAKC,IAAID,KAAKE,IAAIX,EAAKE,GAAKO,KAAKE,IAAIV,EAAKE,IACpCK,CAAcR,EAAIC,EAAIC,EAAIC,IAAOC,EAAI,CAAE,EAcjFQ,GAAW7C,EAAAA,EAAAA,QAAO,MAClB8C,GAAQ9C,EAAAA,EAAAA,QAAO,MACf+C,IAAS/C,EAAAA,EAAAA,QAAO,MAChBgD,IAAQhD,EAAAA,EAAAA,QAAO,MACfiD,IAASjD,EAAAA,EAAAA,QAAO,MAEhBkD,GAAU1E,EAAOS,EACjBkE,GAAU1E,EAAOQ,EAEjBmE,GACE,yBADFA,GAEM,wBAFNA,GAGE,UAHFA,GAIE,UAJFA,GAKE,UALFA,GAMI,UAGJC,GAAgB,SAACC,EAAQC,EAAMC,GAAuC,IAAjC,MAAEC,GAAOnB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAEmB,OAAO,GAC9D,MAAMC,EAAMhB,KAAKC,IAAI,EAAGgB,OAAOC,kBAAoB,IAChCN,EAAOO,QAAUN,EAAOG,GAAOJ,EAAOQ,SAAWN,EAAOE,KAEzEJ,EAAOO,MAAQN,EAAOG,EACtBJ,EAAOQ,OAASN,EAAOE,EACvBJ,EAAOS,MAAMF,MAAK,GAAAG,OAAMT,EAAI,MAC5BD,EAAOS,MAAMD,OAAM,GAAAE,OAAMR,EAAI,OAE/B,MAAMS,EAAMX,EAAOY,WAAW,KAAM,CAAET,UAEtC,OADAQ,EAAIE,aAAaT,EAAK,EAAG,EAAGA,EAAK,EAAG,GAC7BO,CACT,EASMG,GAAWA,CAACH,EAAKrC,EAAGC,EAAGwC,KAC3BJ,EAAIK,UAAYD,EAChBJ,EAAIM,SAAS1C,EAAI5C,EAAM2C,EAAI3C,EAAMA,EAAMA,EAAK,EAExCuF,GAAYA,CAACP,EAAKrC,EAAGC,IAAMoC,EAAIQ,UAAU5C,EAAI5C,EAAM2C,EAAI3C,EAAMA,EAAMA,GAEnEyF,GAAYT,IAEhB,MAAMU,EAfWC,MACjB,MAAMC,EAAKhC,EAASiC,QACpB,IAAKD,EAAI,MAAO,cAChB,MAAMF,EAAKI,iBAAiBF,GAAIG,gBAChC,OAAOL,GAAa,qBAAPA,EAA4BA,EAAK,kBAAkB,EAWrDC,GACXX,EAAIK,UAAYK,EAChBV,EAAIM,SAAS,EAAG,EAAGrB,GAASC,IAG5Bc,EAAIgB,OACJhB,EAAIiB,YAAc9B,GAClBa,EAAIkB,YAAY,CAAC,EAAG,IACpBlB,EAAImB,UAAY,EAChBnB,EAAIoB,YACJ,IAAK,IAAIzD,EAAI,EAAGA,GAAKnD,EAAMmD,IAAK,CAC9B,MAAM0D,EAAI1D,EAAI3C,EAAO,GACrBgF,EAAIsB,OAAO,EAAGD,GAAIrB,EAAIuB,OAAOtC,GAASoC,EACxC,CACA,IAAK,IAAIzD,EAAI,EAAGA,GAAKrD,EAAMqD,IAAK,CAC9B,MAAM4D,EAAI5D,EAAI5C,EAAO,GACrBgF,EAAIsB,OAAOE,EAAG,GAAIxB,EAAIuB,OAAOC,EAAGtC,GAClC,CACAc,EAAIyB,SACJzB,EAAI0B,SAAS,EAGTC,GAAeA,CAAChE,EAAGC,IAAMmB,GAAM8B,SAAWV,GAASpB,GAAM8B,QAASlD,EAAGC,EAAGuB,IACxEyC,GAAWA,KACf,MAAMC,EAAIvF,EAAWuE,QACjB7B,GAAO6B,SAAWgB,EAAEtF,KAAO,GAAG4D,GAASnB,GAAO6B,QAASgB,EAAEtF,IAAKsF,EAAErF,IAAK2C,GAAY,EAEjF2C,GAAYA,KAChB,MAAMD,EAAIvF,EAAWuE,QACrB,IAAK7B,GAAO6B,SAAWgB,EAAEtF,IAAM,EAAG,OAElC,MAAMwF,EAAO5F,EAAK0E,QAAQ1E,EAAK0E,QAAQvC,OAAS,GAC5CyD,GAAQA,EAAKxF,MAAQsF,EAAEtF,KAAOwF,EAAKvF,MAAQqF,EAAErF,KACjD+D,GAAUvB,GAAO6B,QAASgB,EAAEtF,IAAKsF,EAAErF,IAAI,EAEnCwF,GAAmBA,KACvB,IAAKhD,GAAO6B,UAAY1E,EAAK0E,QAAQvC,OAAQ,OAC7C,IAAK,IAAI2D,EAAI,EAAGA,EAAI9F,EAAK0E,QAAQvC,OAAS,EAAG2D,IAAK,CAChD,MAAM,IAAE1F,EAAG,IAAEC,GAAQL,EAAK0E,QAAQoB,GAClC9B,GAASnB,GAAO6B,QAAStE,EAAKC,EAAK2C,GACrC,CACA,MAAM4C,EAAO5F,EAAK0E,QAAQ1E,EAAK0E,QAAQvC,OAAS,GAChD6B,GAASnB,GAAO6B,QAASkB,EAAKxF,IAAKwF,EAAKvF,IAAK2C,GAAY,EAWrD+C,IAAmBC,EAAAA,EAAAA,cAAaC,IACpC,OAAQA,GACN,IAAK,IAAK,IAAK,IAAK,KAAK/H,EAAAA,GAAUgI,IAAKD,EAAM,UAAW,MACzD,IAAK,IAAK,IAAK,IAAK,KAAK/H,EAAAA,GAAUiI,OAAQF,EAAM,YAAa,MAC9D,IAAK,IAAK,IAAK,IAAK,KAAK/H,EAAAA,GAAUkI,KAAMH,EAAM,YAAa,MAC5D,IAAK,IAAK,IAAK,IAAK,KAAK/H,EAAAA,GAAUmI,MAAOJ,EAAM,aAGlD,MAAMK,EACI,YAARL,EAAoBzH,EACV,cAARyH,EAAsBvH,EACZ,cAARuH,EAAsBtH,EACZ,eAARsH,EAAuBxH,EAAQ,KACvC,OAAY,MAAR6H,GACAA,IAAS5E,EAASzD,EAAUyG,SADP,KAElB4B,CAAI,GACV,IAEGC,GAAcC,IAAU,IAADC,EAC3B,GAAY,MAARD,EAAc,OAClB,MAAME,EACJ9F,EAAW8D,QAAQvC,OACfvB,EAAW8D,QAAQ9D,EAAW8D,QAAQvC,OAAS,GACzB,QAD2BsE,EAChD1G,EAAc2E,eAAO,IAAA+B,EAAAA,EAAIxI,EAAUyG,QACtC8B,IAAS9E,EAASgF,KAClB9F,EAAW8D,QAAQvC,QAAUvB,EAAW8D,QAAQ9D,EAAW8D,QAAQvC,OAAS,KAAOqE,GACnF5F,EAAW8D,QAAQvC,OA3JP,GA2J2BvB,EAAW8D,QAAQiC,KAAKH,GAAK,EAIpEI,GAAoBA,CAACpF,EAAGC,KAAOxB,EAAQyE,QAAQmC,IAAItF,EAAMC,EAAGC,IAC5DqF,GAAwBA,CAACtF,EAAGC,KAAOhB,EAAYiE,QAAQmC,IAAItF,EAAMC,EAAGC,IACpEsF,GAA4BA,CAACvF,EAAGC,IAA2C,IAArCf,EAAYgE,QAAQnD,EAAMC,EAAGC,IAYnEuF,GAAgBA,CAACxF,EAAGC,IACxBmF,GAAkBpF,EAAGC,IAPOwF,EAACzF,EAAGC,KAChC,IAAKzB,EAAK0E,QAAQvC,OAAQ,OAAO,EACjC,MAAMyD,EAAO5F,EAAK0E,QAAQ1E,EAAK0E,QAAQvC,OAAS,GAChD,OAAOP,EAAaJ,EAAGC,EAAGmE,EAAKxF,IAAKwF,EAAKvF,IAAK,EAAE,EAKhD4G,CAAsBzF,EAAGC,IACzBqF,GAAsBtF,EAAGC,IACzBsF,GAA0BvF,EAAGC,GAEzByF,GAAoBA,CAAC1F,EAAGC,IAC5BmF,GAAkBpF,EAAGC,IACrBqF,GAAsBtF,EAAGC,IACzBsF,GAA0BvF,EAAGC,IApBL0F,EAAC3F,EAAGC,KAC5B,MAAMiE,EAAIvF,EAAWuE,QACrB,OAAIgB,EAAEtF,IAAM,GACLwB,EAAaJ,EAAGC,EAAGiE,EAAEtF,IAAKsF,EAAErF,IAAK,EAAE,EAkB1C8G,CAAkB3F,EAAGC,GAejB2F,IAAmBpB,EAAAA,EAAAA,cAAY,KACnC,IAAIxE,EAAGC,EAAG4F,EAAQ,EAClB,GAIE,GAHA7F,EAAKc,KAAKgF,SAAWjJ,EAAQ,EAC7BoD,EAAKa,KAAKgF,SAAWlJ,EAAQ,EAC7BiJ,IACIA,EAAQ,IAAK,aACTL,GAAcxF,EAAGC,IAC3BkE,KACAxF,EAAWuE,QAAU,CAAEtE,IAAKoB,EAAGnB,IAAKoB,GACpCgE,IAAU,GAET,IAEG8B,GAAgBA,KACpB,IAAI/F,EAAGC,EAAG4F,EAAQ,EAClB,GAIE,GAHA7F,EAAKc,KAAKgF,SAAWjJ,EAAQ,EAC7BoD,EAAKa,KAAKgF,SAAWlJ,EAAQ,EAC7BiJ,IACIA,EAAQ,IAAK,cACTH,GAAkB1F,EAAGC,IAE/BjB,EAAUkE,QAAQiC,KAAK,CAAEvG,IAAKoB,EAAGnB,IAAKoB,IACtChB,EAAYiE,QAAQ8C,IAAIjG,EAAMC,EAAGC,IACjC+D,GAAahE,EAAGC,GA9MIgG,EAACjG,EAAGC,EAAGiG,KAC3B,IAAK,IAAIC,EAAKnG,EAAI,EAAGmG,GAAMnG,EAAI,EAAGmG,IAChC,IAAK,IAAIC,EAAKnG,EAAI,EAAGmG,GAAMnG,EAAI,EAAGmG,IAAM,CACtC,GAAID,EAAK,GAAKC,EAAK,GAAKD,GAAMtJ,GAAQuJ,GAAMxJ,EAAM,SAClD,MAAM0H,EAAIvE,EAAMoG,EAAIC,GACdpB,EAAO9F,EAAYgE,QAAQoB,GAAK4B,EACtChH,EAAYgE,QAAQoB,GAAKU,EAAO,EAAI,EAAIA,CAC1C,CACF,EAuMAiB,CAAcjG,EAAGC,EAAG,EAAG,EAInBoG,IAAW7B,EAAAA,EAAAA,cAAY,KAE3BhG,EAAK0E,QAAU,GACfzE,EAAQyE,QAAU,IAAIxE,IACtBM,EAAUkE,QAAU,GACpBjE,EAAYiE,QAAU,IAAIxE,IAC1BQ,EAAYgE,QAAU,IAAI/D,WAAWtC,EAAOD,GAGxCsE,EAAMgC,SAAW/B,GAAO+B,UAC1B9B,GAAM8B,QAAUzB,GAAcP,EAAMgC,QAAS5B,GAASC,GAAS,CAAEM,OAAO,IACxER,GAAO6B,QAAUzB,GAAcN,GAAO+B,QAAS5B,GAASC,GAAS,CAAEM,OAAO,IAC1EiB,GAAS1B,GAAM8B,SACf7B,GAAO6B,QAAQL,UAAU,EAAG,EAAGvB,GAASC,KAI1C,IAAK,IAAI+C,EAAI,EAAGA,EAAIxH,EAAqBwH,IACvC9F,EAAK0E,QAAQiC,KAAK,CAAEvG,IAAK,EAAGC,IAAKyF,IACjC7F,EAAQyE,QAAQ8C,IAAIjG,EAAM,EAAGuE,IAI/B5E,EAAY4G,OAAS,EACrBhH,EAASgH,OAAS,EAClB1G,EAAU0G,OAAS,EAEnB5I,GAAY,GACZF,EAAU,GACVf,EAAUyG,QAAUjG,EACpBsB,EAAc2E,QAAUjG,EACxBmC,EAAW8D,QAAU,GACrBpE,EAAWoE,SAAU,EACrBnE,EAAYmE,SAAU,EAEtBmB,KACAuB,IAAkB,GAEjB,CAACtG,EAAUM,EAAWF,EAAakG,KAGhCW,GAAYA,KAChB,GAAIjI,EAAY4E,QAAS,OACzB5E,EAAY4E,SAAU,EAEtB,IAAIsD,EAAOC,YAAYC,MACnBC,EAAM,EAEV,MAAMC,EAAQF,IACZ,GAAKpI,EAAY4E,QAAjB,CAIA,IAHAyD,GAAOD,EAAMF,EACbA,EAAOE,EAEAC,GAAOtI,EAAO6E,SACnB2D,KACAF,GAAOtI,EAAO6E,QAEhB/E,EAAM+E,QAAU4D,sBAAsBF,EARN,CAQW,EAG7CzI,EAAM+E,QAAU4D,sBAAsBF,EAAK,EAGvCG,GAAWA,KACX5I,EAAM+E,SAAS8D,qBAAqB7I,EAAM+E,SAC9C/E,EAAM+E,QAAU,KAChB5E,EAAY4E,SAAU,CAAK,EAoBvB+D,GAAWC,UACfxJ,GAAY,GACZQ,EAAgB,GAChBwB,EAAYyH,OACZvH,EAAUwH,QACVxJ,EAAW,GACXkB,EAAWoE,SAAU,EACrBnE,EAAYmE,SAAU,EACtB9D,EAAW8D,QAAU,GAdHmE,MAClB,IAAKhG,GAAO6B,UAAY1E,EAAK0E,QAAQvC,OAAQ,OAC7C,MAAMyD,EAAO5F,EAAK0E,QAAQ1E,EAAK0E,QAAQvC,OAAS,GAChD6B,GAASnB,GAAO6B,QAASkB,EAAKxF,IAAKwF,EAAKvF,IAAK2C,GAAc,EAY3D6F,GACAN,IAAU,EAINO,GAAoBA,CAACtH,EAAGC,IA5TVsH,EAACvH,EAAGC,IAAOD,EAAI,GAAKC,EAAI,GAAKD,GAAKnD,GAAQoD,GAAKrD,EA6T7D2K,CAAYvH,EAAGC,IACfhB,EAAYiE,QAAQmC,IAAItF,EAAMC,EAAGC,IADP,SAE1BxB,EAAQyE,QAAQmC,IAAItF,EAAMC,EAAGC,KAAY,OAIzC4G,GAAWA,KACf,IAAK/H,EAAWoE,SAAWnE,EAAYmE,QAAS,OAE5C9D,EAAW8D,QAAQvC,SACrBpC,EAAc2E,QAAU9D,EAAW8D,QAAQsE,SAE7C/K,EAAUyG,QAAU3E,EAAc2E,QAElC,MAAMkB,EAAO5F,EAAK0E,QAAQ1E,EAAK0E,QAAQvC,OAAS,IACzC8G,EAAIC,IA9NC1H,EA8NUoE,EAAKxF,IA9NZqB,EA8NiBmE,EAAKvF,KA9NnBsB,EA8NwB1D,EAAUyG,WA7N9ClG,EAAK,CAACgD,EAAI,EAAGC,GACjBE,IAAMjD,EAAO,CAAC8C,EAAI,EAAGC,GACnBE,IAAMhD,EAAO,CAAC6C,EAAGC,EAAI,GACnB,CAACD,EAAGC,EAAI,IAJH0H,IAAC3H,EAAGC,EAAGE,EAgOlB,MAAMyH,EAAOH,IAAO9I,EAAWuE,QAAQtE,KAAO8I,IAAO/I,EAAWuE,QAAQrE,IAIxE,GADgByI,GAAkBG,EAAIC,GAEpCT,UAeF,GAVIW,GAAKzD,KAGT3B,GAASnB,GAAO6B,QAASkB,EAAKxF,IAAKwF,EAAKvF,IAAK2C,IAG7ChD,EAAK0E,QAAQiC,KAAK,CAAEvG,IAAK6I,EAAI5I,IAAK6I,IAClCjJ,EAAQyE,QAAQ8C,IAAIjG,EAAM0H,EAAIC,IAC9BlF,GAASnB,GAAO6B,QAASuE,EAAIC,EAAIlG,IAE7BoG,EApLJpK,GAAWqK,IACT,MAAM7C,EAAO6C,EAAI,EAMjB,OALI7C,EAAO5H,IAAqB,GAAGc,GAAiBiC,GAAMA,EAAI,OAC1D6E,GAAQ5H,GAAoB4H,EAAO5H,IAAqB,IAC1D2I,KACAA,MAEKf,CAAI,IAEbY,SA6KO,CAEL,MAAMkC,EAAOtJ,EAAK0E,QAAQsE,QAC1B/I,EAAQyE,QAAQ6E,OAAOhI,EAAM+H,EAAKlJ,IAAKkJ,EAAKjJ,MAC5C+D,GAAUvB,GAAO6B,QAAS4E,EAAKlJ,IAAKkJ,EAAKjJ,IAC3C,GA6EF,OAxEAmJ,EAAAA,EAAAA,kBAAgB,KACd,IAAIC,EAAM,EACV,MAAMC,EAAaA,KACjBlB,qBAAqBiB,GACrBA,EAAMnB,uBAAsB,KAE1B,GADA9I,EAAe+D,OAAOoG,YAClBjH,EAAMgC,SAAW/B,GAAO+B,QAAS,CACnC9B,GAAM8B,QAAUzB,GAAcP,EAAMgC,QAAS5B,GAASC,GAAS,CAAEM,OAAO,IACxER,GAAO6B,QAAUzB,GAAcN,GAAO+B,QAAS5B,GAASC,GAAS,CAAEM,OAAO,IAC1EiB,GAAS1B,GAAM8B,SACf,IAAK,MAAMkF,KAAKpJ,EAAUkE,QAASc,GAAaoE,EAAExJ,IAAKwJ,EAAEvJ,KACzDwC,GAAO6B,QAAQL,UAAU,EAAG,EAAGvB,GAASC,IACxC8C,KACAJ,IACF,IACA,EAIJ,OAFAlC,OAAO/F,iBAAiB,SAAUkM,GAClCA,IACO,KACLlB,qBAAqBiB,GACrBlG,OAAOsG,oBAAoB,SAAUH,EAAW,CACjD,GAEA,KAGHpM,EAAAA,EAAAA,YAAU,KACR,MAAMwM,EAAarM,IACjB,MAAMkE,EAAIoE,GAAiBtI,EAAEwI,KAC7BM,GAAW5E,EAAE,EAGf,OADA4B,OAAO/F,iBAAiB,UAAWsM,GAC5B,IAAMvG,OAAOsG,oBAAoB,UAAWC,EAAU,GAE5D,CAAC/D,MAGJzI,EAAAA,EAAAA,YAAU,KACR,IAAKgE,EAAU,OACf,MAAMK,EAAIoE,GAAiB1G,GAC3BkH,GAAW5E,EAAE,GAEZ,CAACtC,EAAQ0G,GAAkBzE,KAE9BhE,EAAAA,EAAAA,YAAU,KACR,MAAMyM,EAAMxM,SAASyM,eAAe,YAChCD,IAAKA,EAAIpG,MAAMsG,OAAM,cAAArG,OAAiBnE,EAAY,QAAM,GAC3D,CAACA,KAGJnC,EAAAA,EAAAA,YAAU,KACR,MAAM4M,EAAQA,IAAM3M,SAAS4M,OAAS5B,KAAcjI,EAAWoE,SAAWqD,KAE1E,OADAxK,SAASC,iBAAiB,mBAAoB0M,EAAO,CAAEvM,SAAS,IACzD,IAAMJ,SAASsM,oBAAoB,mBAAoBK,EAAM,GAEnE,KAGH5M,EAAAA,EAAAA,YAAU,IACD,KACL4D,EAAY4G,OAAS,EACrBhH,EAASgH,OAAS,EAClB1G,EAAU0G,OAAS,EACnB1G,EAAUgJ,YAAc,EACxB7B,IAAU,GAEX,CAACrH,EAAaJ,EAAUM,KAG3B9D,EAAAA,EAAAA,YAAU,KAAQuK,IAAU,GAAK,CAACA,MAGhCjK,EAAAA,EAAAA,KAAAyM,EAAAA,SAAA,CAAAC,UACE1M,EAAAA,EAAAA,KAAA,OAAK2M,GAAG,WAAWzM,UAAU,cAAawM,UACxCE,EAAAA,EAAAA,MAAA,OAAK1M,UAAU,iBAAiB6F,MAAO,CAAE8G,OAAQtL,EAAY,OAAS,WAAYmL,SAAA,EAChF1M,EAAAA,EAAAA,KAAA,MAAIE,UAAU,aAAa6F,MAAO,CAAE+G,QAASvL,GAAaF,EAAW,OAAS,SAAUqL,SAAC,UAIvFnL,IACAvB,EAAAA,EAAAA,KAAA,UACE+M,YAAaA,IAAM7J,EAAS6H,OAC5BiC,QAASA,KAAa9K,EAAY4E,SApK5BgE,WAChBH,KACAV,KACAhH,EAAS6D,QAAU1H,EACnBoC,EAAW,GACXkB,EAAWoE,SAAU,EACrBnE,EAAYmE,SAAU,EACtBtD,EAAUuH,OACVZ,IAAW,EA4J0C8C,EAAW,EACtDC,SAAUhL,EAAY4E,QAAQ4F,SAE7BrL,EAAW,YAAc,gBAI9BuL,EAAAA,EAAAA,MAAA,OACED,GAAG,aACHzM,UAAU,QACViN,IAAKtI,EACLkB,MAAO,CACL+G,QAASvL,GAAaF,EAAW,QAAU,OAC3C+L,SAAU,WACVvH,MAAOX,GACPY,OAAQX,IACRuH,SAAA,EAGF1M,EAAAA,EAAAA,KAAA,UACEmN,IAAKrI,EACLe,MAAOX,GACPY,OAAQX,GACRY,MAAO,CAAEqH,SAAU,WAAYC,KAAM,EAAGC,IAAK,EAAGC,OAAQ,MAG1DvN,EAAAA,EAAAA,KAAA,UACEmN,IAAKpI,GACLc,MAAOX,GACPY,OAAQX,GACRY,MAAO,CAAEqH,SAAU,WAAYC,KAAM,EAAGC,IAAK,EAAGE,WAAY,cAAeD,OAAQ,EAAGE,eAAgB,eAGvGpM,IACCuL,EAAAA,EAAAA,MAAA,OAAK1M,UAAU,YAAY6F,MAAO,CAAEwH,OAAQ,GAAIb,SAAA,EAC9C1M,EAAAA,EAAAA,KAAA,KAAGE,UAAU,iBAAgBwM,UAACE,EAAAA,EAAAA,MAAA,QAAAF,SAAA,CAAM,YAAU,UAC9C1M,EAAAA,EAAAA,KAAA,KAAGE,UAAU,wBAAuBwM,UAACE,EAAAA,EAAAA,MAAA,QAAAF,SAAA,CAAM,YAAU,gBAK3D1M,EAAAA,EAAAA,KAAA,KAAGE,UAAU,QAAQ6F,MAAO,CAAE+G,QAASvL,GAAaF,EAAW,QAAU,QAASqL,SAC/EvL,IAGFuC,GAAYnC,GAAa0B,EAAS6D,SAAU9G,EAAAA,EAAAA,KAACiD,EAAS6D,QAAO,CAACxH,aAAcoC,IAAgB,WAKvG,C,kCCjjBO,MAAM0B,UAAsBsK,MACjCC,WAAAA,CAAYC,GAAkB,IAAbpD,EAAIlG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACnBuJ,MAAMD,GAAK,KAIbE,aAAgBC,IAAc,IAADC,EAC3B,OAAe,QAARA,EAAAC,KAAKL,WAAG,IAAAI,OAAA,EAARA,EAAUE,SAASH,KACnBE,KAAKzB,YAAc,IAClByB,KAAKE,SACLF,KAAKG,OACNH,KAAKI,WAAa,CAAC,EAC1B,KAEFC,SAAW,IAAML,KAAKM,SAAWN,KAAKzB,YAAY,KAElDxB,MAAQ,KACNiD,KAAKO,QACLP,KAAKzB,YAAc,CAAC,EAfpByB,KAAKzD,KAAOA,CACd,E","sources":["snek/JoystickControls.js","snek/Snek.js","util/Audio.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Joystick, { Direction } from 'rc-joystick';\n\nexport const JoystickControls = ({setDirection}) => {\n  const [currentDirection, setCurrentDirection] = useState();\n\n  const onMove = (stick) => {\n    if (currentDirection === stick.direction) return;\n    if (stick.direction === Direction.Center) return;\n\n    setCurrentDirection(stick.direction);\n    setDirection(stick.direction);\n  };\n\n  useEffect(() => {\n    document.addEventListener('touchmove', (e) => { e.preventDefault(); }, { passive:false });\n  }, []);\n\n  return <Joystick className='joystick' onChange={onMove}/>;\n};\n","import { Direction } from 'rc-joystick';\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { PersonalAudio } from \"../util/Audio\";\nimport { JoystickControls } from \"./JoystickControls\";\n\nimport gameOverNoise from '../assets/snek/game_over.mp3';\nimport clickNoise from '../assets/snek/groovy_click.mp3';\nimport gameMusicNoise from '../assets/snek/the_gathering.mp3';\n\nimport '../styles/snek.css';\n\nconst COLs = 35;\nconst ROWs = 20;\nconst DEFAULT_SNEK_LENGTH = 6;\nvar TICK_SPEED_MS = 125;\n\n// Directions\nconst UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;\nconst POINTS_PER_LEVEL = 5;\nconst CELL = 22; // px per cell\n\nexport default function Snek() {\n  const [points, setPoints] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [isPlaying, setPlaying] = useState(0);\n  const [dirKey, setDirKey] = useState(\"ArrowRight\");\n  const [windowWidth, setWindowWidth] = useState(0);\n  const [hueRotateDeg, setHueRotateDeg] = useState(0);\n\n  // Timing\n  const rafId = useRef(null);\n  const stepMs = useRef(TICK_SPEED_MS);\n  const loopRunning = useRef(false);\n\n  // Game state\n  const direction = useRef(RIGHT);\n  const nextDirection = useRef(RIGHT);\n  const snek = useRef([]);           // [{row,col}]\n  const snekSet = useRef(new Set()); // indices\n  const foodCoords = useRef({ row: -1, col: -1 });\n  const playingRef = useRef(false);\n  const gameOverRef = useRef(false);\n\n  // Obstacles\n  const obstacles = useRef([]);          // [{row,col}]\n  const obstacleSet = useRef(new Set()); // indices\n  const blockedMask = useRef(new Uint8Array(ROWs * COLs)); // adjacency counts\n\n  // Input queue\n  const inputQueue = useRef([]);\n  const MAX_QUEUE = 3;\n\n  const joystick = useRef();\n\n  const clickSFX = useMemo(() => new PersonalAudio(clickNoise), []);\n  const gameOverSFX = useMemo(() => new PersonalAudio(gameOverNoise), []);\n  const gameMusic = useMemo(() => new PersonalAudio(gameMusicNoise, true), []);\n\n  const isMobile = windowWidth <= 768;\n\n  // Helpers\n  const idxOf = (r, c) => r * COLs + c;\n  const outOfBounds = (r, c) => (r < 0 || c < 0 || r >= ROWs || c >= COLs);\n  const opposite = (d) => (d + 2) % 4;\n  const chebyshevDist = (r1, c1, r2, c2) => Math.max(Math.abs(r1 - r2), Math.abs(c1 - c2));\n  const atLeastNAway = (r1, c1, r2, c2, n = 1) => chebyshevDist(r1, c1, r2, c2) >= n + 1;\n\n  const markAdjAround = (r, c, delta) => {\n    for (let rr = r - 1; rr <= r + 1; rr++) {\n      for (let cc = c - 1; cc <= c + 1; cc++) {\n        if (rr < 0 || cc < 0 || rr >= ROWs || cc >= COLs) continue;\n        const i = idxOf(rr, cc);\n        const next = blockedMask.current[i] + delta;\n        blockedMask.current[i] = next < 0 ? 0 : next;\n      }\n    }\n  };\n\n  // ===== Canvas setup =====\n  const boardRef = useRef(null);\n  const bgRef = useRef(null);   // opaque: board color + grid + obstacles\n  const dynRef = useRef(null);  // transparent: snake + food\n  const bgCtx = useRef(null);\n  const dynCtx = useRef(null);\n\n  const BOARD_W = COLs * CELL;\n  const BOARD_H = ROWs * CELL;\n\n  const colors = {\n    grid: \"rgba(233,233,242,0.55)\",\n    obstacle: \"rgba(233,233,242,0.9)\",\n    food: \"#3cff00\",\n    body: \"#ffffff\",\n    head: \"#ffffff\",\n    headKO: \"#ff4d4f\",\n  };\n\n  const setCanvasSize = (canvas, wCSS, hCSS, { alpha } = { alpha: true }) => {\n    const dpr = Math.max(1, window.devicePixelRatio || 1);\n    const needResize = canvas.width !== wCSS * dpr || canvas.height !== hCSS * dpr;\n    if (needResize) {\n      canvas.width = wCSS * dpr;\n      canvas.height = hCSS * dpr;\n      canvas.style.width = `${wCSS}px`;\n      canvas.style.height = `${hCSS}px`;\n    }\n    const ctx = canvas.getContext('2d', { alpha });\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    return ctx;\n  };\n\n  const getBoardBg = () => {\n    const el = boardRef.current;\n    if (!el) return 'transparent';\n    const bg = getComputedStyle(el).backgroundColor;\n    return bg && bg !== 'rgba(0, 0, 0, 0)' ? bg : 'rgb(95, 93, 156)'; // fallback to your CSS var\n  };\n\n  const drawCell = (ctx, r, c, fill) => {\n    ctx.fillStyle = fill;\n    ctx.fillRect(c * CELL, r * CELL, CELL, CELL);\n  };\n  const clearCell = (ctx, r, c) => ctx.clearRect(c * CELL, r * CELL, CELL, CELL);\n\n  const drawGrid = (ctx) => {\n    // paint the board background color so filters don’t black-box us\n    const bg = getBoardBg();\n    ctx.fillStyle = bg;\n    ctx.fillRect(0, 0, BOARD_W, BOARD_H);\n\n    // dotted grid on top\n    ctx.save();\n    ctx.strokeStyle = colors.grid;\n    ctx.setLineDash([2, 3]);\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    for (let r = 0; r <= ROWs; r++) {\n      const y = r * CELL + 0.5;\n      ctx.moveTo(0, y); ctx.lineTo(BOARD_W, y);\n    }\n    for (let c = 0; c <= COLs; c++) {\n      const x = c * CELL + 0.5;\n      ctx.moveTo(x, 0); ctx.lineTo(x, BOARD_H);\n    }\n    ctx.stroke();\n    ctx.restore();\n  };\n\n  const drawObstacle = (r, c) => bgCtx.current && drawCell(bgCtx.current, r, c, colors.obstacle);\n  const drawFood = () => {\n    const f = foodCoords.current;\n    if (dynCtx.current && f.row >= 0) drawCell(dynCtx.current, f.row, f.col, colors.food);\n  };\n  const eraseFood = () => {\n    const f = foodCoords.current;\n    if (!dynCtx.current || f.row < 0) return;\n    // if head is here, don't clear (avoids flicker even if called late)\n    const head = snek.current[snek.current.length - 1];\n    if (head && head.row === f.row && head.col === f.col) return;\n    clearCell(dynCtx.current, f.row, f.col);\n  };\n  const drawSnakeInitial = () => {\n    if (!dynCtx.current || !snek.current.length) return;\n    for (let i = 0; i < snek.current.length - 1; i++) {\n      const { row, col } = snek.current[i];\n      drawCell(dynCtx.current, row, col, colors.body);\n    }\n    const head = snek.current[snek.current.length - 1];\n    drawCell(dynCtx.current, head.row, head.col, colors.head);\n  };\n\n  // ===== Input helpers =====\n  const move = (r, c, d) => (\n    d === UP ? [r - 1, c] :\n      d === DOWN ? [r + 1, c] :\n        d === LEFT ? [r, c - 1] :\n          [r, c + 1]\n  );\n\n  const getNextDirection = useCallback((key) => {\n    switch (key) {\n      case 'w': case 'W': case Direction.Top: key = \"ArrowUp\"; break;\n      case 's': case 'S': case Direction.Bottom: key = \"ArrowDown\"; break;\n      case 'a': case 'A': case Direction.Left: key = \"ArrowLeft\"; break;\n      case 'd': case 'D': case Direction.Right: key = \"ArrowRight\"; break;\n      default: break;\n    }\n    const want =\n      key === \"ArrowUp\" ? UP :\n        key === \"ArrowDown\" ? DOWN :\n          key === \"ArrowLeft\" ? LEFT :\n            key === \"ArrowRight\" ? RIGHT : null;\n    if (want == null) return null;\n    if (want === opposite(direction.current)) return null; // no 180s\n    return want;\n  }, []);\n\n  const enqueueDir = (next) => {\n    if (next == null) return;\n    const lastEffective =\n      inputQueue.current.length\n        ? inputQueue.current[inputQueue.current.length - 1]\n        : (nextDirection.current ?? direction.current);\n    if (next === opposite(lastEffective)) return;\n    if (inputQueue.current.length && inputQueue.current[inputQueue.current.length - 1] === next) return;\n    if (inputQueue.current.length < MAX_QUEUE) inputQueue.current.push(next);\n  };\n\n  // ===== Spawn rules =====\n  const isCellFreeOfSnake = (r, c) => !snekSet.current.has(idxOf(r, c));\n  const isCellFreeOfObstacles = (r, c) => !obstacleSet.current.has(idxOf(r, c));\n  const isCellFarFromAllObstacles = (r, c) => blockedMask.current[idxOf(r, c)] === 0;\n  const isCellFarFromFood = (r, c) => {\n    const f = foodCoords.current;\n    if (f.row < 0) return true;\n    return atLeastNAway(r, c, f.row, f.col, 1);\n  };\n  const isCellFarFromSnekHead = (r, c) => {\n    if (!snek.current.length) return true;\n    const head = snek.current[snek.current.length - 1];\n    return atLeastNAway(r, c, head.row, head.col, 5);\n  };\n\n  const validFoodCell = (r, c) =>\n    isCellFreeOfSnake(r, c) &&\n    isCellFarFromSnekHead(r, c) &&\n    isCellFreeOfObstacles(r, c) &&\n    isCellFarFromAllObstacles(r, c);\n\n  const validObstacleCell = (r, c) =>\n    isCellFreeOfSnake(r, c) &&\n    isCellFreeOfObstacles(r, c) &&\n    isCellFarFromAllObstacles(r, c) &&\n    isCellFarFromFood(r, c);\n\n  const eatFood = () => {\n    setPoints((p) => {\n      const next = p + 1;\n      if (next % POINTS_PER_LEVEL === 0) setHueRotateDeg((d) => d + 43.5); // keep the original bump\n      if (next >= POINTS_PER_LEVEL && next % POINTS_PER_LEVEL === 0) {\n        spawnObstacle();\n        spawnObstacle();\n      }\n      return next;\n    });\n    populateFoodBall();\n  };\n\n  const populateFoodBall = useCallback(() => {\n    let r, c, tries = 0;\n    do {\n      r = (Math.random() * ROWs) | 0;\n      c = (Math.random() * COLs) | 0;\n      tries++;\n      if (tries > 200) break;\n    } while (!validFoodCell(r, c));\n    eraseFood();\n    foodCoords.current = { row: r, col: c };\n    drawFood();\n    // eslint-disable-next-line\n  }, []);\n\n  const spawnObstacle = () => {\n    let r, c, tries = 0;\n    do {\n      r = (Math.random() * ROWs) | 0;\n      c = (Math.random() * COLs) | 0;\n      tries++;\n      if (tries > 300) return;\n    } while (!validObstacleCell(r, c));\n\n    obstacles.current.push({ row: r, col: c });\n    obstacleSet.current.add(idxOf(r, c));\n    drawObstacle(r, c);\n    markAdjAround(r, c, +1);\n  };\n\n  // ===== Init / Reset =====\n  const initGame = useCallback(() => {\n    // Reset game state\n    snek.current = [];\n    snekSet.current = new Set();\n    obstacles.current = [];\n    obstacleSet.current = new Set();\n    blockedMask.current = new Uint8Array(ROWs * COLs);\n\n    // Canvases (bg = OPAQUE, dyn = TRANSPARENT)\n    if (bgRef.current && dynRef.current) {\n      bgCtx.current = setCanvasSize(bgRef.current, BOARD_W, BOARD_H, { alpha: false }); // opaque\n      dynCtx.current = setCanvasSize(dynRef.current, BOARD_W, BOARD_H, { alpha: true }); // transparent\n      drawGrid(bgCtx.current);\n      dynCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n    }\n\n    // Seed snake left-to-right on top row\n    for (let i = 0; i < DEFAULT_SNEK_LENGTH; i++) {\n      snek.current.push({ row: 0, col: i });\n      snekSet.current.add(idxOf(0, i));\n    }\n\n    // Audio\n    gameOverSFX.volume = 1;\n    clickSFX.volume = 1;\n    gameMusic.volume = 1;\n\n    setGameOver(false);\n    setPoints(0);\n    direction.current = RIGHT;\n    nextDirection.current = RIGHT;\n    inputQueue.current = [];\n    playingRef.current = false;\n    gameOverRef.current = false;\n\n    drawSnakeInitial();\n    populateFoodBall();\n    // eslint-disable-next-line\n  }, [clickSFX, gameMusic, gameOverSFX, populateFoodBall]);\n\n  // ===== Loop control =====\n  const startLoop = () => {\n    if (loopRunning.current) return;\n    loopRunning.current = true;\n\n    let last = performance.now();\n    let acc = 0;\n\n    const loop = (now) => {\n      if (!loopRunning.current) return;\n      acc += now - last;\n      last = now;\n\n      while (acc >= stepMs.current) {\n        tickSnek();\n        acc -= stepMs.current;\n      }\n      rafId.current = requestAnimationFrame(loop);\n    };\n\n    rafId.current = requestAnimationFrame(loop);\n  };\n\n  const stopLoop = () => {\n    if (rafId.current) cancelAnimationFrame(rafId.current);\n    rafId.current = null;\n    loopRunning.current = false;\n  };\n\n  const startGame = async () => {\n    stopLoop();\n    initGame();\n    joystick.current = JoystickControls;\n    setPlaying(1);\n    playingRef.current = true;\n    gameOverRef.current = false;\n    gameMusic.play();\n    startLoop();\n  };\n\n  const paintHeadKO = () => {\n    if (!dynCtx.current || !snek.current.length) return;\n    const head = snek.current[snek.current.length - 1];\n    drawCell(dynCtx.current, head.row, head.col, colors.headKO);\n  };\n\n  const stopGame = async () => {\n    setGameOver(true);\n    setHueRotateDeg(0);\n    gameOverSFX.play();\n    gameMusic.reset();\n    setPlaying(0);\n    playingRef.current = false;\n    gameOverRef.current = true;\n    inputQueue.current = [];\n    paintHeadKO();\n    stopLoop();\n  };\n\n  // ===== Collision & Tick =====\n  const collisionDetected = (r, c) => {\n    if (outOfBounds(r, c)) return 'wall';\n    if (obstacleSet.current.has(idxOf(r, c))) return 'wall';\n    if (snekSet.current.has(idxOf(r, c))) return 'self';\n    return false;\n  };\n\n  const tickSnek = () => {\n    if (!playingRef.current || gameOverRef.current) return;\n\n    if (inputQueue.current.length) {\n      nextDirection.current = inputQueue.current.shift();\n    }\n    direction.current = nextDirection.current;\n\n    const head = snek.current[snek.current.length - 1];\n    const [nr, nc] = move(head.row, head.col, direction.current);\n\n    const ate = (nr === foodCoords.current.row && nc === foodCoords.current.col);\n\n    // detect collision before drawing\n    const colType = collisionDetected(nr, nc);\n    if (colType) {\n      stopGame();\n      return;\n    }\n\n    // if we’re going to eat, clear the food pixel BEFORE drawing the new head\n    if (ate) eraseFood();\n\n    // repaint old head as body\n    drawCell(dynCtx.current, head.row, head.col, colors.body);\n\n    // push/draw new head\n    snek.current.push({ row: nr, col: nc });\n    snekSet.current.add(idxOf(nr, nc));\n    drawCell(dynCtx.current, nr, nc, colors.head);\n\n    if (ate) {\n      eatFood();\n    } else {\n      // pop tail\n      const tail = snek.current.shift();\n      snekSet.current.delete(idxOf(tail.row, tail.col));\n      clearCell(dynCtx.current, tail.row, tail.col); // transparent hole shows bg grid\n    }\n  };\n\n  // ===== Effects =====\n  // throttle resize + keep canvases crisp\n  useLayoutEffect(() => {\n    let raf = 0;\n    const updateSize = () => {\n      cancelAnimationFrame(raf);\n      raf = requestAnimationFrame(() => {\n        setWindowWidth(window.innerWidth);\n        if (bgRef.current && dynRef.current) {\n          bgCtx.current = setCanvasSize(bgRef.current, BOARD_W, BOARD_H, { alpha: false }); // opaque bg\n          dynCtx.current = setCanvasSize(dynRef.current, BOARD_W, BOARD_H, { alpha: true }); // transparent dyn\n          drawGrid(bgCtx.current);\n          for (const o of obstacles.current) drawObstacle(o.row, o.col);\n          dynCtx.current.clearRect(0, 0, BOARD_W, BOARD_H);\n          drawSnakeInitial();\n          drawFood();\n        }\n      });\n    };\n    window.addEventListener('resize', updateSize);\n    updateSize();\n    return () => {\n      cancelAnimationFrame(raf);\n      window.removeEventListener('resize', updateSize);\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  // keyboard input\n  useEffect(() => {\n    const onKeydown = (e) => {\n      const d = getNextDirection(e.key);\n      enqueueDir(d);\n    };\n    window.addEventListener(\"keydown\", onKeydown);\n    return () => window.removeEventListener(\"keydown\", onKeydown);\n    // eslint-disable-next-line\n  }, [getNextDirection]);\n\n  // mobile joystick input\n  useEffect(() => {\n    if (!isMobile) return;\n    const d = getNextDirection(dirKey);\n    enqueueDir(d);\n    // eslint-disable-next-line\n  }, [dirKey, getNextDirection, isMobile]);\n\n  useEffect(() => {\n    const app = document.getElementById('app-base');\n    if (app) app.style.filter = `hue-rotate(${hueRotateDeg}deg)`;  // <- page bg shifts too\n  }, [hueRotateDeg]);\n\n  // pause when hidden\n  useEffect(() => {\n    const onVis = () => document.hidden ? stopLoop() : (playingRef.current && startLoop());\n    document.addEventListener('visibilitychange', onVis, { passive: true });\n    return () => document.removeEventListener('visibilitychange', onVis);\n    // eslint-disable-next-line\n  }, []);\n\n  // cleanup on unmount\n  useEffect(() => {\n    return () => {\n      gameOverSFX.volume = 0;\n      clickSFX.volume = 0;\n      gameMusic.volume = 0;\n      gameMusic.currentTime = 0;\n      stopLoop();\n    }\n  }, [gameOverSFX, clickSFX, gameMusic]);\n\n  // seed game (don’t start loop)\n  useEffect(() => { initGame(); }, [initGame]);\n\n  return (\n    <>\n      <div id='app-base' className=\"snek-colors\">\n        <div className=\"game-container\" style={{ cursor: isPlaying ? 'none' : 'inherit' }}>\n          <h1 className='snek-title' style={{ display: isPlaying || gameOver ? 'none' : 'block' }}>\n            SNEK\n          </h1>\n\n          {!isPlaying &&\n            <button\n              onMouseDown={() => clickSFX.play()}\n              onClick={() => { if (!loopRunning.current) startGame(); }}\n              disabled={loopRunning.current}\n            >\n              {gameOver ? 'try again' : 'start game'}\n            </button>\n          }\n\n          <div\n            id=\"board-wrap\"\n            className=\"board\"\n            ref={boardRef}\n            style={{\n              display: isPlaying || gameOver ? 'block' : 'none',\n              position: 'absolute',\n              width: BOARD_W,\n              height: BOARD_H\n            }}\n          >\n            {/* Opaque bg canvas: board color + dotted grid + obstacles */}\n            <canvas\n              ref={bgRef}\n              width={BOARD_W}\n              height={BOARD_H}\n              style={{ position: 'absolute', left: 0, top: 0, zIndex: 1 }}\n            />\n            {/* Transparent dynamic canvas: snake + food */}\n            <canvas\n              ref={dynRef}\n              width={BOARD_W}\n              height={BOARD_H}\n              style={{ position: 'absolute', left: 0, top: 0, background: 'transparent', zIndex: 2, imageRendering: 'pixelated' }}\n            />\n\n            {gameOver &&\n              <div className='game-over' style={{ zIndex: 3 }}>\n                <p className='game-over-text'><span>GAME OVER{' '}</span></p>\n                <p className='game-over-text second'><span>GAME OVER{' '}</span></p>\n              </div>\n            }\n          </div>\n\n          <p className='score' style={{ display: isPlaying || gameOver ? 'block' : 'none' }}>\n            {points}\n          </p>\n\n          {isMobile && isPlaying && joystick.current ? <joystick.current setDirection={setDirKey} /> : null}\n        </div>\n      </div>\n    </>\n  );\n}\n","export class PersonalAudio extends Audio {\n  constructor(src, loop=false) {\n    super(src);\n    this.loop = loop;\n  };\n\n  isPlayingSrc = (audioSrc) => {\n    return this.src?.includes(audioSrc)\n        && this.currentTime > 0\n        && !this.paused\n        && !this.ended\n        && this.readyState > 2;\n  };\n\n  timeLeft = () => this.duration - this.currentTime;\n\n  reset = () => {\n    this.pause();\n    this.currentTime = 0;\n  };\n}"],"names":["JoystickControls","_ref","setDirection","currentDirection","setCurrentDirection","useState","useEffect","document","addEventListener","e","preventDefault","passive","_jsx","Joystick","className","onChange","stick","direction","Direction","Center","COLs","ROWs","DEFAULT_SNEK_LENGTH","TICK_SPEED_MS","UP","RIGHT","DOWN","LEFT","POINTS_PER_LEVEL","CELL","Snek","points","setPoints","gameOver","setGameOver","isPlaying","setPlaying","dirKey","setDirKey","windowWidth","setWindowWidth","hueRotateDeg","setHueRotateDeg","rafId","useRef","stepMs","loopRunning","nextDirection","snek","snekSet","Set","foodCoords","row","col","playingRef","gameOverRef","obstacles","obstacleSet","blockedMask","Uint8Array","inputQueue","joystick","clickSFX","useMemo","PersonalAudio","clickNoise","gameOverSFX","gameOverNoise","gameMusic","gameMusicNoise","isMobile","idxOf","r","c","opposite","d","atLeastNAway","r1","c1","r2","c2","n","arguments","length","undefined","chebyshevDist","Math","max","abs","boardRef","bgRef","dynRef","bgCtx","dynCtx","BOARD_W","BOARD_H","colors","setCanvasSize","canvas","wCSS","hCSS","alpha","dpr","window","devicePixelRatio","width","height","style","concat","ctx","getContext","setTransform","drawCell","fill","fillStyle","fillRect","clearCell","clearRect","drawGrid","bg","getBoardBg","el","current","getComputedStyle","backgroundColor","save","strokeStyle","setLineDash","lineWidth","beginPath","y","moveTo","lineTo","x","stroke","restore","drawObstacle","drawFood","f","eraseFood","head","drawSnakeInitial","i","getNextDirection","useCallback","key","Top","Bottom","Left","Right","want","enqueueDir","next","_nextDirection$curren","lastEffective","push","isCellFreeOfSnake","has","isCellFreeOfObstacles","isCellFarFromAllObstacles","validFoodCell","isCellFarFromSnekHead","validObstacleCell","isCellFarFromFood","populateFoodBall","tries","random","spawnObstacle","add","markAdjAround","delta","rr","cc","initGame","volume","startLoop","last","performance","now","acc","loop","tickSnek","requestAnimationFrame","stopLoop","cancelAnimationFrame","stopGame","async","play","reset","paintHeadKO","collisionDetected","outOfBounds","shift","nr","nc","move","ate","p","tail","delete","useLayoutEffect","raf","updateSize","innerWidth","o","removeEventListener","onKeydown","app","getElementById","filter","onVis","hidden","currentTime","_Fragment","children","id","_jsxs","cursor","display","onMouseDown","onClick","startGame","disabled","ref","position","left","top","zIndex","background","imageRendering","Audio","constructor","src","super","isPlayingSrc","audioSrc","_this$src","this","includes","paused","ended","readyState","timeLeft","duration","pause"],"sourceRoot":""}