"use strict";(self.webpackChunkpersonalsite=self.webpackChunkpersonalsite||[]).push([[200],{202:(t,e,n)=>{n.r(e),n.d(e,{default:()=>C});var r=n(5043);const i=n.p+"static/media/guitar.7c3177d2baeb887643cc.mp3",a=n.p+"static/media/click.1c87678ffc4ae6835e44.mp3";var c=n(7375),s=n(579);const o={GRAVITY:.01,BUOYANCY:.04,FRICTION:.98,HEAT_RATE:.005,COOL_RATE:.0017,HEAT_CONDUCTION:.002,HEAT_SOURCE_DISTANCE:45,COHESION_RADIUS:25,COHESION_STRENGTH:.0035,MOUSE_HEAT_RADIUS:100},u={PARTICLE_RADIUS:10,PIXEL_SIZE:6,THRESHOLD:.8},l={COUNT:15,RADIUS:50,TOP_HALF_PROB:.3},h={WIDTH:1920,HEIGHT:1080,PARTICLES:1200};const d="lavaLamp.musicTimeSeconds";function m(t){return t<0?0:t>1?1:t}function f(t,e){return Math.hypot(t,e)}function v(t){const e=Math.random()*Math.PI*2,n=Math.random()*t;return{x:Math.cos(e)*n,y:Math.sin(e)*n}}function T(t,e,n){t.x<0?(t.x=0,t.vx*=-.5):t.x>e&&(t.x=e,t.vx*=-.5),t.y<0?(t.y=0,t.vy*=-.5):t.y>n&&(t.y=n,t.vy*=-.5)}function E(t,e,n,r,i,a){const c=t.length,s=o.GRAVITY,u=o.BUOYANCY,l=o.FRICTION,h=o.MOUSE_HEAT_RADIUS,d=1/h,v=o.HEAT_RATE,E=o.COOL_RATE,y=o.HEAT_SOURCE_DISTANCE,A=1/y,I=o.COHESION_RADIUS,w=1/I,C=o.COHESION_STRENGTH,R=o.HEAT_CONDUCTION,S=i.x,p=i.y;for(let o=0;o<c;o++){const i=t[o],c=i.heat*i.heat*u;if(i.vy+=s-c,i.vx*=l,i.vy*=l,i.x+=i.vx,i.y+=i.vy,r){const t=f(i.x-S,i.y-p);if(t<h){const e=1-t*d;i.heat+=2*v*e}}a[o]=0,T(i,e,n)}for(let o=0;o<c;o++){const e=t[o];for(let n=o+1;n<c;n++){const r=t[n],i=r.x-e.x,c=r.y-e.y,s=f(i,c);if(s>0&&s<I){a[o]++,a[n]++;const t=C*(1-s*w),u=1/s,l=i*u*t,h=c*u*t;e.vx+=l,e.vy+=h,r.vx-=l,r.vy-=h;const d=(e.heat-r.heat)*R;e.heat-=d,r.heat+=d}}}for(let o=0;o<c;o++){const e=t[o],r=n-e.y;if(r<y){const t=1-r*A;e.heat+=v*t}else{const t=8,n=1-(a[o]<t?a[o]:t)/t;e.heat-=E*(.2+.8*n)}e.heat=m(e.heat)}!function(t,e,n){for(let r=0;r<t.length;r++)T(t[r],e,n)}(t,e,n)}function y(t){const e=m(t);return{r:255,g:Math.round(50+205*e),b:0}}function A(t,e,n,r,i,a,c,s,o){for(let u=0;u<a;u++){const l=i+u;if(l>=n)continue;const h=l*e*4;for(let n=0;n<a;n++){const i=r+n;if(i>=e)continue;const a=h+4*i;t[a+0]=c,t[a+1]=s,t[a+2]=o,t[a+3]=255}}}function I(t,e,n,r){const i=e-t.x,a=n-t.y;return r/(i*i+a*a+1)}function w(t,e,n){const r=t.getContext("2d");if(!r)return;r.fillStyle="#000",r.fillRect(0,0,t.width,t.height);const i=function(t,e,n,r){const i=e.current;return i&&i.width===n&&i.height===r||(e.current=t.createImageData(n,r)),e.current}(r,n,t.width,t.height);!function(t,e,n,r){const i=t.data;i.fill(0);const a=u.PIXEL_SIZE,c=u.THRESHOLD,s=u.PARTICLE_RADIUS*u.PARTICLE_RADIUS;for(let o=0;o<r;o+=a)for(let t=0;t<n;t+=a){let u=0,l=0;for(let n=0;n<e.length;n++){const r=e[n],i=I(r,t,o,s);u+=i,l+=i*r.heat}if(u<=c)continue;const h=l/u,{r:d,g:m,b:f}=y(h);A(i,n,r,t,o,a,d,m,f)}}(i,e,t.width,t.height),r.putImageData(i,0,0)}function C(){const t=(0,r.useRef)(null),e=(0,r.useRef)(null),n=(0,r.useRef)([]),o=(0,r.useRef)(null),u=(0,r.useRef)(new Uint16Array(0)),m=(0,r.useRef)(null),f=(0,r.useMemo)((()=>new c.D(i,!0)),[]),T=(0,r.useMemo)((()=>new c.D(a,!1)),[]),[y,A]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),R=(0,r.useRef)(!1),S=(0,r.useRef)({x:0,y:0}),p=(0,r.useCallback)((()=>{const t=window.innerWidth,e=window.innerHeight;null===m.current&&(m.current=function(t,e){const n=h.WIDTH*h.HEIGHT,r=t*e,i=h.PARTICLES/n,a=Math.round(r*i);return Math.max(200,Math.min(2e3,a))}(t,e));const r=m.current;n.current=function(t,e,n){const r=[],i=Math.floor(n/l.COUNT);for(let a=0;a<l.COUNT;a++){const n=Math.random()*t,a=Math.random()<l.TOP_HALF_PROB?Math.random()*e*.5:.5*e+Math.random()*e*.5,c=Math.random();for(let t=0;t<i;t++){const t=v(l.RADIUS);r.push({x:n+t.x,y:a+t.y,vx:0,vy:0,heat:c})}}for(;r.length<n;)r.push({x:Math.random()*t,y:Math.random()*e,vx:0,vy:0,heat:0});return r}(t,e,r),u.current=new Uint16Array(r)}),[]),O=(0,r.useCallback)((()=>{var t;!function(t){try{if(!Number.isFinite(t)||t<0)return;localStorage.setItem(d,String(t))}catch(e){}}(null!==(t=f.currentTime)&&void 0!==t?t:0)}),[f]);(0,r.useEffect)((()=>{if(!y)return;const t=window.setInterval((()=>O()),1e3),e=()=>O(),n=()=>{"hidden"===document.visibilityState&&O()};return window.addEventListener("pagehide",e),document.addEventListener("visibilitychange",n),()=>{window.clearInterval(t),window.removeEventListener("pagehide",e),document.removeEventListener("visibilitychange",n)}}),[y,O]),(0,r.useEffect)((()=>()=>{O(),f.pause(),f.volume=0,f.reset(),T.pause(),T.volume=0,T.reset()}),[f,T,O]);const x=(0,r.useCallback)((()=>{E(n.current,window.innerWidth,window.innerHeight,R.current,S.current,u.current)}),[]),g=(0,r.useCallback)((()=>{const e=t.current;e&&w(e,n.current,o)}),[]),H=(0,r.useCallback)((()=>{I&&(x(),g(),e.current=requestAnimationFrame(H))}),[I,x,g]);(0,r.useEffect)((()=>{const e=()=>{const e=t.current;e&&(!function(t){t.width=window.innerWidth,t.height=window.innerHeight}(e),o.current=null,y&&g())};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[g,y]),(0,r.useEffect)((()=>I?(e.current=requestAnimationFrame(H),()=>{null!==e.current&&cancelAnimationFrame(e.current),e.current=null}):(null!==e.current&&cancelAnimationFrame(e.current),void(e.current=null))),[I,H]);const N=(0,r.useCallback)((()=>{try{T.volume=1,T.currentTime=0,T.reset(),T.play()}catch(t){}}),[T]),b=(0,r.useCallback)((()=>{const t=function(){try{const t=localStorage.getItem(d);if(!t)return 0;const e=Number(t);return Number.isFinite(e)&&e>=0?e:0}catch(t){return 0}}();try{const e=f.duration;"number"===typeof e&&Number.isFinite(e)&&e>0?f.currentTime=t%e:f.currentTime=t}catch(e){}}),[f]),_=(0,r.useCallback)((()=>{N(),y||(A(!0),p(),requestAnimationFrame((()=>g()))),C(!0),b(),f.volume=1,f.play()}),[g,f,y,p,N,b]),M=(0,r.useCallback)((()=>{N(),C((t=>{const e=!t;return e?(b(),f.volume=1,f.play()):(O(),f.pause()),e}))}),[f,N,b,O]),D=(0,r.useMemo)((()=>({w:window.innerWidth,h:window.innerHeight})),[]);return(0,s.jsxs)("div",{className:"lava-lamp-container",children:[(0,s.jsx)("canvas",{ref:t,className:"lava-lamp-canvas",width:D.w,height:D.h}),y?(0,s.jsx)("div",{className:"lava-lamp-controls",children:(0,s.jsx)("button",{className:"lava-lamp-button",onClick:M,children:I?"\u23f8":"\u25b6"})}):(0,s.jsx)("div",{className:"lava-lamp-start-overlay",children:(0,s.jsx)("button",{type:"button",className:"lava-lamp-start",onClick:_,"aria-label":"Start lava lamp",children:"START"})})]})}},7375:(t,e,n)=>{n.d(e,{D:()=>r});class r extends Audio{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(t),this.isPlayingSrc=t=>{var e;return(null===(e=this.src)||void 0===e?void 0:e.includes(t))&&this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2},this.isPlaying=()=>this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2,this.timeLeft=()=>this.duration-this.currentTime,this.reset=()=>{this.pause(),this.currentTime=0},this.loop=e}}}}]);
//# sourceMappingURL=200.d3b6849a.chunk.js.map